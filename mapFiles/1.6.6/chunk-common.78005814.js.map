{"version":3,"sources":["webpack:///./src/electron_browser/components/base/frames/titleFrame.vue","webpack:///./src/electron_browser/components/base/frames/titleFrame.vue?d046","webpack:///./src/electron_browser/components/base/list/base.vue?a06e","webpack:///./src/electron_browser/api/common.ts","webpack:///./src/electron_browser/api/danmaku.ts","webpack:///./src/electron_browser/api/stream.ts","webpack:///./src/electron_browser/api/statistic.ts","webpack:///./src/electron_browser/api/wsbus.ts","webpack:///./src/electron_browser/api/index.ts","webpack:///./src/electron_browser/components/superChat/utils/getter.ts","webpack:///./src/electron_browser/store/getters.ts","webpack:///./src/electron_browser/store/mutations.ts","webpack:///./src/electron_browser/store/danmaku/danmaku.ts","webpack:///./src/electron_browser/store/actions.ts","webpack:///./src/electron_browser/store/index.ts","webpack:///./src/electron_browser/components/base/sidebars/sidebarBase.vue?fb77","webpack:///./src/electron_browser/components/base/heros/base.vue","webpack:///./src/electron_browser/components/base/heros/base.vue?c4db","webpack:///./src/electron_browser/components/base/heros/base.vue?13d9","webpack:///./src/electron_browser/components/base/texts/titleScrolling.vue?6c4a","webpack:///./src/electron_browser/components/base/frames/titleFrame.vue?76cf","webpack:///./src/electron_browser/components/base sync \\w+\\.(vue)$","webpack:///./src/electron_browser/api/chat.ts","webpack:///./src/electron_browser/util_function/login.ts","webpack:///./src/electron_browser/components/danmakuFlow/utils/common.ts","webpack:///./src/electron_browser/components/danmakuFlow/utils/data.ts","webpack:///./src/electron_browser/util_function/type.ts","webpack:///./src/electron_browser/components/base/texts/iconCounter.vue?0eed","webpack:///./src/electron_browser/datas/room.ts","webpack:///./src/electron_browser/util_function/electron.ts","webpack:///./src/electron_browser/components/base/frames/rowSpan.vue","webpack:///./src/electron_browser/components/base/frames/rowSpan.vue?fb52","webpack:///./src/electron_browser/components/base/frames/rowSpan.vue?b4b0","webpack:///./src/electron_browser/router/webRouter.ts","webpack:///./src/electron_browser/router/index.ts","webpack:///./src/electron_browser/App.vue","webpack:///./src/electron_browser/App.vue?f1d7","webpack:///./src/electron_browser/App.vue?e46a","webpack:///./src/electron_browser/components/injector.ts","webpack:///./src/electron_browser/datas/common.ts","webpack:///./src/electron_browser/util_function/globalRegister.ts","webpack:///./src/electron_browser/main.ts","webpack:///./src/electron_browser/components/system/topbars/withAvatar.vue?525f","webpack:///./src/electron_browser/components/base/popver/popverHelp.vue","webpack:///./src/electron_browser/components/base/popver/popverHelp.vue?7677","webpack:///./src/electron_browser/components/base/footers/footerBase.vue?d8bd","webpack:///./src/electron_browser/components/base/frames/contentFrame.vue","webpack:///./src/electron_browser/components/base/frames/contentFrame.vue?226b","webpack:///./src/electron_browser/components/base/frames/contentFrame.vue?c4a0","webpack:///./src/electron_browser/components/base/imgInput/imgInpuClip.vue?4e67","webpack:///./src/electron_browser/layouts/main/index.vue?5783","webpack:///./src/electron_browser/components/base/imgInput/imgInputStatic.vue?d6cf","webpack:///./src/electron_browser/api/room.ts","webpack:///./src/electron_browser/components/base/frames/contentFrame.vue?bc90","webpack:///./src/electron_browser/util_function/eventBus.ts","webpack:///./src/electron_browser/api/user.ts","webpack:///./src/electron_browser/components/superChat/utils/data.ts","webpack:///./src/electron_browser/components/base/frames/rowFrame.vue","webpack:///./src/electron_browser/components/base/frames/rowFrame.vue?bd86","webpack:///./src/electron_browser/components/base/frames/rowFrame.vue?1b2c","webpack:///./src/electron_browser/texts/login.ts","webpack:///./src/electron_browser/texts/common.ts","webpack:///./src/electron_browser/texts/welcome.ts","webpack:///./src/electron_browser/texts/footer.ts","webpack:///./src/electron_browser/util_function/storeWorker/shared.worker.js","webpack:///./src/electron_browser/util_function/storeWorker/index.ts","webpack:///./src/electron_browser/api/robot.ts","webpack:///./src/electron_browser/components/base/list/base.vue","webpack:///./src/electron_browser/components/base/list/base.vue?e17e","webpack:///./src/electron_browser/components/base/list/base.vue?0558","webpack:///./src/electron_browser/datas/stream.ts","webpack:///./src/electron_browser/datas/user.ts","webpack:///./src/electron_browser/components/base/texts/iconCounter.vue","webpack:///./src/electron_browser/components/base/texts/iconCounter.vue?e9b7","webpack:///./src/electron_browser/components/base/texts/iconCounter.vue?a118","webpack:///./src/electron_browser/components/base/sidebars/sidebarBase.vue","webpack:///./src/electron_browser/components/base/sidebars/sidebarBase.vue?93c6","webpack:///./src/electron_browser/components/base/sidebars/sidebarBase.vue?0791","webpack:///./src/electron_browser/datas/temp.ts","webpack:///./src/electron_browser/components/base/imgInput/imgInpuText.vue","webpack:///./src/electron_browser/components/base/imgInput/imgInpuText.vue?2e00","webpack:///./src/electron_browser/components/base/imgInput/imgInpuText.vue?885f","webpack:///./src/electron_browser/components/danmakuFlow/utils/tester.ts","webpack:///./src/electron_browser/components/statusBar/index.vue?d537","webpack:///./src/electron_browser/api/utils/websocket.ts","webpack:///./src/electron_browser/components/base/heros/base.vue?6b4f","webpack:///./src/electron_browser/util_function/base.ts","webpack:///./src/electron_browser/util_function/file.ts","webpack:///./src/electron_browser/util_function/system.ts","webpack:///./src/electron_browser/components/base/imgInput/imgInputBase.vue","webpack:///./src/electron_browser/components/base/imgInput/imgInputBase.vue?f62b","webpack:///./src/electron_browser/components/base/imgInput/imgInputBase.vue?c343","webpack:///./src/electron_browser/datas/danmaku.ts","webpack:///./src/electron_browser/components/base/imgInput/imgInpuClip.vue","webpack:///./src/electron_browser/util_function/imgTool.ts","webpack:///./src/electron_browser/components/base/imgInput/imgInpuClip.vue?1203","webpack:///./src/electron_browser/components/base/imgInput/imgInpuClip.vue?2710","webpack:///./src/electron_browser/components/base/footers/footerBase.vue","webpack:///./src/electron_browser/components/base/footers/footerBase.vue?e20f","webpack:///./src/electron_browser/components/base/footers/footerBase.vue?57a7","webpack:///./src/electron_browser/components/base/frames/rowFrame.vue?9969","webpack:///./src/electron_browser/components/base/imgInput/imgInputStatic.vue","webpack:///./src/electron_browser/components/base/imgInput/imgInputStatic.vue?d1da","webpack:///./src/electron_browser/components/base/imgInput/imgInputStatic.vue?7e33","webpack:///./src/electron_browser/test/index.ts","webpack:///./src/electron_browser/router/clientRouter.ts","webpack:///./src/electron_browser/store/state.ts","webpack:///./src/electron_browser/components/base/frames/rowSpan.vue?f426","webpack:///./src/electron_browser/components/base/texts/titleScrolling.vue","webpack:///./src/electron_browser/components/base/texts/titleScrolling.vue?38cc","webpack:///./src/electron_browser/components/base/texts/titleScrolling.vue?a703","webpack:///./src/electron_browser/App.vue?f6bd","webpack:///./src/electron_browser/components/danmakuFlow/utils/getter.ts","webpack:///./src/electron_browser/layouts/main/index.vue","webpack:///./src/electron_browser/components/statusBar/index.vue","webpack:///./src/electron_browser/components/statusBar/index.vue?72e9","webpack:///./src/electron_browser/components/statusBar/index.vue?2cb8","webpack:///./src/electron_browser/components/system/topbars/withAvatar.vue","webpack:///./src/electron_browser/components/system/topbars/withAvatar.vue?0d9e","webpack:///./src/electron_browser/layouts/main/index.vue?265c","webpack:///./src/electron_browser/styles/index.scss?d70c","webpack:///./src/electron_browser/components/base/imgInput/imgInpuText.vue?57d7","webpack:///./src/electron_browser/components/base/imgInput/imgInputBase.vue?11ba"],"names":["class","appear","name","mode","key","title","props","render","__scopeId","catrgory","method","data","type","startDanmaku","onOpen","onDanmaku","onClose","ws","window","danmakuWS","onclose","close","start","then","res","judge","e","JSON","parse","includes","console","log","addEventListener","catch","err","error","Error","liverUID","userID","timeout","once","liveID","validate","session","encodec","streamName","getCurrentStastic","super","registered","id","this","reRegister","checkRegister","Promise","resolve","clientID","hideMsg","realData","message","sourceID","emit","event","register","eventName","targetID","promise","stringify","wsevent","allApi","room","user","getRule","value","rules","sort","a","b","triggerValue","ruleIndex","findIndex","rule","nextLevel","nextRule","scFromDanmaku","danmaku","ruleData","timestamp","Date","now","number","nickName","avatar","listEndTime","listDuration","content","panelEndTime","createTime","uid","scAdd","block","newValue","newNumber","Object","assign","scGiftHandler","store","getters","superChatEnable","superChatSetting","state","danmakuProfile","common","superChat","temp","superChatID","superChatBlock","exist","superChatArray","find","scBlock","push","scTextHandler","streamStatus","step","enable","webEnable","userSession","serviceToken","deviceID","output","roomCategorys","forEach","subCategory","categoryID","label","categoryName","children","subCategoryName","subCategoryID","values","danmakuList","danmakuSession","filterFlow","isElectron","toolBox","web","mutations","replaceState","sessionStorage","setItem","streamInfo","profile","userProfile","roomProfile","roomSetInfo","setProfile","getRank","rank","wsEmit","list","managerList","streamSession","streamEncodec","rawFlow","status","profileDetail","commit","roomStatus","liveDurationTimer","setInterval","liveDuration","getTime","Number","liveStartTime","clearInterval","giftTimer","statistic","styleType","style","settingOfType","setTimeout","settingType","setting","tempInfo","getManagerList","addManager","removeManager","kickOutPerson","blackList","i","filter","likeList","tempLike","length","requestList","like","isStreaming","allSettled","info","nickname","isLiving","Boolean","needMention","isLive","likeTemp","dangerouslyUseHTMLString","duration","offset","keyword","trim","replaceAll","keywords","minify","empty","danmakuText","danmakuLike","danmakuEnter","needMetion","current","enterTime","danmakuSubscribe","danmakuGift","danmakuRichText","danmakuJoinClub","signalBanana","signalAudience","watchingCount","danmakuHistory","filteredFlow","mock","settings","commonSettings","filterUpdate","map","warning","violationContent","danmakuHandler","1000","1001","1002","1003","1004","1005","1006","1007","2000","2001","2002","2003","2004","2005","2100","2101","2102","2103","3000","3001","3002","streamStatusTimer","danmakuTimer","actions","clearTimeout","dispatch","userData","reject","liveAuth","danmakuWs","getItem","String","countDown","filtered","hasCombined","robotSetting","shouldRead","Array","isArray","ignoreOwner","filters","emojiTester","handler","StreamInfo","streamStartInfo","async","subTitle","computed","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","keys","module","exports","waitList","sending","chat","text","realChat","finally","shift","logout","location","replace","host","restart","showCancelButton","confirmButtonText","cancelButtonText","restartConfirmed","clear","types","Filter","giftList","enterList","maxNum","clubLevel","indexOf","open","slice","count","hasBlackList","hasKeywordBlocked","needFreeze","isOwner","u","clubOnly","clubName","level","combineLike","l","combineCount","unshift","combineEnter","enter","combineGift","expire","gift","g","freeze","newDanmaku","OldDanmaku","result","filterMaxnium","reverse","menu","isManager","isBlackList","isLikeList","icon","show","disabled","typeOptions","giftTypeOptions","styleConfig","danmakuType","widgets","advHtml","advCss","toANY","obj","tostring","liveCover","panoramic","bizUnit","bizCustomData","liveType","category","hasFansClub","likeCount","onlineCount","portrait","paidShowUserBuyStatus","disableDanmakuShow","giftCount","diamondCount","bananaCount","watchCount","rankList","medalCount","hasMedal","userFriendshipDegree","userRank","process","span","default","path","meta","action","noElectron","component","routes","router","history","beforeEach","to","from","next","fullPath","$store","isLogined","Component","initGlobalComp","vm","requireComponent","fileName","componentConfig","dpiOptions","dpiOption","dpiHandler","dpi","devicePixelRatio","document","body","zoom","logger","lg","stack","version","reason","globalMethods","registerMethod","app","App","use","mount","$attrs","reference","align","getProfile","getGift","getGiftList","getDonate","getAudience","managerUID","getCutStatus","setCutStatus","canCut","toCut","kickedUID","Event","events","fn","off","splice","logined","login","account","password","tokenInfo","loginSession","setToken","print","requestT","superChatBlockSetting","theme","config","background","backgroundType","backgroundColor","backgroundImage","backgroundSize","backgroundPosition","backgroundDynamic","backgroundSizeType","backgroundOpacity","listStyle","font","fontSize","fontWeight","color","textShadowWidth","textShadowColor","panelStyle","themeID","showed","width","contentDefaultClass","flex","contentClass","disclaimer","welcomeLogo","welcomeText","unstreamable","welcome","blocks","footer","base","wrap","SharedWorker_fn","SharedWorker","__webpack_public_path__","_worker","changedDanmaku","addChangedDanmaku","getChangedDanmaku","openWorker","closeWorker","port","postMessage","registerHost","dataCallback","worker","onmessage","msg","attrs","states","Function","readObj","reading","read","rtype","api","speed","volume","comboReading","contentI","origin","realRead","reader","selected","index","emptytip","avaliable","connected","underway","streamPullAddress","streamPushAddress","interval","rtmpServer","streamKey","url","bitrate","qualityType","qualityName","streamUrl","resolution","frameRate","template","signature","verifiedText","followingCount","fansCount","contributeCount","avatarFrame","securityKey","cookies","num","increaseAni","decreaseAni","watch","n","ani","methods","contents","item","row","$route","route","hidden","$router","emojiMatcher","fit","modelValue","getBaseName","getFile","size","basename","file","$emit","hasTime","hasAvatar","hasNickName","hasContent","hasGift","userInfo","isNormalDanmaku","sameGift","danmakuA","danmakuB","giftDetail","giftID","samePerson","basicComponentTester","isOnline","timer","getWs","onopen","getUrl","hostname","setHeartBeat","readyState","send","role","WebSocket","ignoreSendList","ignoreReceiveList","errorList","ignoreInProduction","request","undefined","requestID","removeEventListener","randomId","Num","Math","floor","random","removePunctuation","str","removePunctuationSpace","escapeRegExp","string","split","sleep","time","dist","src","isUrl","test","registerRole","win","load","filetype","fileEle","createElement","accept","click","onfocus","onchange","files","remove","loadAsText","fileType","FileReader","onload","readAsText","require","remote","ipcRenderer","getCurrentWindow","minimize","startApplet","appletConfig","cname","configurations","setTop","isTop","setIgnoreMouseEvent","ignore","setResizeable","isResizeable","launch","copy","srcUrl","distUrl","args","uploadImage","imageUrl","uploadBase64Image","b64","saveConfig","loadConfig","restoreConfig","backupConfig","removeCache","getCacheSize","openCache","saveSuperChat","loadSuperChat","getFontList","uploadFont","fontUrl","sendChat","windowsRead","xfRead","audio","Audio","onerror","onended","play","robots","kdxf","showTips","loadFile","tips","ref","img","editable","blob","preventDefault","buttons","$el","querySelector","File","dataTransfer","items","kind","getAsFile","srcElement","readAsDataURL","onloadend","visitor","hightLight","boss","manager","concerned","animation","webSettings","robotRule","1008","apiSecret","appID","apiKey","voiceName","clientSettings","showNextLevel","displayType","emotion","emotionMax","emojis","generalSettings","streamToolPath","general","lazy","custom-class","clipDialog","editImg","crop","aspect-ratio","alt","BlobtoB64","components","VueCropper","edit","cropImg","$refs","cropper","getCroppedCanvas","toDataURL","redirect","stateFunc","serverOnline","isReconnect","applets","observer","observerTimer","titleMove","mounted","addObserver","immediate","disconnect","parent","child","firstChild","getMove","move","offsetWidth","ResizeObserver","observe","getDanmuInfo","danmuInfo","getUserInfo","fansInfo","joinTime","sendTime","setTime","getMedal","medal","getMedalLevel","getMedalName","getAvatar","getNickName","getUID","getContent","display","getDanmakuType","getGiftName","giftName","getGiftCombo","combo","getGiftNumber","getGiftValue","payWalletType","getRichText","segments","segment","join","robotGetters","getterOptions","getContentWithEmoji","matcher","tester","generateTester","matchAll","match","max","replacement","scale","testerArr","emoji","regex","pattern","RegExp","isUnfold","element-loading-background","unfold","currentComp","mainPanel","shrink","clients","registerEvents","unregisterEvents","on","handleStatusChange","setWSClient","sendApi","dispatchWSClient","registerWS","client","apis","visitorId","liveId","placement","dropdown","streaming","direction","HandlerMoving","HandlerWindow","statusBar","topbarAvatar"],"mappings":"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","file":"js/chunk-common.78005814.js","sourcesContent":["<template>\r\n\t<div class=\"contentTitle\">\r\n\t\t<transition appear name=\"fade\" mode=\"out-in\">\r\n\t\t\t<span :key=\"title\">{{title}}</span>\r\n\t\t</transition>\r\n\t</div>\r\n\t<div class=\"contentInner\">\r\n\t\t<slot />\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: \"titleFrame\",\r\n\tprops: [\"title\"]\r\n};\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n.contentTitle {\r\n\tposition: relative;\r\n\twidth: fit-content;\r\n\tmargin: 17px 50px 22px 50px;\r\n\tpadding-bottom: 8px;\r\n\tfont-size: $--font-size-medium;\r\n\tline-height: calc(#{$--font-size-medium} + 10px);\r\n\tcolor: $--color-primary !important;\r\n\tborder-bottom: 2px solid $--color-primary;\r\n\tuser-select: none;\r\n\tz-index: 1;\r\n}\r\n.contentInner {\r\n\tposition: relative;\r\n\twidth: calc(100% - 100px);\r\n\theight: calc(100% - 75px);\r\n\tmargin: 0px 50px;\r\n}\r\n</style>\r\n","import { render } from \"./titleFrame.vue?vue&type=template&id=6318c346&scoped=true\"\nimport script from \"./titleFrame.vue?vue&type=script&lang=js\"\nexport * from \"./titleFrame.vue?vue&type=script&lang=js\"\n\nimport \"./titleFrame.vue?vue&type=style&index=0&id=6318c346&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-6318c346\"\n\nexport default script","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./base.vue?vue&type=style&index=0&id=648f4714&scoped=true&lang=scss\"","import { requestT } from \"@front/api/user\";\r\n\r\nexport const catrgory = (): Promise<any> => {\r\n\t// 获取直播分区\r\n\treturn requestT({\r\n\t\tmethod: \"getCategory\",\r\n\t\tdata: {\r\n\t\t\ttype: 901\r\n\t\t}\r\n\t});\r\n};\r\n","import { requestT, session } from \"@front/api/user\";\r\nimport { setHeartBeat } from \"@front/api/utils/websocket\";\r\nimport { user } from \"@front/datas\";\r\nexport const startDanmaku = ({ onOpen, onDanmaku, onClose }: any): any => {\r\n\t//@ts-ignore\r\n\tconst ws: any = window?.danmakuWS;\r\n\tif (ws) {\r\n\t\tws.onclose = null;\r\n\t\tws.close();\r\n\t}\r\n\t// 开始弹幕流获取\r\n\treturn start(session)\r\n\t\t.then(res => {\r\n\t\t\tconst { ws }: any = res;\r\n\t\t\t(window as any).danmakuWS = ws;\r\n\t\t\tsetHeartBeat(ws);\r\n\t\t\tconst judge = (e: any) => {\r\n\t\t\t\tconst data = JSON.parse(e.data);\r\n\t\t\t\tws.onclose = onClose;\r\n\t\t\t\tif ([2999, 101, 2000].includes(data.type)) {\r\n\t\t\t\t\tconsole.log(\"danmaku flow end!\");\r\n\t\t\t\t\tws.close();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (data.type >= 1000) {\r\n\t\t\t\t\tif (onDanmaku) onDanmaku(data);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tws.addEventListener(\"message\", judge);\r\n\t\t\tif (onOpen) onOpen(res);\r\n\t\t})\r\n\t\t.catch(err => {\r\n\t\t\tconsole.error(err);\r\n\t\t\tif (onClose) onClose();\r\n\t\t\tthrow new Error(err);\r\n\t\t});\r\n};\r\n\r\nexport const start = (data: user.Session): Promise<any> => {\r\n\t// 开始弹幕获取\r\n\treturn requestT({\r\n\t\tmethod: \"startDanmakuFlow\",\r\n\t\tdata: {\r\n\t\t\ttype: 100,\r\n\t\t\tdata: {\r\n\t\t\t\tliverUID: data.userID\r\n\t\t\t}\r\n\t\t},\r\n\t\ttimeout: 60000,\r\n\t\tonce: false\r\n\t});\r\n};\r\n","import { requestT } from \"@front/api/user\";\r\n\r\nexport const start = (data: any): Promise<any> => {\r\n\t// 获取用户直播信息\r\n\treturn requestT({\r\n\t\tmethod: \"openStream\",\r\n\t\tdata: {\r\n\t\t\ttype: 905,\r\n\t\t\tdata\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const close = (liveID: string): Promise<any> => {\r\n\t// 获取用户直播信息\r\n\treturn requestT({\r\n\t\tmethod: \"closeStream\",\r\n\t\tdata: {\r\n\t\t\ttype: 906,\r\n\t\t\tdata: {\r\n\t\t\t\tliveID\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const validate = (): Promise<any> => {\r\n\treturn requestT({\r\n\t\tmethod: \"checkStreamable\",\r\n\t\tdata: {\r\n\t\t\ttype: 900\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const session = (): Promise<any> => {\r\n\t// 获取推流设置\r\n\treturn requestT({\r\n\t\tmethod: \"getStreamSession\",\r\n\t\tdata: {\r\n\t\t\ttype: 902\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const encodec = (streamName: string): Promise<any> => {\r\n\t// 获取转码信息\r\n\treturn requestT({\r\n\t\tmethod: \"getStreamEncodec\",\r\n\t\tdata: {\r\n\t\t\ttype: 904,\r\n\t\t\tdata: {\r\n\t\t\t\tstreamName\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n","import { requestT } from \"@front/api/user\";\r\n\r\nexport const getCurrentStastic = ({ liveID }: any): Promise<any> => {\r\n\t// 获取直播分区\r\n\treturn requestT({\r\n\t\tmethod: \"getCurrentStastic\",\r\n\t\tdata: {\r\n\t\t\ttype: 104,\r\n\t\t\tdata: {\r\n\t\t\t\tliveID\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n","import { request, getWs, setHeartBeat } from \"@front/api/utils/websocket\";\r\nimport { Event, event as sysEvent } from \"@front/util_function/eventBus\";\r\n\r\nclass WsEvent extends Event {\r\n\tregistered = false;\r\n\tws: WebSocket | null = null;\r\n\tid = \"\";\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.id = \"\";\r\n\t}\r\n\r\n\tregister(id: string) {\r\n\t\tthis.id = id;\r\n\t\tif (!this.ws) {\r\n\t\t\tthis.ws = getWs();\r\n\t\t\tsetHeartBeat(this.ws);\r\n\t\t\tthis.ws.onclose = () => {\r\n\t\t\t\tthis.ws = null;\r\n\t\t\t\tthis.reRegister();\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (!this.checkRegister()) {\r\n\t\t\treturn request({\r\n\t\t\t\tmethod: \"register\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\ttype: 3,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tclientID: id\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\thideMsg: true,\r\n\t\t\t\tonce: false,\r\n\t\t\t\tws: this.ws\r\n\t\t\t}).then(() => {\r\n\t\t\t\tthis.ws?.addEventListener(\"message\", (e: any) => {\r\n\t\t\t\t\tconst data = JSON.parse(e.data);\r\n\t\t\t\t\tif (data.type === 5) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tif (data.error) {\r\n\t\t\t\t\t\t\t\tthrow new Error(data.error);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconst realData = JSON.parse(data.data.message);\r\n\t\t\t\t\t\t\tif (realData.sourceID !== this.id) {\r\n\t\t\t\t\t\t\t\tthis.emit(realData.event, realData.data);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.ws?.addEventListener(\"close\", (e: any) => {\r\n\t\t\t\t\tthis.registered = false;\r\n\t\t\t\t});\r\n\t\t\t\tthis.registered = true;\r\n\t\t\t\tthis.id = id;\r\n\t\t\t\tthis.emit(\"registered\");\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn Promise.resolve();\r\n\t}\r\n\r\n\treRegister() {\r\n\t\tif (this.id) {\r\n\t\t\treturn this.register(this.id);\r\n\t\t} else {\r\n\t\t\tconsole.log(\"not registered yet!\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tcheckRegister() {\r\n\t\tif (!this.registered) console.log(\"unregistered yet!\");\r\n\t\treturn this.registered;\r\n\t}\r\n\r\n\twsEmit(eventName: any, data: any = {}, targetID = \"\") {\r\n\t\tconst promise = () => {\r\n\t\t\treturn request({\r\n\t\t\t\tmethod: \"message-broadcast\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\ttype: 4,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tclientID: targetID,\r\n\t\t\t\t\t\tmessage: JSON.stringify({\r\n\t\t\t\t\t\t\tsourceID: this.id,\r\n\t\t\t\t\t\t\tevent: eventName,\r\n\t\t\t\t\t\t\tdata\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\tif (this.checkRegister()) {\r\n\t\t\treturn promise();\r\n\t\t}\r\n\t\t//  else {\r\n\t\t// \tthis.once(\"registered\", promise);\r\n\t\t// \treturn true;\r\n\t\t// }\r\n\t}\r\n}\r\n\r\nexport const wsevent = new WsEvent();\r\n","import * as common from \"./common\";\r\nimport * as danmaku from \"./danmaku\";\r\nimport * as room from \"./room\";\r\n// export * as server from \"./server\";\r\nimport * as stream from \"./stream\";\r\nimport * as user from \"./user\";\r\nimport * as statistic from \"./statistic\";\r\nexport { wsevent } from \"./wsbus\";\r\n\r\nconst allApi = {\r\n\t...common,\r\n\t...danmaku,\r\n\t...room,\r\n\t...stream,\r\n\t...user,\r\n\t...statistic\r\n};\r\nexport { common, danmaku, room, stream, user, statistic, allApi };\r\n","import {\r\n\tgetGiftValue,\r\n\tgetNickName,\r\n\tgetAvatar,\r\n\tgetUID,\r\n\tgetGiftNumber,\r\n\tgetContent\r\n} from \"@front/components/danmakuFlow/utils/getter\";\r\nimport {\r\n\tsuperChatBlock,\r\n\tSuperChatBlock as SCB,\r\n\tSuperChatBlockSetting as SCBS\r\n} from \"./data\";\r\nimport { event } from \"@front/util_function/eventBus\";\r\nexport const getRule = (value: number, rules: Array<SCBS>) => {\r\n\trules.sort((a: any, b: any) => {\r\n\t\treturn b.triggerValue - a.triggerValue;\r\n\t});\r\n\tconst ruleIndex = rules.findIndex(\r\n\t\trule => value / 1000 >= rule.triggerValue\r\n\t);\r\n\tlet nextLevel = 0;\r\n\tif (ruleIndex) {\r\n\t\tconst nextRule = rules[ruleIndex - 1];\r\n\t\tif (nextRule) {\r\n\t\t\tnextLevel = nextRule.triggerValue * 1000 - value;\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\trule: rules[ruleIndex],\r\n\t\tnextLevel\r\n\t};\r\n};\r\n\r\nexport const scFromDanmaku = (danmaku: any, ruleData: any): SCB => {\r\n\tconst timestamp = Date.now();\r\n\tconst { rule, nextLevel } = ruleData;\r\n\treturn {\r\n\t\t...superChatBlock(),\r\n\t\t...rule,\r\n\t\tvalue: getGiftValue(danmaku),\r\n\t\tnumber: getGiftNumber(danmaku),\r\n\t\tnickName: getNickName(danmaku),\r\n\t\tavatar: getAvatar(danmaku),\r\n\t\tlistEndTime: timestamp + rule.listDuration,\r\n\t\tcontent: \"\",\r\n\t\tpanelEndTime: 0,\r\n\t\tcreateTime: timestamp,\r\n\t\tnextLevel,\r\n\t\tuid: getUID(danmaku)\r\n\t};\r\n};\r\n\r\nexport const scAdd = (block: SCB, danmaku: any, rules: Array<SCBS>) => {\r\n\tconst newValue = getGiftValue(danmaku) + block.value;\r\n\tconst newNumber = getGiftNumber(danmaku) + block.number;\r\n\tconst { rule, nextLevel } = getRule(newValue, rules);\r\n\tif (rule && rule.triggerValue > block.triggerValue) {\r\n\t\tblock.listEndTime = block.createTime + rule.listDuration;\r\n\t}\r\n\tblock.value = newValue;\r\n\tblock.number = newNumber;\r\n\tblock.nextLevel = nextLevel;\r\n\tblock.panelEndTime += 10000;\r\n\tObject.assign(block, rule);\r\n\treturn block;\r\n};\r\n\r\nexport const scGiftHandler = (danmaku: any, store: any) => {\r\n\tif (!store.getters.superChatEnable) {\r\n\t\treturn;\r\n\t}\r\n\tconst superChatSetting = store.state.danmakuProfile.common.superChat;\r\n\tconst temp = store.state.temp;\r\n\tconst { rule, nextLevel } = getRule(\r\n\t\tgetGiftValue(danmaku),\r\n\t\tsuperChatSetting.rules\r\n\t);\r\n\tif (!rule) {\r\n\t\treturn;\r\n\t}\r\n\tif (getUID(danmaku) === temp.superChatID) {\r\n\t\ttemp.superChatBlock = scAdd(\r\n\t\t\ttemp.superChatBlock,\r\n\t\t\tdanmaku,\r\n\t\t\tsuperChatSetting.rules\r\n\t\t);\r\n\t\treturn;\r\n\t}\r\n\tconst exist = temp.superChatArray.find(\r\n\t\t(scBlock: SCB) => scBlock.uid === getUID(danmaku)\r\n\t);\r\n\tif (!exist) {\r\n\t\ttemp.superChatArray.push(scFromDanmaku(danmaku, { rule, nextLevel }));\r\n\t} else {\r\n\t\tscAdd(exist, danmaku, superChatSetting.rules);\r\n\t\ttemp.superChatArray = [...temp.superChatArray];\r\n\t}\r\n\tevent.emit(\"super-chat-updated\");\r\n};\r\n\r\nexport const scTextHandler = (danmaku: any, store: any) => {\r\n\tconst temp = store.state.temp;\r\n\tconst block = temp.superChatArray.find(\r\n\t\t(b: any) => b.uid === getUID(danmaku)\r\n\t);\r\n\tif (block) {\r\n\t\tblock.content = getContent(danmaku);\r\n\t\tblock.panelEndTime += 10000;\r\n\t}\r\n};\r\n","import { RootState, state } from \"./state\";\r\nimport { tostring } from \"@front/util_function/type\";\r\nimport { isElectron } from \"@front/util_function/electron\";\r\nexport const getters = {\r\n\tisStreaming(state: RootState) {\r\n\t\treturn (\r\n\t\t\tstate.streamStatus.step === \"streaming\" ||\r\n\t\t\tstate.streamStatus.step === \"danmakuing\"\r\n\t\t);\r\n\t},\r\n\tsuperChatEnable(state: RootState) {\r\n\t\tif (isElectron()) {\r\n\t\t\treturn state.danmakuProfile?.common?.superChat?.enable;\r\n\t\t}\r\n\t\treturn state.danmakuProfile?.common?.superChat?.webEnable;\r\n\t},\r\n\tstreamable(state: RootState) {\r\n\t\treturn state.streamStatus.step !== \"nostreamable\";\r\n\t},\r\n\tisLogined(state: RootState) {\r\n\t\treturn state.userSession.serviceToken && state.userSession.deviceID;\r\n\t},\r\n\tcategoryCascade(state: RootState) {\r\n\t\tconst output: any = {};\r\n\t\tstate.roomCategorys.forEach((subCategory: any) => {\r\n\t\t\tif (!output[subCategory.categoryID]) {\r\n\t\t\t\toutput[subCategory.categoryID] = {\r\n\t\t\t\t\tlabel: subCategory.categoryName,\r\n\t\t\t\t\tvalue: subCategory.categoryID,\r\n\t\t\t\t\tchildren: []\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\toutput[subCategory.categoryID].children.push({\r\n\t\t\t\tlabel: subCategory.subCategoryName,\r\n\t\t\t\tvalue: subCategory.subCategoryID\r\n\t\t\t});\r\n\t\t});\r\n\t\treturn Object.values(output);\r\n\t},\r\n\tdanmakuList: (state: RootState) => {\r\n\t\treturn state.danmakuSession.filterFlow;\r\n\t},\r\n\tdanmakuProfile: (state: RootState) => (type: any) => {\r\n\t\tif (type) {\r\n\t\t\t// @ts-ignore\r\n\t\t\treturn state.danmakuProfile[tostring(type)];\r\n\t\t} else if (state.isElectron) {\r\n\t\t\treturn state.danmakuProfile.toolBox;\r\n\t\t} else {\r\n\t\t\treturn state.danmakuProfile.web;\r\n\t\t}\r\n\t}\r\n};\r\n","import { RootState, stateFunc } from \"./state\";\r\nimport store from \"./index\";\r\nimport { event } from \"@front/util_function/eventBus\";\r\nimport { stream as streamData, temp, room as roomData } from \"@front/datas\";\r\nimport {\r\n\troom,\r\n\tstream,\r\n\tcommon,\r\n\twsevent,\r\n\tstatistic,\r\n\tuser,\r\n\tdanmaku\r\n} from \"@front/api\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport { saveConfig } from \"@front/util_function/system\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { isElectron } from \"../util_function/electron\";\r\nexport const mutations: any = {\r\n\treset() {\r\n\t\tstore.replaceState(stateFunc());\r\n\t\tstore.state.streamStatus.step = \"online\";\r\n\t\tsessionStorage.setItem(\"preStep\", \"online\");\r\n\t},\r\n\tgetRoomProfile(state: RootState) {\r\n\t\tuser.streamInfo(state.userSession).then(res => {\r\n\t\t\tif (!res) {\r\n\t\t\t\tthrow new Error(\"no streamInfo\");\r\n\t\t\t}\r\n\t\t\tif (res.profile) {\r\n\t\t\t\tObject.assign(state.userProfile, res.profile);\r\n\t\t\t\tdelete res.profile;\r\n\t\t\t\tif (res.liveID) {\r\n\t\t\t\t\tObject.assign(state.roomProfile, res);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tsetRoomProfile(state: RootState, roomSetInfo: any) {\r\n\t\troom.setProfile(roomSetInfo).then(() => {\r\n\t\t\tevent.emit(\"roomProfileChanged\");\r\n\t\t});\r\n\t},\r\n\r\n\tgetRank(state: RootState) {\r\n\t\troom.getRank(state.userSession).then(res => {\r\n\t\t\tObject.assign(state.rank, res);\r\n\t\t\tevent.emit(\"rank-updated\");\r\n\t\t\twsevent.wsEmit(\r\n\t\t\t\t\"update-manager\",\r\n\t\t\t\t{ list: state.managerList },\r\n\t\t\t\t\"client\"\r\n\t\t\t);\r\n\t\t});\r\n\t},\r\n\r\n\tgetCategory(state: RootState) {\r\n\t\tcommon\r\n\t\t\t.catrgory()\r\n\t\t\t.then(res => {\r\n\t\t\t\tstate.roomCategorys = res || [];\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tstate.roomCategorys = [];\r\n\t\t\t});\r\n\t},\r\n\r\n\tgetStreamSession(state: RootState) {\r\n\t\tstream\r\n\t\t\t.session()\r\n\t\t\t.then(res => {\r\n\t\t\t\tstate.streamSession = res || streamData.session();\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tstate.streamSession = streamData.session();\r\n\t\t\t});\r\n\t},\r\n\r\n\tgetStreamEncodec(state: RootState) {\r\n\t\tconst streamName =\r\n\t\t\tstate.roomProfile.streamName || state.streamSession.streamName;\r\n\t\tif (!streamName) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tstream\r\n\t\t\t.encodec(streamName)\r\n\t\t\t.then(res => {\r\n\t\t\t\tstate.streamEncodec = res[0] || streamData.encodec();\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tstate.streamEncodec = streamData.encodec();\r\n\t\t\t});\r\n\t},\r\n\r\n\tresetStreamStatus(state: RootState) {\r\n\t\tstate.danmakuSession.rawFlow = [];\r\n\t\tstate.danmakuSession.filterFlow = [];\r\n\t\tstate.streamStatus = streamData.status();\r\n\t\tstate.streamEncodec = streamData.encodec();\r\n\t\tstate.streamSession = streamData.session();\r\n\t\tstate.roomProfile = roomData.profileDetail();\r\n\t\tstore.commit(\"stopLiveDurationTimer\");\r\n\t\tstore.commit(\"stopGiftTimer\");\r\n\t\tsessionStorage.setItem(\"preStep\", \"\");\r\n\t\tif (isElectron()) {\r\n\t\t\tstore.commit(\"getStreamSession\");\r\n\t\t}\r\n\t},\r\n\tstartLiveDurationTimer(state: RootState) {\r\n\t\tstore.commit(\"stopLiveDurationTimer\");\r\n\t\tstate.roomStatus.liveDurationTimer = setInterval(() => {\r\n\t\t\tstate.roomStatus.liveDuration =\r\n\t\t\t\tnew Date().getTime() - Number(state.roomProfile.liveStartTime);\r\n\t\t}, 1000);\r\n\t},\r\n\tstopLiveDurationTimer(state: RootState) {\r\n\t\tclearInterval(state.roomStatus.liveDurationTimer);\r\n\t},\r\n\tstartGiftTimer(state: RootState) {\r\n\t\tstore.commit(\"stopGiftTimer\");\r\n\t\tstate.roomStatus.giftTimer = setInterval(() => {\r\n\t\t\tstore.commit(\"giftCount\");\r\n\t\t}, 10000);\r\n\t},\r\n\tstopGiftTimer(state: RootState) {\r\n\t\tstore.commit(\"giftCount\");\r\n\t\tclearInterval(state.roomStatus.giftTimer);\r\n\t},\r\n\tgiftCount(state: RootState) {\r\n\t\tconst { liveID } = state.roomProfile;\r\n\t\tif (!liveID) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tstatistic.getCurrentStastic({ liveID }).then((res: any) => {\r\n\t\t\tObject.assign(state.roomStatus.statistic, res);\r\n\t\t});\r\n\t},\r\n\tupdateStyle(state: RootState, { styleType, style }: any) {\r\n\t\tif (styleType && style) {\r\n\t\t\t// @ts-ignore\r\n\t\t\tstate.danmakuProfile[styleType].settingOfType = cloneDeep(style);\r\n\t\t}\r\n\t\tsaveConfig(state.danmakuProfile);\r\n\t\tsetTimeout(() => {\r\n\t\t\twsevent.wsEmit(\"update-style\", {}, \"\");\r\n\t\t}, 500);\r\n\t},\r\n\tupdateSettings(state: RootState, { settingType, setting }: any) {\r\n\t\tif (settingType && setting) {\r\n\t\t\t// @ts-ignore\r\n\t\t\tstate.danmakuProfile[settingType] = cloneDeep(setting);\r\n\t\t}\r\n\t\tstate.temp = temp.tempInfo();\r\n\t\tsaveConfig(state.danmakuProfile);\r\n\t},\r\n\tgetManagerList(state: RootState) {\r\n\t\troom.getManagerList().then((res: any) => {\r\n\t\t\tif (res) state.managerList = res;\r\n\t\t});\r\n\t},\r\n\taddManager(state: RootState, uid: number) {\r\n\t\troom.addManager(uid).then(() => store.commit(\"getManagerList\"));\r\n\t},\r\n\tremoveManager(state: RootState, uid: number) {\r\n\t\troom.removeManager(uid).then(() => store.commit(\"getManagerList\"));\r\n\t},\r\n\tkickOut(state: RootState, uid: number) {\r\n\t\troom.kickOutPerson({\r\n\t\t\tuserID: uid,\r\n\t\t\tliveID: state.roomProfile.liveID\r\n\t\t});\r\n\t},\r\n\taddBlackList(state: RootState, userProfile: any) {\r\n\t\tconst common = state.danmakuProfile.common;\r\n\t\tif (common.blackList.find(i => i.userID === userProfile.userID)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcommon.blackList = [userProfile, ...common.blackList];\r\n\t\tstore.commit(\"kickOut\", userProfile.userID);\r\n\t\tstore.commit(\"updateSettings\", {});\r\n\t},\r\n\tremoveBlackList(state: RootState, userProfile: any) {\r\n\t\tconst common = state.danmakuProfile.common;\r\n\r\n\t\tcommon.blackList = common.blackList.filter(\r\n\t\t\ti => i.userID !== userProfile.userID\r\n\t\t);\r\n\t\tstore.commit(\"updateSettings\", {});\r\n\t},\r\n\taddLikeList(state: RootState, userProfile: any) {\r\n\t\tconst common = state.danmakuProfile.common;\r\n\t\tif (!common.likeList) common.likeList = [];\r\n\t\tif (common.likeList.find(i => i.userID === userProfile.userID)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcommon.likeList = [userProfile, ...common.likeList];\r\n\t\tstore.commit(\"updateSettings\", {});\r\n\t},\r\n\tremoveLikeList(state: RootState, userProfile: any) {\r\n\t\tconst common = state.danmakuProfile.common;\r\n\t\tif (!common.likeList) return;\r\n\t\tcommon.likeList = common.likeList.filter(\r\n\t\t\ti => i.userID !== userProfile.userID\r\n\t\t);\r\n\t\tstore.commit(\"updateSettings\", {});\r\n\t},\r\n\tcheckLikeStreaming(state: RootState) {\r\n\t\tconst tempLike = state.temp.likeList;\r\n\t\tconst likeList = state.danmakuProfile.common.likeList;\r\n\t\tif (!likeList || !likeList.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst requestList: any = [];\r\n\t\tlikeList.forEach((like: any) => {\r\n\t\t\trequestList.push(\r\n\t\t\t\tuser.isStreaming({\r\n\t\t\t\t\tuserID: like.userID\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t});\r\n\t\tPromise.allSettled(requestList).then((res: any) => {\r\n\t\t\tres.forEach((info: any) => {\r\n\t\t\t\tinfo = info.value;\r\n\t\t\t\tif (!info.userID) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst id = info.userID;\r\n\t\t\t\t\tconst nickname = info.nickname;\r\n\t\t\t\t\tconst isLiving = Boolean(info.liveID);\r\n\t\t\t\t\tlet needMention = false;\r\n\t\t\t\t\tif (tempLike[id]) {\r\n\t\t\t\t\t\tneedMention = tempLike[id].isLive !== isLiving;\r\n\t\t\t\t\t\ttempLike[id].isLive = isLiving;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tneedMention = isLiving;\r\n\t\t\t\t\t\ttempLike[id] = {\r\n\t\t\t\t\t\t\t...temp.likeTemp(),\r\n\t\t\t\t\t\t\tisLive: isLiving\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (needMention) {\r\n\t\t\t\t\t\tElMessage({\r\n\t\t\t\t\t\t\tmessage: isLiving\r\n\t\t\t\t\t\t\t\t? `恁关注的${nickname} 开播啦，<a href=\"https://live.acfun.cn/live/${id}\" target='_blank'>点此查看</a>`\r\n\t\t\t\t\t\t\t\t: `${nickname} 下播啦！`,\r\n\t\t\t\t\t\t\tdangerouslyUseHTMLString: true,\r\n\t\t\t\t\t\t\tduration: 5000,\r\n\t\t\t\t\t\t\toffset: 160,\r\n\t\t\t\t\t\t\ttype: \"success\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {}\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\taddKeyword(state: RootState, keyword: string) {\r\n\t\tif (!(keyword = keyword.trim())) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst common = state.danmakuProfile.common;\r\n\t\tkeyword =\r\n\t\t\tkeyword.replaceAll(/[!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~]/g, \"\") ||\r\n\t\t\tkeyword;\r\n\t\tif (common.keywords.find(key => key === keyword)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcommon.keywords = [keyword, ...common.keywords];\r\n\t\tstore.commit(\"updateSettings\", {});\r\n\t},\r\n\tremoveKeyword(state: RootState, keyword: string) {\r\n\t\tconst common = state.danmakuProfile.common;\r\n\t\tcommon.keywords = common.keywords.filter(i => i !== keyword);\r\n\t\tstore.commit(\"updateSettings\", {});\r\n\t},\r\n\tminify(state: RootState) {\r\n\t\tevent.emit(\"routeChange\", {\r\n\t\t\tname: \"statusPanel\"\r\n\t\t});\r\n\t\tstate.minify = state.minify ? false : store.getters.isStreaming;\r\n\t\tevent.emit(\"minify\", state.minify);\r\n\t}\r\n};\r\n","import { Store } from \"vuex\";\r\nimport { isElectron } from \"@front/util_function/electron\";\r\nimport { danmaku as danmakuData } from \"@front/datas\";\r\nimport { likeTemp } from \"@front/datas/temp\";\r\nimport { ElMessageBox, ElMessage } from \"element-plus\";\r\nimport {\r\n\tscGiftHandler,\r\n\tscTextHandler\r\n} from \"@front/components/superChat/utils/getter\";\r\nimport {\r\n\tgetUID,\r\n\tgetNickName\r\n} from \"@front/components/danmakuFlow/utils/getter\";\r\nconst empty = (data: any): number => {\r\n\treturn data;\r\n};\r\n\r\nexport const danmakuText = (e: any, store: Store<any>) => {\r\n\tif (store.getters.superChatEnable) {\r\n\t\tscTextHandler(e, store);\r\n\t}\r\n};\r\n\r\nexport const danmakuLike = empty;\r\nexport const danmakuEnter = (e: any, store: Store<any>) => {\r\n\tif (isElectron()) {\r\n\t\tconst likeList = store.state.danmakuProfile.common.likeList || [];\r\n\t\tconst tempLike = store.state.temp.likeList;\r\n\t\tconst id = getUID(e);\r\n\t\tlet needMetion = false;\r\n\t\tif (likeList.find((i: any) => i.userID === id)) {\r\n\t\t\tconst current = Date.now();\r\n\t\t\tif (tempLike[id]) {\r\n\t\t\t\tif (current - tempLike[id].enterTime > 600000) {\r\n\t\t\t\t\tneedMetion = true;\r\n\t\t\t\t}\r\n\t\t\t\ttempLike[id].enterTime = current;\r\n\t\t\t} else {\r\n\t\t\t\tneedMetion = true;\r\n\t\t\t\ttempLike[id] = {\r\n\t\t\t\t\t...likeTemp(),\r\n\t\t\t\t\tuserID: id,\r\n\t\t\t\t\tenterTime: current\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (needMetion) {\r\n\t\t\tElMessage({\r\n\t\t\t\tmessage: `${getNickName(e)}来直播间看你拉！`,\r\n\t\t\t\tduration: 5000,\r\n\t\t\t\toffset: 160,\r\n\t\t\t\ttype: \"success\"\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\nexport const danmakuSubscribe = empty;\r\nexport const danmakuGift = (e: any, store: Store<any>) => {\r\n\tif (store.getters.superChatEnable) {\r\n\t\tscGiftHandler(e, store);\r\n\t}\r\n};\r\nexport const danmakuRichText = empty;\r\nexport const danmakuJoinClub = empty;\r\nexport const signalBanana = (e: any, store: Store<any>) => {\r\n\t// store.state.roomStatus.bananaCount = e.data.bananaCount;\r\n};\r\nexport const signalAudience = (e: any, store: Store<any>) => {\r\n\tstore.state.roomStatus.watchingCount = e.data.watchingCount;\r\n\t// store.state.roomStatus.likeCount = e.data.likeCount;\r\n};\r\nexport const danmakuHistory = (e: any, store: Store<any>) => {\r\n\tconst filteredFlow = store.state.danmakuSession.filterFlow;\r\n\tif (filteredFlow.length && !filteredFlow[0].mock) {\r\n\t\treturn;\r\n\t}\r\n\tconst state = store.state;\r\n\tconst settings: any = isElectron()\r\n\t\t? state.danmakuProfile.toolBox\r\n\t\t: state.danmakuProfile.web;\r\n\tconst commonSettings =\r\n\t\tstate.danmakuProfile.common || danmakuData.commonSettings();\r\n\tconst rank = state.rank;\r\n\tconst { list } = store.state.filter.filterUpdate(\r\n\t\te.data.map((danmaku: any) => {\r\n\t\t\treturn {\r\n\t\t\t\ttype: 1000,\r\n\t\t\t\tdata: danmaku\r\n\t\t\t};\r\n\t\t}),\r\n\t\tstate.danmakuSession.filterFlow,\r\n\t\tsettings,\r\n\t\tcommonSettings,\r\n\t\trank\r\n\t);\r\n\tstore.state.danmakuSession.filterFlow = list;\r\n};\r\n\r\nexport const warning = (e: any) => {\r\n\tif (!isElectron()) {\r\n\t\treturn;\r\n\t}\r\n\tElMessageBox({\r\n\t\tmessage: `恁被C类警告累~${e.data.violationContent}`,\r\n\t\ttype: \"warning\"\r\n\t});\r\n};\r\n\r\nexport const danmakuHandler: any = {\r\n\t1000: danmakuText,\r\n\t1001: danmakuLike,\r\n\t1002: danmakuEnter,\r\n\t1003: danmakuSubscribe,\r\n\t1004: empty,\r\n\t1005: danmakuGift,\r\n\t1006: danmakuRichText,\r\n\t1007: danmakuJoinClub,\r\n\t2000: empty,\r\n\t2001: signalBanana,\r\n\t2002: signalAudience,\r\n\t2003: empty,\r\n\t2004: danmakuHistory,\r\n\t2005: empty,\r\n\t2100: empty,\r\n\t2101: empty,\r\n\t2102: empty,\r\n\t2103: empty,\r\n\t3000: empty,\r\n\t3001: warning,\r\n\t3002: empty\r\n};\r\n","import { user, stream as streamApi, danmaku as danmakuApi } from \"@front/api\";\r\nimport { event } from \"@front/util_function/eventBus\";\r\nimport { danmakuHandler } from \"./danmaku/danmaku\";\r\nimport { isElectron } from \"../util_function/electron\";\r\nimport { read } from \"@front/api/robot\";\r\nimport { getUserInfo } from \"@front/components/danmakuFlow/utils/getter\";\r\nimport {\r\n\tisOwner,\r\n\tisNormalDanmaku\r\n} from \"@front/components/danmakuFlow/utils/tester\";\r\nimport { addChangedDanmaku } from \"@front/util_function/storeWorker/index\";\r\nlet streamStatusTimer: any = null;\r\nlet danmakuTimer: any = null;\r\nexport const actions = {\r\n\tonline(store: any) {\r\n\t\tclearTimeout(streamStatusTimer);\r\n\t\tstreamStatusTimer = setTimeout(() => {\r\n\t\t\tstore.dispatch(store.state.streamStatus.step);\r\n\t\t}, 1000);\r\n\t},\r\n\tlogin(store: any, userData: any) {\r\n\t\tstore.commit(\"getRoomProfile\");\r\n\t\tstore.state.streamStatus.step = \"streamable\";\r\n\t\tevent.emit(\"streamStatusChanged\");\r\n\t\tstore.dispatch(store.state.streamStatus.step);\r\n\t},\r\n\tnostreamable(store: any) {\r\n\t\tclearTimeout(streamStatusTimer);\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tstreamApi\r\n\t\t\t\t.validate()\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif (res.liveAuth) {\r\n\t\t\t\t\t\tstore.state.streamStatus.step = \"streamable\";\r\n\t\t\t\t\t\tevent.emit(\"streamStatusChanged\");\r\n\t\t\t\t\t\tstore.dispatch(store.state.streamStatus.step);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstreamStatusTimer = setTimeout(() => {\r\n\t\t\t\t\t\t\tstore.dispatch(store.state.streamStatus.step);\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresolve(res.liveAuth);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\tstreamStatusTimer = setTimeout(() => {\r\n\t\t\t\t\t\tstore.dispatch(store.state.streamStatus.step);\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t});\r\n\t\t});\r\n\t},\r\n\tstreamable(store: any) {\r\n\t\tclearTimeout(streamStatusTimer);\r\n\t\tconst state = store.state;\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tuser.streamInfo(state.userSession)\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tconst liveID = state.roomProfile.liveID;\r\n\t\t\t\t\tObject.assign(state.userProfile, data.profile);\r\n\t\t\t\t\tdelete data.profile;\r\n\t\t\t\t\tObject.assign(state.roomProfile, data);\r\n\t\t\t\t\tif (data.liveID) {\r\n\t\t\t\t\t\tstate.streamStatus.step = \"streaming\";\r\n\t\t\t\t\t\tevent.emit(\"streamStatusChanged\");\r\n\t\t\t\t\t\tstore.dispatch(store.state.streamStatus.step);\r\n\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t} else if (liveID) {\r\n\t\t\t\t\t\tstate.streamStatus.step = \"streamEnded\";\r\n\t\t\t\t\t\tevent.emit(\"streamStatusChanged\");\r\n\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(new Error(\"no streaming\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\t// console.error(err);\r\n\t\t\t\t\tstreamStatusTimer = setTimeout(() => {\r\n\t\t\t\t\t\tstore.dispatch(store.state.streamStatus.step);\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t});\r\n\t},\r\n\trestartDanmaku(store: any) {\r\n\t\t//@ts-ignore\r\n\t\tconst danmakuWs: any = window?.danmakuWS;\r\n\t\tif (danmakuWs) {\r\n\t\t\tdanmakuWs.onclose = null;\r\n\t\t\tdanmakuWs.close();\r\n\t\t}\r\n\t\tstore.dispatch(\"streaming\");\r\n\t},\r\n\tstreaming(store: any) {\r\n\t\tclearTimeout(streamStatusTimer);\r\n\t\tconst state = store.state;\r\n\t\tconst filter = state.filter;\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (\r\n\t\t\t\tsessionStorage.getItem(\"liveID\") !==\r\n\t\t\t\tString(store.state.roomProfile.liveID)\r\n\t\t\t) {\r\n\t\t\t\tstate.danmakuSession.rawFlow = [];\r\n\t\t\t\tstate.danmakuSession.filterFlow = [];\r\n\t\t\t}\r\n\r\n\t\t\tconst countDown = () => {\r\n\t\t\t\tclearTimeout(danmakuTimer);\r\n\t\t\t\tdanmakuTimer = setTimeout(() => {\r\n\t\t\t\t\tstore.dispatch(\"restartDanmaku\");\r\n\t\t\t\t}, 20 * 1000);\r\n\t\t\t};\r\n\r\n\t\t\tconst onDanmaku = (danmaku: any) => {\r\n\t\t\t\tcountDown();\r\n\t\t\t\tif (isNormalDanmaku(danmaku)) {\r\n\t\t\t\t\tconst settings: any = isElectron()\r\n\t\t\t\t\t\t? state.danmakuProfile.toolBox\r\n\t\t\t\t\t\t: state.danmakuProfile.web;\r\n\t\t\t\t\tconst commonSettings =\r\n\t\t\t\t\t\tstate.danmakuProfile.common || danmaku.commonSettings();\r\n\t\t\t\t\tconst rank = state.rank;\r\n\t\t\t\t\t// auto click\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tstate.danmakuProfile.common.blackList.find(\r\n\t\t\t\t\t\t\t(user: any) =>\r\n\t\t\t\t\t\t\t\tuser.userID === getUserInfo(danmaku).userID\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tstore.commit(\"kickOut\", getUserInfo(danmaku).userID);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst { filtered, list, hasCombined } = filter.filterUpdate(\r\n\t\t\t\t\t\t[danmaku],\r\n\t\t\t\t\t\tstate.danmakuSession.filterFlow,\r\n\t\t\t\t\t\tsettings,\r\n\t\t\t\t\t\tcommonSettings,\r\n\t\t\t\t\t\trank\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (filtered[0]) {\r\n\t\t\t\t\t\t// chicken robot\r\n\t\t\t\t\t\tdo {\r\n\t\t\t\t\t\t\tif (!isElectron()) break;\r\n\t\t\t\t\t\t\tconst enable = settings?.robotSetting?.enable;\r\n\t\t\t\t\t\t\tlet shouldRead = false;\r\n\t\t\t\t\t\t\tif (!enable) break;\r\n\t\t\t\t\t\t\tif (enable === true) {\r\n\t\t\t\t\t\t\t\tshouldRead = true;\r\n\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\tArray.isArray(enable) &&\r\n\t\t\t\t\t\t\t\tenable.includes(danmaku.type)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tshouldRead = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!shouldRead) break;\r\n\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\trules,\r\n\t\t\t\t\t\t\t\tignoreOwner\r\n\t\t\t\t\t\t\t} = settings.robotSetting;\r\n\t\t\t\t\t\t\tif (!(ignoreOwner && isOwner(danmaku, state))) {\r\n\t\t\t\t\t\t\t\tread({\r\n\t\t\t\t\t\t\t\t\t...settings.robotSetting,\r\n\t\t\t\t\t\t\t\t\trules: rules[danmaku.type],\r\n\t\t\t\t\t\t\t\t\tdanmaku: filtered[0],\r\n\t\t\t\t\t\t\t\t\tfilters: [state.temp.emojiTester]\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} while (false);\r\n\t\t\t\t\t\tdanmaku = filtered[0];\r\n\t\t\t\t\t} else if (!hasCombined) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstate.danmakuSession.filterFlow = list;\r\n\t\t\t\t\taddChangedDanmaku(danmaku);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst handler = danmakuHandler[String(danmaku.type)];\r\n\t\t\t\tif (handler) {\r\n\t\t\t\t\thandler(danmaku, store);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tconst onOpen = (res: any) => {\r\n\t\t\t\tif (store.state.roomProfile.liveID) {\r\n\t\t\t\t\tsessionStorage.setItem(\r\n\t\t\t\t\t\t\"liveID\",\r\n\t\t\t\t\t\tstore.state.roomProfile.liveID\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tObject.assign(state.roomProfile, res.StreamInfo);\r\n\t\t\t\t}\r\n\t\t\t\tstore.commit(\"startLiveDurationTimer\");\r\n\t\t\t\tstore.commit(\"startGiftTimer\");\r\n\t\t\t\tstate.streamStatus.step = \"danmakuing\";\r\n\t\t\t\tevent.emit(\"streamStatusChanged\");\r\n\t\t\t\tstore.dispatch(store.state.streamStatus.step);\r\n\t\t\t\tresolve(true);\r\n\t\t\t};\r\n\r\n\t\t\tconst onClose = () => {\r\n\t\t\t\tclearTimeout(danmakuTimer);\r\n\t\t\t\tuser.streamInfo(store.state.userSession)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res.liveID) {\r\n\t\t\t\t\t\t\tstore.commit(\"stopLiveDurationTimer\");\r\n\t\t\t\t\t\t\tstore.commit(\"stopGiftTimer\");\r\n\t\t\t\t\t\t\tstreamStatusTimer = setTimeout(() => {\r\n\t\t\t\t\t\t\t\tstate.streamStatus.step = \"streaming\";\r\n\t\t\t\t\t\t\t\tstore.dispatch(store.state.streamStatus.step);\r\n\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstate.streamStatus.step = \"streamEnded\";\r\n\t\t\t\t\t\tevent.emit(\"streamStatusChanged\");\r\n\t\t\t\t\t\tstore.dispatch(store.state.streamStatus.step);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\tstreamStatusTimer = setTimeout(() => {\r\n\t\t\t\t\t\t\tstate.streamStatus.step = \"streamable\";\r\n\t\t\t\t\t\t\tstore.dispatch(store.state.streamStatus.step);\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\t\t\tdanmakuApi.startDanmaku({\r\n\t\t\t\tonOpen,\r\n\t\t\t\tonDanmaku,\r\n\t\t\t\tonClose\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\tdanmakuing(store: any) {\r\n\t\tclearTimeout(streamStatusTimer);\r\n\t\tstore.commit(\"getRank\");\r\n\t\tif (isElectron()) {\r\n\t\t\tstore.commit(\"getRoomProfile\");\r\n\t\t\tstore.commit(\"checkLikeStreaming\");\r\n\t\t}\r\n\t\tstreamStatusTimer = setTimeout(() => {\r\n\t\t\tstore.dispatch(store.state.streamStatus.step);\r\n\t\t}, 20000);\r\n\t},\r\n\tstreamEnded(store: any) {\r\n\t\tclearTimeout(danmakuTimer);\r\n\t\tclearTimeout(streamStatusTimer);\r\n\t\tstore.commit(\"resetStreamStatus\");\r\n\t\tstore.state.streamStatus.step = \"streamable\";\r\n\t\tstore.state.minify = false;\r\n\t\tevent.emit(\"streamStatusChanged\");\r\n\t\tstore.dispatch(store.state.streamStatus.step);\r\n\t},\r\n\topenStream(store: any, streamStartInfo: any) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tstreamApi\r\n\t\t\t\t.start(streamStartInfo)\r\n\t\t\t\t.then(async res => {\r\n\t\t\t\t\tif (res && res.liveID) {\r\n\t\t\t\t\t\tawait store.dispatch(\"streamable\");\r\n\t\t\t\t\t\tresolve(true);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthrow new Error(\"openStreamError\");\r\n\t\t\t\t})\r\n\t\t\t\t.catch(e => {\r\n\t\t\t\t\treject(e);\r\n\t\t\t\t});\r\n\t\t});\r\n\t},\r\n\tcloseStream(store: any, liveID: string) {\r\n\t\tclearTimeout(danmakuTimer);\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tstreamApi\r\n\t\t\t\t.close(liveID)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tresolve(res);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(e => {\r\n\t\t\t\t\treject(e);\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n};\r\n","import { Store, StoreOptions } from \"vuex\";\r\nimport { state } from \"./state\";\r\nimport { getters } from \"./getters\";\r\nimport { mutations } from \"./mutations\";\r\nimport { actions } from \"./actions\";\r\nimport { throttle } from \"lodash\";\r\n// import generalState from \"@front/store/general/general\";\r\n\r\n// const proxyState = reactive(state);\r\n\r\nconst store = new Store({\r\n\tstate,\r\n\tgetters,\r\n\tmutations,\r\n\tactions\r\n});\r\n\r\nexport default store;\r\n","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./sidebarBase.vue?vue&type=style&index=0&id=34f695a2&scoped=true&lang=scss\"","<template>\r\n\t<div class=\"hero\">\r\n\t\t<div class=\"title\">{{common.title}}</div>\r\n\t\t<div class=\"subtitle\">{{common.subTitle}}</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport { common } from \"@front/texts\";\r\nexport default defineComponent({\r\n\tname: \"heroBase\",\r\n\tcomputed: { common }\r\n});\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n\r\n@font-face {\r\n\tfont-family: \"包图小白体\";\r\n\tsrc: url(\"/fonts/包图小白体.ttf\") format(\"truetype\");\r\n}\r\n\r\n.hero {\r\n\tfont-family: Roboto;\r\n\tcolor: white;\r\n\tuser-select: none;\r\n\tposition: relative;\r\n\tfont-weight: 700;\r\n\t.title {\r\n\t\tfont-size: 90px;\r\n\t\tletter-spacing: 8px;\r\n\t\tpadding: 0px $--font-size-logo;\r\n\t\tfont-family: 包图小白体;\r\n\t\tline-height: 100px;\r\n\t}\r\n\t.subtitle {\r\n\t\tfont-family: 包图小白体;\r\n\t\ttext-align: right;\r\n\t\tfont-size: 65px;\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport { common } from \"@front/texts\";\r\nexport default defineComponent({\r\n\tname: \"heroBase\",\r\n\tcomputed: { common }\r\n});\r\n","import { render } from \"./base.vue?vue&type=template&id=40465ea6&scoped=true\"\nimport script from \"./base.vue?vue&type=script&lang=ts\"\nexport * from \"./base.vue?vue&type=script&lang=ts\"\n\nimport \"./base.vue?vue&type=style&index=0&id=40465ea6&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-40465ea6\"\n\nexport default script","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./titleScrolling.vue?vue&type=style&index=0&id=a983cbaa&scoped=true&lang=scss\"","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./titleFrame.vue?vue&type=style&index=0&id=6318c346&scoped=true&lang=scss\"","var map = {\n\t\"./footers/footerBase.vue\": \"e08b\",\n\t\"./frames/contentFrame.vue\": \"7c96\",\n\t\"./frames/rowFrame.vue\": \"a2b5\",\n\t\"./frames/rowSpan.vue\": \"629a\",\n\t\"./frames/titleFrame.vue\": \"0051\",\n\t\"./heros/base.vue\": \"1811\",\n\t\"./imgInput/imgInpuClip.vue\": \"dd85\",\n\t\"./imgInput/imgInpuText.vue\": \"bde4\",\n\t\"./imgInput/imgInputBase.vue\": \"d57d\",\n\t\"./imgInput/imgInputStatic.vue\": \"e54f\",\n\t\"./list/base.vue\": \"ac5c\",\n\t\"./popver/popverHelp.vue\": \"6cde\",\n\t\"./sidebars/sidebarBase.vue\": \"b68a\",\n\t\"./texts/iconCounter.vue\": \"aeb2\",\n\t\"./texts/titleScrolling.vue\": \"f1d8\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"2f94\";","import { sendChat } from \"@front/util_function/system\";\r\nconst waitList: any = [];\r\nlet sending = false;\r\nexport const chat = ({ userID, deviceID, serviceToken, data }: any) => {\r\n\tconst text = data.content;\r\n\tif (!text) {\r\n\t\treturn;\r\n\t}\r\n\tif (sending) {\r\n\t\twaitList.push({ userID, deviceID, serviceToken, data });\r\n\t} else {\r\n\t\trealChat({ userID, deviceID, serviceToken, data });\r\n\t}\r\n};\r\n\r\nexport const realChat = (data: any) => {\r\n\tsending = true;\r\n\tsendChat(data).finally(() => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tsending = false;\r\n\t\t\tif (waitList[0]) {\r\n\t\t\t\trealChat(waitList.shift());\r\n\t\t\t}\r\n\t\t}, 1000);\r\n\t});\r\n};\r\n","import { ElMessageBox } from \"element-plus\";\r\nexport const logout = (): void => {\r\n\t// backendRestart();\r\n\tsessionStorage.setItem(\"logined\", \"false\");\r\n\t// router.push(\"/login\");\r\n\twindow.location.replace(`http://${window.location.host}/login`);\r\n};\r\n\r\nexport const restart = () => {\r\n\tElMessageBox({\r\n\t\ttitle: \"确认重启？\",\r\n\t\tshowCancelButton: true,\r\n\t\tconfirmButtonText: \"确定\",\r\n\t\tcancelButtonText: \"取消\"\r\n\t}).then(restartConfirmed);\r\n};\r\nexport const restartConfirmed = () => {\r\n\tsessionStorage.clear();\r\n\t// router.push(\"/login\");\r\n\twindow.location.replace(`http://${window.location.host}/login`);\r\n};\r\n","import { Settings, CommonSettings } from \"@front/datas/danmaku\";\r\nimport { Rank } from \"@front/datas/room\";\r\nimport { getContent, getUserInfo, getMedal, getUID } from \"./getter\";\r\nimport {\r\n\tisOwner as ownerTest,\r\n\tisManager as managerTest,\r\n\tsameGift,\r\n\tsamePerson\r\n} from \"./tester\";\r\nimport { typeOptions } from \"@front/components/danmakuFlow/utils/data\";\r\nimport { rightClickMenuItem } from \"@front/datas/component\";\r\nimport { Store } from \"vuex\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { state } from \"@front/store/state\";\r\nconst types = typeOptions().map((i: any) => i.value);\r\n\r\nexport class Filter {\r\n\tgiftList: any = [];\r\n\tlikeList: any = [];\r\n\tenterList: any = [];\r\n\tfilter = (\r\n\t\tdanmaku: Array<any>,\r\n\t\t{ filter, maxNum, clubLevel, settingOfType }: Settings,\r\n\t\t{ blackList, keywords }: CommonSettings,\r\n\t\trank: Rank\r\n\t): any => {\r\n\t\tdanmaku = danmaku.filter(i => {\r\n\t\t\treturn types.indexOf(i.type) > -1;\r\n\t\t});\r\n\t\tif (!filter.open) {\r\n\t\t\treturn danmaku.slice(0, maxNum);\r\n\t\t}\r\n\t\tconst keys = Object.keys(settingOfType);\r\n\t\tlet count = 0;\r\n\t\tlet hasCombined = false;\r\n\t\tlet hasBlackList = false;\r\n\t\tlet hasKeywordBlocked = false;\r\n\r\n\t\tconst output: Array<any> = [];\r\n\t\tfor (let i of danmaku) {\r\n\t\t\tlet needFreeze = true;\r\n\t\t\tconst isOwner = ownerTest(i, state);\r\n\t\t\tif (count > maxNum) {\r\n\t\t\t\tbreak; // reach maxnum\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\tfilter.types.indexOf(i.type) < 0 ||\r\n\t\t\t\tkeys.indexOf(String(i.type)) < 0\r\n\t\t\t) {\r\n\t\t\t\tcontinue; // hide specific type danmaku\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\t!isOwner &&\r\n\t\t\t\tfilter.blackList &&\r\n\t\t\t\tblackList.find(u => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tu === getUserInfo(i).userID ||\r\n\t\t\t\t\t\tu.userID === getUserInfo(i).userID\r\n\t\t\t\t\t);\r\n\t\t\t\t})\r\n\t\t\t) {\r\n\t\t\t\thasBlackList = true;\r\n\t\t\t\tcontinue; // filter out blackList\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\t!isOwner &&\r\n\t\t\t\tfilter.clubOnly &&\r\n\t\t\t\trank.clubName &&\r\n\t\t\t\tgetMedal(i)?.clubName !== rank.clubName\r\n\t\t\t) {\r\n\t\t\t\tcontinue; // filter out no club member\r\n\t\t\t}\r\n\t\t\tif (!isOwner && getMedal(i)?.level < clubLevel) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\t!isOwner &&\r\n\t\t\t\ti.type === 1000 &&\r\n\t\t\t\tkeywords.find(u => {\r\n\t\t\t\t\treturn getContent(i).includes(u);\r\n\t\t\t\t})\r\n\t\t\t) {\r\n\t\t\t\thasKeywordBlocked = true;\r\n\t\t\t\tcontinue; // filter out keyword\r\n\t\t\t} else if (i.type === 1001 && filter.combineLike) {\r\n\t\t\t\tthis.likeList = this.likeList.slice(0, 5);\r\n\t\t\t\tconst like = this.likeList.find((l: any) => samePerson(i, l));\r\n\t\t\t\tif (like) {\r\n\t\t\t\t\tlike.combineCount += 1;\r\n\t\t\t\t\thasCombined = true;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tneedFreeze = false;\r\n\t\t\t\t\ti = {\r\n\t\t\t\t\t\t...i,\r\n\t\t\t\t\t\tcombineCount: 1\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.likeList.unshift(i);\r\n\t\t\t\t}\r\n\t\t\t} else if (i.type === 1002 && filter.combineEnter) {\r\n\t\t\t\tthis.enterList = this.enterList.slice(0, 10);\r\n\t\t\t\tconst enter = this.enterList.find((l: any) => samePerson(i, l));\r\n\t\t\t\tif (enter) {\r\n\t\t\t\t\tenter.combineCount += 1;\r\n\t\t\t\t\thasCombined = true;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tneedFreeze = false;\r\n\t\t\t\t\ti = {\r\n\t\t\t\t\t\t...i,\r\n\t\t\t\t\t\tcombineCount: 1\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.enterList.unshift(i);\r\n\t\t\t\t}\r\n\t\t\t} else if (i.type === 1005 && filter.combineGift) {\r\n\t\t\t\tconst now = Date.now();\r\n\t\t\t\tthis.giftList = this.giftList.filter(\r\n\t\t\t\t\t(i: any) => now < i.expire\r\n\t\t\t\t);\r\n\t\t\t\tconst gift = this.giftList.find(\r\n\t\t\t\t\t(g: any) => samePerson(i, g) && sameGift(i, g)\r\n\t\t\t\t);\r\n\t\t\t\tif (gift) {\r\n\t\t\t\t\tgift.count += i.data.count;\r\n\t\t\t\t\tgift.expire = now + 5000;\r\n\t\t\t\t\thasCombined = true;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tneedFreeze = false;\r\n\t\t\t\t\ti = {\r\n\t\t\t\t\t\t...i,\r\n\t\t\t\t\t\texpire: now + 5000,\r\n\t\t\t\t\t\tcount: i.data.count\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.giftList.unshift(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\toutput.push(needFreeze ? Object.freeze(i) : i);\r\n\t\t\tcount++;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tfiltered: output,\r\n\t\t\thasCombined,\r\n\t\t\thasBlackList,\r\n\t\t\thasKeywordBlocked\r\n\t\t};\r\n\t};\r\n\r\n\tfilterUpdate = (\r\n\t\tnewDanmaku: Array<any>,\r\n\t\tOldDanmaku: Array<any>,\r\n\t\tsettings: Settings,\r\n\t\tcommonSettings: CommonSettings,\r\n\t\trank: Rank\r\n\t) => {\r\n\t\tconst result = this.filter(newDanmaku, settings, commonSettings, rank);\r\n\t\treturn {\r\n\t\t\tlist: this.filterMaxnium(\r\n\t\t\t\t[...result.filtered.reverse(), ...OldDanmaku],\r\n\t\t\t\tsettings\r\n\t\t\t),\r\n\t\t\t...result\r\n\t\t};\r\n\t};\r\n\r\n\tfilterMaxnium = (danmaku: Array<any>, settings: Settings) => {\r\n\t\tif (danmaku.length > settings.maxNum * 2) {\r\n\t\t\treturn danmaku.slice(0, settings.maxNum);\r\n\t\t}\r\n\t\treturn danmaku;\r\n\t};\r\n}\r\n\r\nexport const menu = (\r\n\tdanmaku: any,\r\n\tstore: Store<any>\r\n): Array<rightClickMenuItem> => {\r\n\tif (!danmaku) {\r\n\t\treturn [];\r\n\t}\r\n\tconst userProfile = getUserInfo(danmaku);\r\n\tconst isOwner = ownerTest(danmaku, store.state);\r\n\tconst isManager = managerTest(danmaku, store.state);\r\n\tconst isBlackList = store.state.danmakuProfile.common.blackList.find(\r\n\t\t(i: any) => i.userID === userProfile.userID\r\n\t);\r\n\tconst likeList = store.state.danmakuProfile.common.likeList || [];\r\n\tconst isLikeList = likeList.find(\r\n\t\t(i: any) => i.userID === userProfile.userID\r\n\t);\r\n\treturn [\r\n\t\t{\r\n\t\t\tname: `当前选择:${getUserInfo(danmaku).nickname}`,\r\n\t\t\ticon: \"el-icon-user-solid\",\r\n\t\t\tshow: true,\r\n\t\t\tdisabled: true\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"个人主页\",\r\n\t\t\ticon: \"el-icon-arrow-right\",\r\n\t\t\tshow: true,\r\n\t\t\tdisabled: false,\r\n\t\t\tevent: () => {\r\n\t\t\t\twindow.open(`https://www.acfun.cn/u/${getUID(danmaku)}`);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"取消房管\",\r\n\t\t\ticon: \"el-icon-arrow-right\",\r\n\t\t\tshow: !isOwner && isManager,\r\n\t\t\tdisabled: false,\r\n\t\t\tevent: () => {\r\n\t\t\t\tstore.commit(\"removeManager\", userProfile.userID);\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\tmessage: `已将${userProfile.nickname}解除房管`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"添加房管\",\r\n\t\t\ticon: \"el-icon-arrow-right\",\r\n\t\t\tshow: !isOwner && !isManager,\r\n\t\t\tdisabled: false,\r\n\t\t\tevent: () => {\r\n\t\t\t\tstore.commit(\"addManager\", userProfile.userID);\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\tmessage: `已将${userProfile.nickname}设为房管`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"加入特别关心\",\r\n\t\t\ticon: \"el-icon-arrow-right\",\r\n\t\t\tshow: !isOwner && !isLikeList,\r\n\t\t\tdisabled: false,\r\n\t\t\tevent: () => {\r\n\t\t\t\tstore.commit(\"addLikeList\", {\r\n\t\t\t\t\tuserID: userProfile.userID,\r\n\t\t\t\t\tnickname: userProfile.nickname\r\n\t\t\t\t});\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\tmessage: `已将${userProfile.nickname}加入特别关心`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"取消特别关心\",\r\n\t\t\ticon: \"el-icon-arrow-right\",\r\n\t\t\tshow: !isOwner && isLikeList,\r\n\t\t\tdisabled: false,\r\n\t\t\tevent: () => {\r\n\t\t\t\tstore.commit(\"removeLikeList\", {\r\n\t\t\t\t\tuserID: userProfile.userID,\r\n\t\t\t\t\tnickname: userProfile.nickname\r\n\t\t\t\t});\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\tmessage: `已将${userProfile.nickname}移出特别关心`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"原谅他（解除拉黑）\",\r\n\t\t\ticon: \"el-icon-arrow-right\",\r\n\t\t\tshow: !isOwner && isBlackList,\r\n\t\t\tdisabled: false,\r\n\t\t\tevent: () => {\r\n\t\t\t\tstore.commit(\"removeBlackList\", {\r\n\t\t\t\t\tuserID: userProfile.userID,\r\n\t\t\t\t\tnickname: userProfile.nickname\r\n\t\t\t\t});\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\tmessage: `已将${userProfile.nickname}移出黑名单`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"拉黑他！\",\r\n\t\t\ticon: \"el-icon-arrow-right\",\r\n\t\t\tshow: !isOwner && !isBlackList,\r\n\t\t\tdisabled: false,\r\n\t\t\tevent: () => {\r\n\t\t\t\tstore.commit(\"addBlackList\", {\r\n\t\t\t\t\tuserID: userProfile.userID,\r\n\t\t\t\t\tnickname: userProfile.nickname\r\n\t\t\t\t});\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\tmessage: `已将${userProfile.nickname}拉黑`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"踢出去！\",\r\n\t\t\ticon: \"el-icon-arrow-right\",\r\n\t\t\tshow: !isOwner,\r\n\t\t\tdisabled: false,\r\n\t\t\tevent: () => {\r\n\t\t\t\tstore.commit(\"kickOut\", userProfile.userID);\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\tmessage: `已将${userProfile.nickname}踢出直播间`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"屏蔽该关键词\",\r\n\t\t\ticon: \"el-icon-arrow-right\",\r\n\t\t\tshow: Boolean(getContent(danmaku)),\r\n\t\t\tdisabled: false,\r\n\t\t\tevent: () => {\r\n\t\t\t\tstore.commit(\"addKeyword\", getContent(danmaku));\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\tmessage: `已将 ${getContent(danmaku)} 设为屏蔽词`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t];\r\n};\r\n","export const speedOptions = () => {\r\n\treturn [\r\n\t\t{\r\n\t\t\tlabel: \"关\",\r\n\t\t\tvalue: \"close\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"慢\",\r\n\t\t\tvalue: \"slow\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"快\",\r\n\t\t\tvalue: \"fast\"\r\n\t\t}\r\n\t];\r\n};\r\nexport const typeOptions = (): any => {\r\n\treturn [\r\n\t\t{\r\n\t\t\tlabel: \"评论\",\r\n\t\t\ttype: \"text\",\r\n\t\t\tvalue: 1000\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"点赞\",\r\n\t\t\ttype: \"like\",\r\n\t\t\tvalue: 1001\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"进直播间\",\r\n\t\t\ttype: \"enter\",\r\n\t\t\tvalue: 1002\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"关注\",\r\n\t\t\ttype: \"subscribe\",\r\n\t\t\tvalue: 1003\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"礼物\",\r\n\t\t\ttype: \"gift\",\r\n\t\t\tvalue: 1005\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"系统消息\",\r\n\t\t\ttype: \"richText\",\r\n\t\t\tvalue: 1006\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"加入守护团\",\r\n\t\t\ttype: \"joinClub\",\r\n\t\t\tvalue: 1007\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"分享直播间\",\r\n\t\t\ttype: \"joinClub\",\r\n\t\t\tvalue: 1008\r\n\t\t}\r\n\t];\r\n};\r\nexport const giftTypeOptions = () => {\r\n\treturn [\r\n\t\t{\r\n\t\t\tlabel: \"礼物图片\",\r\n\t\t\tvalue: \"picture\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"礼物名称\",\r\n\t\t\tvalue: \"name\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"价值\",\r\n\t\t\tvalue: \"price\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"数量\",\r\n\t\t\tvalue: \"number\"\r\n\t\t}\r\n\t];\r\n};\r\nexport const styleConfig = (code: any) => {\r\n\tconst danmakuType = typeOptions().find((i: any) => {\r\n\t\treturn i.value === code;\r\n\t});\r\n\tif (!danmakuType) {\r\n\t\treturn {};\r\n\t}\r\n\treturn {\r\n\t\tlabel: danmakuType.label,\r\n\t\tcode,\r\n\t\ttype: danmakuType.type,\r\n\t\twidgets: [], // 具体组件样式\r\n\t\tadvHtml: \"\",\r\n\t\tadvCss: \"\"\r\n\t};\r\n};\r\n","export const toANY = (obj: any): any => {\r\n\treturn obj;\r\n};\r\nexport const tostring = (obj: any): string => {\r\n\treturn String(obj);\r\n};\r\n","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./iconCounter.vue?vue&type=style&index=0&id=048bd500&scoped=true&lang=scss\"","export interface Profile {\r\n\tliveID: string;\r\n\tstreamName: string;\r\n\ttitle: string;\r\n\tliveCover: string;\r\n\tliveStartTime: number;\r\n\tpanoramic: boolean;\r\n\tbizUnit: string;\r\n\tbizCustomData: any;\r\n}\r\n\r\nexport const profile = (): Profile => {\r\n\treturn {\r\n\t\tliveID: \"\",\r\n\t\tstreamName: \"\",\r\n\t\ttitle: \"\",\r\n\t\tliveCover: \"\",\r\n\t\tliveStartTime: 0,\r\n\t\tpanoramic: false,\r\n\t\tbizUnit: \"\",\r\n\t\tbizCustomData: null\r\n\t};\r\n};\r\n\r\nexport interface ProfileDetail extends Profile {\r\n\tliveType: {\r\n\t\tcategoryID: number;\r\n\t\tcategoryName: string;\r\n\t\tsubCategoryID: number;\r\n\t\tsubCategoryName: string;\r\n\t};\r\n\thasFansClub: boolean;\r\n\tlikeCount: number;\r\n\tonlineCount: number;\r\n\tportrait: boolean;\r\n\tpaidShowUserBuyStatus: boolean;\r\n\tdisableDanmakuShow: boolean;\r\n}\r\n\r\nexport const profileDetail = (): ProfileDetail => {\r\n\treturn {\r\n\t\t...profile(),\r\n\t\tliveType: category(),\r\n\t\thasFansClub: false,\r\n\t\tlikeCount: 0,\r\n\t\tonlineCount: 0,\r\n\t\tportrait: false,\r\n\t\tpaidShowUserBuyStatus: false,\r\n\t\tdisableDanmakuShow: false\r\n\t};\r\n};\r\n\r\nexport interface Category {\r\n\tcategoryID: number;\r\n\tcategoryName: string;\r\n\tsubCategoryID: number;\r\n\tsubCategoryName: string;\r\n}\r\n\r\nexport const category = (): Category => {\r\n\treturn {\r\n\t\tcategoryID: 1,\r\n\t\tcategoryName: \"\",\r\n\t\tsubCategoryID: 1,\r\n\t\tsubCategoryName: \"\"\r\n\t};\r\n};\r\n\r\nexport interface Statistic {\r\n\tlikeCount: number;\r\n\tgiftCount: number;\r\n\tdiamondCount: number;\r\n\tbananaCount: number;\r\n\twatchCount: number;\r\n\tduration: number;\r\n}\r\n\r\nexport const statistic = (): Statistic => {\r\n\treturn {\r\n\t\tlikeCount: 0,\r\n\t\tgiftCount: 0,\r\n\t\tdiamondCount: 0,\r\n\t\tbananaCount: 0,\r\n\t\twatchCount: 0,\r\n\t\tduration: 0\r\n\t};\r\n};\r\n\r\nexport interface Status {\r\n\tliveDurationTimer: any;\r\n\tgiftTimer: any;\r\n\tliveDuration: number;\r\n\twatchingCount: string;\r\n\tstatistic: Statistic;\r\n}\r\n\r\nexport const status = (): Status => {\r\n\treturn {\r\n\t\tliveDurationTimer: null,\r\n\t\tgiftTimer: null,\r\n\t\tliveDuration: 0,\r\n\t\twatchingCount: \"0\", // 弹幕直接获取\r\n\t\tstatistic: statistic()\r\n\t};\r\n};\r\n\r\nexport interface Rank {\r\n\trankList: Array<any>;\r\n\tclubName: string;\r\n\tmedalCount: number;\r\n\thasMedal: boolean;\r\n\tuserFriendshipDegree: number;\r\n\tuserRank: number;\r\n}\r\nexport const rank = (): Rank => {\r\n\treturn {\r\n\t\trankList: [],\r\n\t\tclubName: \"\",\r\n\t\tmedalCount: 0,\r\n\t\thasMedal: true,\r\n\t\tuserFriendshipDegree: 0,\r\n\t\tuserRank: 0\r\n\t};\r\n};\r\n","export const isElectron = (): boolean => {\r\n\treturn Boolean(window && window.process && window.process.type);\r\n};\r\n","<template>\r\n\t<div class=\"rowSpan\" :style=\"{width:`${span*100/12}%`}\">\r\n\t\t<slot />\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"rowSpan\",\r\n\tprops: {\r\n\t\tspan: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 12\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n<style lang=\"scss\">\r\n.rowSpan {\r\n\tposition: relative;\r\n\tflex-shrink: 0;\r\n\tpadding-right: 16px;\r\n\tbox-sizing: border-box;\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"rowSpan\",\r\n\tprops: {\r\n\t\tspan: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 12\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./rowSpan.vue?vue&type=template&id=73e9480d\"\nimport script from \"./rowSpan.vue?vue&type=script&lang=ts\"\nexport * from \"./rowSpan.vue?vue&type=script&lang=ts\"\n\nimport \"./rowSpan.vue?vue&type=style&index=0&id=73e9480d&lang=scss\"\nscript.render = render\n\nexport default script","// import { obsApplets } from \"@front/applets\";\r\nexport default [\r\n\t{\r\n\t\tpath: \"/obs/danmaku\",\r\n\t\tname: \"danmaku\",\r\n\t\tmeta: {\r\n\t\t\tlabel: \"弹幕流\",\r\n\t\t\ticon: \"el-icon-chat-line-square\",\r\n\t\t\taction: \"router\",\r\n\t\t\tnoElectron: true\r\n\t\t},\r\n\t\tcomponent: () => import(\"@/electron_browser/views/danmakuWeb/index.vue\")\r\n\t},\r\n\t// ...testRouters,\r\n\t// ...obsApplets.map(({ name, component, cname }: any) => {\r\n\t// \treturn {\r\n\t// \t\tname,\r\n\t// \t\tcomponent,\r\n\t// \t\tmeta: {\r\n\t// \t\t\tcname,\r\n\t// \t\t\tnoElectron: true\r\n\t// \t\t},\r\n\t// \t\tpath: `/obs/${name}`\r\n\t// \t};\r\n\t// }),\r\n\t{\r\n\t\tpath: \"/404\",\r\n\t\tname: \"404\",\r\n\t\tcomponent: () => import(\"@front/views/error-page/404.vue\")\r\n\t}\r\n];\r\n","import { createRouter, createWebHistory, RouteRecordRaw } from \"vue-router\";\r\nimport { isElectron } from \"@front/util_function/electron\";\r\nimport client from \"./clientRouter\";\r\nimport web from \"./webRouter\";\r\nconst routes: Array<RouteRecordRaw> = isElectron() ? [...client] : web;\r\nconsole.log(routes);\r\nconst router = createRouter({\r\n\thistory: createWebHistory(process.env.BASE_URL),\r\n\troutes\r\n});\r\nif (!isElectron() || process.env.NODE_ENV === \"production\") {\r\n\trouter.beforeEach((to, from, next) => {\r\n\t\tif (!isElectron()) {\r\n\t\t\tif (to.meta.noElectron || to.name === \"404\") {\r\n\t\t\t\tnext();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tnext({\r\n\t\t\t\tname: \"404\"\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// @ts-ignore\r\n\t\t\tif (to.meta.disabled && to.meta.disabled()) {\r\n\t\t\t\tnext(false);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (to.fullPath.includes(\"applet\")) {\r\n\t\t\t\tnext();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (sessionStorage.getItem(\"logined\") === \"true\") {\r\n\t\t\t\tif (to.name !== \"Login\") {\r\n\t\t\t\t\tnext();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tnext({\r\n\t\t\t\t\tname: \"dashboard\"\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (to.name === \"Login\") {\r\n\t\t\t\tnext();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tnext({\r\n\t\t\t\tname: \"Login\"\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport default router;\r\n","<!--\r\n ! AcFunlive toolbox client, AcFun直播工具箱的客戶端\r\n ! 版權所有 (C) 2020 ACFUN-FOC(ACFUN自由與開源9課)\r\n ! 此程序爲自由軟件：本程序遵守自由軟件聯盟(FSF)所發佈之GNU Affero通用公共許可第三版。\r\n ! 在此條約下、伱可以再發行・修改之。\r\n ! 我等開發者希望本程序能是實用的軟件、竝心懷如此願望而發佈。但此程序\r\n ! ！       ！       ！       ！\r\n ! 無       有       擔       保  。\r\n ! ！       ！       ！       ！\r\n ! 無 有 任 何 擔 保 。甚至不保證它能有用・能對伱產生經濟效益。\r\n ! 伱應該收到了一份GNU Affero通用公共許可第三版、它伴隨着本程序。若伱沒有收到，請查閱\r\n ! <http://www.gnu.org/licenses/>。同時提供伱的電子郵寄地址或傳統的郵件聯繫方式。\r\n-->\r\n\r\n<template>\r\n\t<div id=\"app\" :class=\"{logined:$store.state.isLogined}\">\r\n\t\t<router-view v-slot=\"{ Component }\">\r\n\t\t\t<transition name=\"fade\" mode=\"out-in\">\r\n\t\t\t\t<component :is=\"Component\" />\r\n\t\t\t</transition>\r\n\t\t</router-view>\r\n\t</div>\r\n\r\n</template>\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport { logout } from \"@front/util_function/login\";\r\nexport default defineComponent({\r\n\tname: \"app\"\r\n});\r\n</script>\r\n<style lang=\"scss\">\r\nhtml,\r\nbody {\r\n\tmargin: 0px;\r\n\tpadding: 0px;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground-color: transparent !important;\r\n\tposition: absolute;\r\n\tbox-sizing: border-box;\r\n\toverflow: hidden;\r\n}\r\nbody {\r\n\tpadding: 12px;\r\n}\r\n#app {\r\n\tposition: relative;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport { logout } from \"@front/util_function/login\";\r\nexport default defineComponent({\r\n\tname: \"app\"\r\n});\r\n","import { render } from \"./App.vue?vue&type=template&id=451fcd92\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=451fcd92&lang=scss\"\nscript.render = render\n\nexport default script","import { App } from \"vue\";\r\nexport const initGlobalComp = (vm: App) => {\r\n\tconst requireComponent = require.context(\r\n\t\t\"@front/components/base/\",\r\n\t\ttrue,\r\n\t\t/\\w+\\.(vue)$/\r\n\t);\r\n\r\n\trequireComponent.keys().forEach(fileName => {\r\n\t\tconst componentConfig = requireComponent(fileName);\r\n\t\tvm.component(\r\n\t\t\tcomponentConfig.default.name ||\r\n\t\t\t\tfileName.replace(\"./\", \"\").replace(\".vue\", \"\"),\r\n\t\t\tcomponentConfig.default || componentConfig\r\n\t\t);\r\n\t});\r\n};\r\n","export const dpiOptions = () => {\r\n\treturn [\r\n\t\t[1, \"100%\"],\r\n\t\t[1.25, \"100%\"],\r\n\t\t[1.5, \"93%\"],\r\n\t\t[1.75, \"80%\"]\r\n\t];\r\n};\r\n","import { listenDpi } from \"./listeners\";\r\nimport { dpiOptions } from \"@front/datas/common\";\r\nimport { log } from \"@front/util_function/system\";\r\nimport { common } from \"@front/texts\";\r\nconst dpiOption: any = dpiOptions();\r\n\r\nexport const dpiHandler = () => {\r\n\tconst dpi = window.devicePixelRatio;\r\n\tfor (const i of dpiOption.reverse()) {\r\n\t\tif (dpi >= i[0]) {\r\n\t\t\tdocument.body.style.zoom = i[1];\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\tdocument.body.style.zoom = \"100%\";\r\n};\r\nexport const logger = () => {\r\n\tconst ept = () => 1;\r\n\tif (process.env.NODE_ENV === \"production\") {\r\n\t\t// const newConsole: any = {};\r\n\t\t// Object.keys(console).forEach(key => {\r\n\t\t// \tnewConsole[key] = ept;\r\n\t\t// });\r\n\t\t// Object.assign(console, newConsole);\r\n\t\tconst error = console.error;\r\n\t\tconst lg = console.log;\r\n\t\tconsole.error = (e: any) => {\r\n\t\t\terror(e);\r\n\t\t\tif (e instanceof Error) {\r\n\t\t\t\tlog(String(e.stack) + `@${common().version}`);\r\n\t\t\t} else {\r\n\t\t\t\tlog(JSON.stringify(e));\r\n\t\t\t}\r\n\t\t};\r\n\t\tconsole.log = (...e: any) => {\r\n\t\t\tlg(...e);\r\n\t\t\tlog(JSON.stringify(e));\r\n\t\t};\r\n\t\twindow.addEventListener(\"unhandledrejection\", e => {\r\n\t\t\tif (e.reason instanceof Error) {\r\n\t\t\t\tlog(String(e.reason.stack) + `@${common().version}`);\r\n\t\t\t}\r\n\t\t});\r\n\t\twindow.addEventListener(\"error\", e => {\r\n\t\t\tlog(String(e.error.stack) + `@${common().version}`);\r\n\t\t});\r\n\t}\r\n};\r\nexport const globalMethods = [dpiHandler, logger];\r\n\r\nexport const registerMethod = () => {\r\n\tglobalMethods.forEach((handler: any) => {\r\n\t\thandler();\r\n\t});\r\n};\r\n","/*\r\n * AcFunlive toolbox client, AcFun直播工具箱的客戶端\r\n * 版權所有 (C) 2020 ACFUN-FOC(ACFUN自由與開源9課)\r\n * 此程序爲自由軟件：本程序遵守自由軟件聯盟(FSF)所發佈之GNU Affero通用公共許可第三版。\r\n * 在此條約下、伱可以再發行・修改之。\r\n * 我等開發者希望本程序能是實用的軟件、竝心懷如此願望而發佈。但此程序\r\n * ！       ！       ！       ！\r\n * 無       有       擔       保  。\r\n * ！       ！       ！       ！\r\n * 無 有 任 何 擔 保 。甚至不保證它能有用・能對伱產生經濟效益。\r\n * 伱應該收到了一份GNU Affero通用公共許可第三版、它伴隨着本程序。若伱沒有收到，請查閱\r\n * <http://www.gnu.org/licenses/>。同時提供伱的電子郵寄地址或傳統的郵件聯繫方式。\r\n */\r\nimport \"@front/styles/index.scss\";\r\nimport ElementPlus from \"element-plus\";\r\nimport store from \"@front/store\";\r\nimport router from \"@front/router\";\r\nimport App from \"@front/App.vue\";\r\nimport { initGlobalComp } from \"@front/components/injector\";\r\nimport { registerMethod } from \"@front/util_function/globalRegister\";\r\nimport { createApp, h } from \"vue\";\r\n\r\nconst app = createApp({\r\n\trender: () => h(App)\r\n})\r\n\t.use(ElementPlus)\r\n\t.use(router)\r\n\t.use(store);\r\ninitGlobalComp(app);\r\nregisterMethod();\r\napp.mount(\"body\");\r\n","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./withAvatar.vue?vue&type=style&index=0&id=1660186d&scoped=true&lang=scss\"","<template>\r\n\t<el-popover v-bind=\"$attrs\">\r\n\t\t<template #reference>\r\n\t\t\t<span class=\"el-icon-question\" />\r\n\t\t</template>\r\n\t\t<slot />\r\n\t</el-popover>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"popverHelp\"\r\n});\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n</style>\r\n","import { render } from \"./popverHelp.vue?vue&type=template&id=e9bcb1fe&scoped=true\"\nimport script from \"./popverHelp.vue?vue&type=script&lang=js\"\nexport * from \"./popverHelp.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-e9bcb1fe\"\n\nexport default script","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./footerBase.vue?vue&type=style&index=0&id=3863483c&scoped=true&lang=scss\"","<template>\r\n\t<div class=\"contentFrame\" :class=\"align\">\r\n\t\t<slot />\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"contentFrame\",\r\n\tprops: {\r\n\t\talign: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"column\"\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n.contentFrame {\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\t&.column {\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: flex-start;\r\n\t\t:deep rowFrame {\r\n\t\t\tmargin-right: 4%;\r\n\t\t}\r\n\t}\r\n\t&.row {\r\n\t\tflex-direction: row;\r\n\t\talign-items: flex-start;\r\n\t\talign-content: flex-start;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"contentFrame\",\r\n\tprops: {\r\n\t\talign: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"column\"\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./contentFrame.vue?vue&type=template&id=50b2b036&scoped=true\"\nimport script from \"./contentFrame.vue?vue&type=script&lang=ts\"\nexport * from \"./contentFrame.vue?vue&type=script&lang=ts\"\n\nimport \"./contentFrame.vue?vue&type=style&index=0&id=50b2b036&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-50b2b036\"\n\nexport default script","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./imgInpuClip.vue?vue&type=style&index=0&id=0005670c&lang=scss\"","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=9b7f3ad4&scoped=true&lang=scss\"","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./imgInputStatic.vue?vue&type=style&index=0&id=5e5372ee&lang=scss\"","import { requestT } from \"@front/api/user\";\r\nimport { room, user } from \"@front/datas\";\r\nexport const setProfile = (data: any): Promise<any> => {\r\n\t// 修改房间图片信息\r\n\treturn requestT({\r\n\t\tmethod: \"setRoomProfile\",\r\n\t\tdata: {\r\n\t\t\ttype: 907,\r\n\t\t\tdata\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const getProfile = (): Promise<any> => {\r\n\treturn requestT({\r\n\t\tmethod: \"getRoomProfile\",\r\n\t\tdata: {\r\n\t\t\ttype: 903\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const getRank = (data: user.Session): Promise<any> => {\r\n\treturn requestT({\r\n\t\tmethod: \"getBoss\",\r\n\t\tdata: {\r\n\t\t\ttype: 302,\r\n\t\t\tdata: {\r\n\t\t\t\tliverUID: data.userID\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const getGift = (): Promise<any> => {\r\n\treturn requestT({\r\n\t\tmethod: \"getGift\",\r\n\t\tdata: { type: 107 }\r\n\t});\r\n};\r\n\r\nexport const getGiftList = ({ liveID }: any): Promise<any> => {\r\n\treturn requestT({\r\n\t\tmethod: \"getGiftList\",\r\n\t\tdata: {\r\n\t\t\ttype: 114,\r\n\t\t\tdata: {\r\n\t\t\t\tliveID\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const getDonate = (data: user.Session): Promise<any> => {\r\n\treturn requestT({\r\n\t\tmethod: \"getDonate\",\r\n\t\tdata: {\r\n\t\t\ttype: 103,\r\n\t\t\tdata: {\r\n\t\t\t\tliverUID: data.userID\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const getAudience = (data: room.Profile): Promise<any> => {\r\n\treturn requestT({\r\n\t\tmethod: \"getAudience\",\r\n\t\tdata: {\r\n\t\t\ttype: 102,\r\n\t\t\tdata\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const getManagerList = (): Promise<any> => {\r\n\treturn requestT({\r\n\t\tmethod: \"getManagerList\",\r\n\t\tdata: {\r\n\t\t\ttype: 200\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const addManager = (userID: number): Promise<any> => {\r\n\treturn requestT({\r\n\t\tmethod: \"addManager\",\r\n\t\tdata: {\r\n\t\t\ttype: 201,\r\n\t\t\tdata: {\r\n\t\t\t\tmanagerUID: userID\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\nexport const removeManager = (userID: number): Promise<any> => {\r\n\treturn requestT({\r\n\t\tmethod: \"removeManager\",\r\n\t\tdata: {\r\n\t\t\ttype: 202,\r\n\t\t\tdata: {\r\n\t\t\t\tmanagerUID: userID\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const getCutStatus = (): Promise<any> => {\r\n\treturn requestT({\r\n\t\tmethod: \"getRecPermission\",\r\n\t\tdata: {\r\n\t\t\ttype: 908\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const setCutStatus = (canCut = true): Promise<any> => {\r\n\treturn requestT({\r\n\t\tmethod: \"setCutStatus\",\r\n\t\tdata: {\r\n\t\t\ttype: 909,\r\n\t\t\tdata: { canCut }\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const toCut = (liverUID: number, liveID: string): Promise<any> => {\r\n\treturn requestT({\r\n\t\tmethod: \"toCut\",\r\n\t\tdata: {\r\n\t\t\ttype: 116,\r\n\t\t\tdata: { liverUID, liveID }\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const kickOutPerson = ({ userID, liveID }: any): Promise<any> => {\r\n\treturn requestT({\r\n\t\tmethod: \"kickOutPerson\",\r\n\t\tdata: {\r\n\t\t\ttype: 205,\r\n\t\t\tdata: {\r\n\t\t\t\tkickedUID: userID,\r\n\t\t\t\tliveID\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./contentFrame.vue?vue&type=style&index=0&id=50b2b036&scoped=true&lang=scss\"","export class Event {\r\n\tevents: any = {};\r\n\tconstructor() {\r\n\t\tthis.events = {};\r\n\t}\r\n\r\n\ton(eventName: any, fn: any) {\r\n\t\tthis.events[eventName] = this.events[eventName] || [];\r\n\t\tthis.events[eventName].push(fn);\r\n\t}\r\n\r\n\tonce(eventName: any, fn: any) {\r\n\t\tthis.events[eventName] = this.events[eventName] || [];\r\n\t\tconst once = () => {\r\n\t\t\tthis.off(eventName, once);\r\n\t\t\tfn();\r\n\t\t};\r\n\t\tthis.events[eventName].push(once);\r\n\t}\r\n\r\n\toff(eventName: any, fn: any) {\r\n\t\tif (this.events[eventName]) {\r\n\t\t\tfor (let i = 0; i < this.events[eventName].length; i++) {\r\n\t\t\t\tif (this.events[eventName][i] === fn) {\r\n\t\t\t\t\tthis.events[eventName].splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\temit(eventName: any, data: any = {}) {\r\n\t\tif (this.events[eventName]) {\r\n\t\t\tthis.events[eventName].forEach((fn: any) => {\r\n\t\t\t\tif (fn) fn(data);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const event = new Event();\r\n","import { user } from \"@front/datas\";\r\nimport { request } from \"@front/api/utils/websocket\";\r\n\r\nlet logined = false;\r\nexport let session: any = null;\r\nexport const isLogined = (): boolean => {\r\n\treturn logined;\r\n};\r\n\r\n/**\r\n * @name 登陆\r\n * @param param\r\n * @param param.account 账号\r\n * @param param.password 密码\r\n * @returns\r\n */\r\nexport const login = ({ account, password }: user.Data): Promise<any> => {\r\n\t// 登陆\r\n\treturn request({\r\n\t\tmethod: \"login\",\r\n\t\tdata: {\r\n\t\t\ttype: 2,\r\n\t\t\tdata: {\r\n\t\t\t\taccount,\r\n\t\t\t\tpassword\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\t\t.then(({ tokenInfo }: any) => {\r\n\t\t\tsession = tokenInfo;\r\n\t\t\tlogined = true;\r\n\t\t\treturn Promise.resolve(tokenInfo);\r\n\t\t})\r\n\t\t.catch(e => {\r\n\t\t\tlogined = false;\r\n\t\t\tsession = null;\r\n\t\t\treturn Promise.reject(new Error());\r\n\t\t});\r\n};\r\nexport const loginSession = (tokenInfo: any): void => {\r\n\tsession = tokenInfo;\r\n\tlogined = true;\r\n};\r\n\r\n/**\r\n * @name 无需登陆设置token\r\n * @returns 有token的websocket\r\n */\r\nexport const setToken = (): Promise<WebSocket> => {\r\n\tif (!session || !logined) return Promise.reject(new Error());\r\n\treturn request({\r\n\t\tmethod: \"setToken\",\r\n\t\tdata: {\r\n\t\t\ttype: 6,\r\n\t\t\tdata: session\r\n\t\t},\r\n\t\tonce: false,\r\n\t\tprint: false\r\n\t});\r\n};\r\n\r\n/**\r\n * @name 带token的请求\r\n * @returns\r\n */\r\nexport const requestT = ({ method, data, timeout, once }: any) => {\r\n\treturn setToken().then(({ ws }: any) => {\r\n\t\treturn request({ method, data, timeout, once, ws });\r\n\t});\r\n};\r\n\r\nexport const streamInfo = ({ userID }: any): Promise<any> => {\r\n\t// 获取用户直播信息\r\n\treturn requestT({\r\n\t\tmethod: \"getUserStreamInfo\",\r\n\t\tdata: {\r\n\t\t\ttype: 109,\r\n\t\t\tdata: {\r\n\t\t\t\tuserID\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const isStreaming = ({ userID }: any): Promise<any> => {\r\n\t// 获取用户直播信息\r\n\treturn requestT({\r\n\t\tmethod: \"getUserStreamInfo\",\r\n\t\tdata: {\r\n\t\t\ttype: 115,\r\n\t\t\tdata: {\r\n\t\t\t\tuserID\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n};\r\n","export interface SuperChatBlockSetting {\r\n\ttriggerValue: number;\r\n\ttheme: any;\r\n\tthemeID: any;\r\n\tlistDuration: number;\r\n}\r\n\r\nexport const superChatBlockSetting = (): SuperChatBlockSetting => {\r\n\treturn {\r\n\t\ttriggerValue: 99,\r\n\t\ttheme: {\r\n\t\t\tconfig: {\r\n\t\t\t\ttext: \"我永远单推主播！\"\r\n\t\t\t},\r\n\t\t\tbackground: {\r\n\t\t\t\tbackgroundType: 0,\r\n\t\t\t\tbackgroundColor: \"rgba(16,128,185,1)\",\r\n\t\t\t\tbackgroundImage: \"\",\r\n\t\t\t\tbackgroundSize: 100,\r\n\t\t\t\tbackgroundPosition: \"center\",\r\n\t\t\t\tbackgroundDynamic: \"default\",\r\n\t\t\t\tbackgroundSizeType: 0,\r\n\t\t\t\tbackgroundOpacity: 100\r\n\t\t\t},\r\n\t\t\tlistStyle: {\r\n\t\t\t\tfont: \"/fonts/站酷快乐体.ttf\",\r\n\t\t\t\tfontSize: 14,\r\n\t\t\t\tfontWeight: \"bolder\",\r\n\t\t\t\tcolor: \"rgba(255, 255, 255, 1)\",\r\n\t\t\t\ttextShadowWidth: 0.6,\r\n\t\t\t\ttextShadowColor: \"#000\"\r\n\t\t\t},\r\n\t\t\tpanelStyle: {\r\n\t\t\t\tfont: \"/fonts/极影毁片圆.ttf\",\r\n\t\t\t\tfontSize: 14,\r\n\t\t\t\tfontWeight: \"lighter\",\r\n\t\t\t\tcolor: \"rgba(255, 255, 255, 1)\",\r\n\t\t\t\ttextShadowWidth: 0.6,\r\n\t\t\t\ttextShadowColor: \"#000\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tthemeID: \"0\",\r\n\t\tlistDuration: 55000\r\n\t};\r\n};\r\n\r\nexport interface SuperChatBlock extends SuperChatBlockSetting {\r\n\tpanelEndTime: number;\r\n\tlistEndTime: number;\r\n\tcreateTime: number;\r\n\tvalue: number;\r\n\tcontent: string;\r\n\tavatar: string;\r\n\tnickName: string;\r\n\tshowed: boolean;\r\n\tnumber: number;\r\n\tnextLevel: number;\r\n\tuid: number;\r\n}\r\n\r\nexport const superChatBlock = (): SuperChatBlock => {\r\n\treturn {\r\n\t\t...superChatBlockSetting(),\r\n\t\tpanelEndTime: 0,\r\n\t\tlistEndTime: 0,\r\n\t\tcreateTime: 0,\r\n\t\tvalue: 0,\r\n\t\tcontent: \"\",\r\n\t\tavatar: \"\",\r\n\t\tnickName: \"\",\r\n\t\tshowed: false,\r\n\t\tnumber: 0,\r\n\t\tnextLevel: 0,\r\n\t\tuid: 0\r\n\t};\r\n};\r\n","<template>\r\n\t<div class=\"rowFrame\" :style=\"{width}\">\r\n\t\t<div class=\"title\" v-if=\"title\">{{title}}</div>\r\n\t\t<div :class=\"[{content:contentDefaultClass,flex:flex},contentClass]\">\r\n\t\t\t<slot />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"rowFrame\",\r\n\tprops: {\r\n\t\ttitle: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tcontentClass: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tcontentDefaultClass: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tflex: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\twidth: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"50%\"\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped  lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n.rowFrame {\r\n\tposition: relative;\r\n\tflex-shrink: 0;\r\n\tflex-grow: 0;\r\n\tmargin-bottom: 16px;\r\n\t.flex {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\t.title {\r\n\t\tposition: relative;\r\n\t\tfont-weight: 700;\r\n\t\tcolor: $--color-text-primary;\r\n\t\theight: 24px;\r\n\t\tuser-select: none;\r\n\t}\r\n\t.content {\r\n\t\tposition: relative;\r\n\t\tbackground-color: white;\r\n\t\twidth: 100%;\r\n\t\tbox-shadow: $--box-shadow-base;\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"rowFrame\",\r\n\tprops: {\r\n\t\ttitle: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tcontentClass: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tcontentDefaultClass: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tflex: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\twidth: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"50%\"\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./rowFrame.vue?vue&type=template&id=1cf93e19&scoped=true\"\nimport script from \"./rowFrame.vue?vue&type=script&lang=ts\"\nexport * from \"./rowFrame.vue?vue&type=script&lang=ts\"\n\nimport \"./rowFrame.vue?vue&type=style&index=0&id=1cf93e19&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-1cf93e19\"\n\nexport default script","export const login = (): any => {\r\n\treturn {\r\n\t\tdisclaimer:\r\n\t\t\t\"为避免不必要的误解与争论，现做如下声明：\\n\\n    0. 本软件是自由软件，本软件无有任何担保（NO WARRANTY），本软件遵守AGPL3协议发布，您须遵守之以使用/再发行/修改该软件；\\n    1. ACFUN开源⑨ 课之开发本直播工具箱及其插件属非商业行为， 不以盈利为目的；\\n    2. 本直播工具箱及其插件代码在一定开发阶段后会传播（propagate）并开源；\\n    3. 本直播工具箱及其插件均部署在客户端， 其中涉及到A站相关用户隐私数据（ 账号、 密码等） 均从客户端直连A站， 中间不经过任何服务器；\\n    4. 最终解释权归属ACFUN开源⑨ 课。 \",\r\n\t\twelcomeLogo: \"/imgs/gif/acfun_welcome.gif\",\r\n\t\twelcomeText: \"欢迎使用ACFUN直播工具箱(主播版)~~\"\r\n\t};\r\n};\r\n","import { version } from \"@/../package.json\";\r\nexport const common = (): any => {\r\n\treturn {\r\n\t\ttitle: \"ACFUN\",\r\n\t\tsubTitle: \"直播工具箱\",\r\n\t\tunstreamable: \"恁不是主播，请到A站申请开播权限\",\r\n\t\tversion\r\n\t};\r\n};\r\n","export const welcome = (): any => {\r\n\treturn {\r\n\t\tmessage:\r\n\t\t\t\"感谢支持，祝你在A站玩的开心！有问题/想要的功能请及时站内私信或在下方链接反馈\",\r\n\t\tblocks: [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Bug报告/反馈建议\",\r\n\t\t\t\ttype: \"html\",\r\n\t\t\t\tvalue:\r\n\t\t\t\t\t\"<a href='https://www.wjx.top/vj/h4Zh8Hc.aspx' target='_blank'>此处</a>提交Bug或反馈\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"未来规划\",\r\n\t\t\t\ttype: \"list\",\r\n\t\t\t\tvalue: [\r\n\t\t\t\t\t\"点歌播放器施工中，点歌台暂时下线\",\r\n\t\t\t\t\t\"重构\",\r\n\t\t\t\t\t\"重构\",\r\n\t\t\t\t\t\"还是重构\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"最后\",\r\n\t\t\t\ttype: \"html\",\r\n\t\t\t\tvalue:\r\n\t\t\t\t\t\"如果觉得好用可以在<a href='https://github.com/ACFUN-FOSS/acfunlive-toolbox-client-Public' target='_blank'>这里</a>和<a href='https://github.com/ACFUN-FOSS/acfunlive-backend' target='_blank'>这里</a>点个星星支持我们\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"本次更新内容\",\r\n\t\t\t\ttype: \"list\",\r\n\t\t\t\tvalue: [\r\n\t\t\t\t\t\"更新‘分享到其它平台’的弹幕类型\",\r\n\t\t\t\t\t\"房间管理页面新增允许剪辑开关\",\r\n\t\t\t\t\t\"迷你化现在可自定义背景颜色\",\r\n\t\t\t\t\t\"直播面板新增剪辑页面快捷入口\",\r\n\t\t\t\t\t\"修复迷你化宽度问题\",\r\n\t\t\t\t\t// \"修复点歌台\",\r\n\t\t\t\t\t\"优化抽奖（现在可以记录奖品及弹幕\",\r\n\t\t\t\t\t\"继续优化断线重连\",\r\n\t\t\t\t\t\"以及其它一些bug修复\",\r\n\t\t\t\t\t\"在重构了 别骂了别骂了\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"特别感谢\",\r\n\t\t\t\ttype: \"list\",\r\n\t\t\t\tvalue: [\r\n\t\t\t\t\t\"logo by <a href='https://www.acfun.cn/u/1447414' target='_blank'>木羽熊藏</a>\",\r\n\t\t\t\t\t\"产品设计：<a href='https://www.acfun.cn/u/173620' target='_blank'>林梦仙</a>\",\r\n\t\t\t\t\t\"所有参与测试或提出意见的主播们\"\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"最后的最后\",\r\n\t\t\t\ttype: \"string\",\r\n\t\t\t\tvalue: \"AC在 爱也在\"\r\n\t\t\t}\r\n\t\t]\r\n\t};\r\n};\r\n","export const footer = (): any => {\r\n\treturn {\r\n\t\tbase:\r\n\t\t\t\"Logo:By @木羽熊藏\\n UI设计: By @林梦仙\\n ACFUN开源⑨课\\n Copyright @ 2007-2021 AcFun. 保留所有权利\",\r\n\t\twrap: \"ACFUN开源⑨课\\n Copyright @ 2007-2021 \\nAcFun. 保留所有权利\"\r\n\t};\r\n};\r\n","export default function SharedWorker_fn() {\n  return new SharedWorker(__webpack_public_path__ + \"js/shared.worker.37cf7b9e.worker.js\");\n}\n","import { throttle } from \"lodash\";\r\nimport { Store } from \"vuex\";\r\n// @ts-ignore\r\nimport SharedWorker from \"./shared.worker.js\";\r\nlet _worker: any = null;\r\nlet changedDanmaku: any = [];\r\n\r\nexport const addChangedDanmaku = (danmaku: any) => {\r\n\tchangedDanmaku.unshift(danmaku);\r\n};\r\n\r\nexport const getChangedDanmaku = () => {\r\n\treturn changedDanmaku;\r\n};\r\n\r\nexport const openWorker = () => {\r\n\tif (_worker) {\r\n\t\t// @ts-ignore\r\n\t\tcloseWorker();\r\n\t}\r\n\t_worker = new SharedWorker();\r\n\t_worker.port.start();\r\n\twindow.addEventListener(\"beforeunload\", () => {\r\n\t\t_worker.port.postMessage([\"close\"]);\r\n\t});\r\n\treturn _worker;\r\n};\r\nexport const registerHost = (store: Store<any>, dataCallback: any = null) => {\r\n\tconst worker = openWorker();\r\n\tworker.port.postMessage([\"registerHost\"]);\r\n\r\n\tworker.port.onmessage = (e: any) => {\r\n\t\tconst [msg, ...attrs] = e.data;\r\n\r\n\t\tif (msg === \"requestData\") {\r\n\t\t\tconst [id, ...states] = attrs;\r\n\t\t\tconst output: any = {};\r\n\t\t\tstates.forEach((state: string) => {\r\n\t\t\t\tif ([\"userData\"].includes(state)) return;\r\n\t\t\t\tif (state === \"changedDanmaku\") {\r\n\t\t\t\t\toutput[state] = changedDanmaku;\r\n\t\t\t\t} else {\r\n\t\t\t\t\toutput[state] = store.state[state];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tworker.port.postMessage([\r\n\t\t\t\t\"responseData\",\r\n\t\t\t\tid,\r\n\t\t\t\tJSON.stringify(output)\r\n\t\t\t]);\r\n\t\t}\r\n\t\tif (msg === \"sendUp\") {\r\n\t\t\tif (dataCallback instanceof Function) dataCallback(msg, attrs);\r\n\t\t\tchangedDanmaku = [];\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport const registerClient = (requireArray: Array<any>, callback: any) => {\r\n\tconst worker = openWorker();\r\n\tworker.port.postMessage([\"registerClient\", ...requireArray]);\r\n\tworker.port.onmessage = (e: any) => {\r\n\t\tconst [msg, data] = e.data;\r\n\t\tif (msg === \"response\") {\r\n\t\t\tcallback(JSON.parse(data));\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport const closeWorker = () => {\r\n\tif (!_worker) {\r\n\t\treturn;\r\n\t}\r\n\t_worker.port.postMessage([\"close\"]);\r\n\t_worker.port.close();\r\n\t_worker = null;\r\n};\r\n","import { robots } from \"@front/util_function/system\";\r\nimport {\r\n\trobotGetters,\r\n\tgetContent,\r\n\tgetUID,\r\n\tgetDanmakuType\r\n} from \"@front/components/danmakuFlow/utils/getter\";\r\nimport { removePunctuation } from \"@front/util_function/base\";\r\nconst waitList: any = [];\r\nlet readObj: any = null;\r\nlet reading = false;\r\n\r\nexport const read = ({\r\n\trtype,\r\n\tapi,\r\n\tspeed,\r\n\tvolume,\r\n\tdanmaku,\r\n\trules,\r\n\tcomboReading,\r\n\tfilters = []\r\n}: any) => {\r\n\tlet content = \"\";\r\n\tif (!rules) {\r\n\t\treturn;\r\n\t}\r\n\tlet contentI = \"\";\r\n\tif (getDanmakuType(danmaku) === 1000) {\r\n\t\tcontentI = getContent(danmaku);\r\n\t\tfilters.forEach((filter: any) => {\r\n\t\t\tcontentI = contentI.replaceAll(filter, \"\");\r\n\t\t});\r\n\t\tif (!removePunctuation(contentI).replaceAll(\" \", \"\")) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (\r\n\t\t\tcomboReading &&\r\n\t\t\treadObj &&\r\n\t\t\tgetDanmakuType(readObj) === 1000 &&\r\n\t\t\tgetUID(danmaku) === getUID(readObj)\r\n\t\t) {\r\n\t\t\tcontent = contentI;\r\n\t\t}\r\n\t}\r\n\tif (!content) {\r\n\t\trules.forEach((rule: any) => {\r\n\t\t\tswitch (rule.type) {\r\n\t\t\t\tcase \"text\":\r\n\t\t\t\t\tcontent += rule.value;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"variable\":\r\n\t\t\t\t\tif (rule.value === \"getContent\" && contentI) {\r\n\t\t\t\t\t\tcontent += contentI;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\tif (robotGetters[rule.value]) {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tcontent += robotGetters[rule.value](danmaku);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tif (!content) {\r\n\t\treturn;\r\n\t}\r\n\tconst data = {\r\n\t\trtype,\r\n\t\tapi,\r\n\t\tspeed,\r\n\t\tvolume,\r\n\t\ttext: content,\r\n\t\torigin: danmaku\r\n\t};\r\n\tif (reading) {\r\n\t\tif (waitList.length >= 10) {\r\n\t\t\twaitList.splice(1);\r\n\t\t}\r\n\t\twaitList.push(data);\r\n\t} else {\r\n\t\trealRead(data);\r\n\t}\r\n};\r\n\r\nexport const realRead = (data: any) => {\r\n\treading = true;\r\n\treadObj = data.origin;\r\n\tlet reader: any = robots.default;\r\n\tif (data.rtype) {\r\n\t\t// @ts-ignore\r\n\t\treader = robots[data.rtype] || robots.default;\r\n\t}\r\n\treader(data)\r\n\t\t.catch((e: any) => {\r\n\t\t\tconsole.error(e);\r\n\t\t})\r\n\t\t.finally(() => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\treading = false;\r\n\t\t\t\tif (waitList[0]) {\r\n\t\t\t\t\trealRead(waitList.splice(0, 1)[0]);\r\n\t\t\t\t}\r\n\t\t\t}, 500);\r\n\t\t});\r\n};\r\n","<template>\r\n\t<div class=\"list\">\r\n\t\t<div class=\"list-item\" :class=\"{selected:selected===i}\" v-for=\"i in list\" :key=\"i.id\">\r\n\t\t\t<span class=\"list-item-title\">{{i.label}}</span>\r\n\t\t\t<span class=\"list-item-icon\"><span v-for=\"(a,index) in action\" :key=\"index\" :class=\"a.icon\" @click=\"a.action(i)\" /></span>\r\n\t\t</div>\r\n\t\t<div v-if=\"list.length===0\" class=\"empty\">{{emptytip}}</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"list\",\r\n\tprops: {\r\n\t\tlist: {\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\taction: {\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tselected: {\r\n\t\t\tdefault: \"\"\r\n\t\t},\r\n\t\temptytip: {\r\n\t\t\tdefault: \"空空如也\"\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n@import \"@front/styles/scrollbar.scss\";\r\n.list {\r\n\tborder: $--border-base;\r\n\tborder-radius: $--border-radius-base;\r\n\tbackground-color: $--border-color-lighter;\r\n\tcolor: $--color-text-regular;\r\n\tposition: relative;\r\n\toverflow-y: scroll;\r\n\tbox-sizing: border-box;\r\n\t@include scrollbarDark();\r\n\t.list-item {\r\n\t\tmargin: 5px 5px;\r\n\t\tbackground-color: white;\r\n\t\tbox-shadow: $--box-shadow-base;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 5px;\r\n\t\t&.selected,\r\n\t\t&:hover {\r\n\t\t\tcolor: $--color-primary-light-3;\r\n\t\t\tbox-shadow: 0 2px 4px rgba($--color-primary, 0.12),\r\n\t\t\t\t0 0 6px rgba($--color-primary, 0.04);\r\n\t\t}\r\n\t\t.list-item-icon > span {\r\n\t\t\tcolor: $--color-text-secondary;\r\n\t\t\tcursor: pointer;\r\n\t\t\t&:hover {\r\n\t\t\t\tcolor: $--color-primary-light-3;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.empty {\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttop: 40%;\r\n\t\ttransform: translateX(-50%) translateY(-50%);\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"list\",\r\n\tprops: {\r\n\t\tlist: {\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\taction: {\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tselected: {\r\n\t\t\tdefault: \"\"\r\n\t\t},\r\n\t\temptytip: {\r\n\t\t\tdefault: \"空空如也\"\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./base.vue?vue&type=template&id=648f4714&scoped=true\"\nimport script from \"./base.vue?vue&type=script&lang=ts\"\nexport * from \"./base.vue?vue&type=script&lang=ts\"\n\nimport \"./base.vue?vue&type=style&index=0&id=648f4714&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-648f4714\"\n\nexport default script","export interface Status {\r\n\tstep: string;\r\n\tavaliable: boolean;\r\n\tconnected: boolean;\r\n\tunderway: boolean;\r\n\tdanmaku: boolean;\r\n}\r\nexport const status = (): Status => {\r\n\treturn {\r\n\t\tstep: \"offline\",\r\n\t\tavaliable: true,\r\n\t\tconnected: false,\r\n\t\tunderway: false,\r\n\t\tdanmaku: false\r\n\t};\r\n};\r\n\r\nexport interface Session {\r\n\tstreamName: string;\r\n\tstreamPullAddress: string;\r\n\tstreamPushAddress: Array<string>;\r\n\tpanoramic: boolean;\r\n\tinterval: number;\r\n\trtmpServer: string;\r\n\tstreamKey: string;\r\n}\r\n\r\nexport const session = (): Session => {\r\n\treturn {\r\n\t\tstreamName: \"\",\r\n\t\tstreamPullAddress: \"\",\r\n\t\tstreamPushAddress: [],\r\n\t\tpanoramic: false,\r\n\t\tinterval: 5000,\r\n\t\trtmpServer: \"\",\r\n\t\tstreamKey: \"\"\r\n\t};\r\n};\r\n\r\nexport interface Url {\r\n\turl: string;\r\n\tbitrate: number;\r\n\tqualityType: string;\r\n\tqualityName: string;\r\n}\r\n\r\nexport const url = (): Url => {\r\n\treturn {\r\n\t\turl: \"\",\r\n\t\tbitrate: 0,\r\n\t\tqualityType: \"\",\r\n\t\tqualityName: \"\"\r\n\t};\r\n};\r\n\r\nexport interface Encodec {\r\n\tstreamUrl: Url;\r\n\tresolution: string;\r\n\tframeRate: number;\r\n\ttemplate: string;\r\n}\r\n\r\nexport const encodec = (): Encodec => {\r\n\treturn {\r\n\t\tstreamUrl: url(),\r\n\t\tresolution: \"\",\r\n\t\tframeRate: 0,\r\n\t\ttemplate: \"\"\r\n\t};\r\n};\r\n","export interface Data {\r\n\taccount: string;\r\n\tpassword: string;\r\n}\r\n\r\nexport const data = (): Data => {\r\n\treturn {\r\n\t\taccount: \"\",\r\n\t\tpassword: \"\"\r\n\t};\r\n};\r\n\r\nexport interface Profile {\r\n\tuserID: number;\r\n\tnickname: string;\r\n\tsignature: string;\r\n\tverifiedText: string;\r\n\tfollowingCount: number;\r\n\tfansCount: number;\r\n\tcontributeCount: number;\r\n\tavatar: string;\r\n\tavatarFrame: string;\r\n}\r\n\r\nexport const profile = (): Profile => {\r\n\treturn {\r\n\t\tuserID: 0,\r\n\t\tnickname: \"\",\r\n\t\tsignature: \"\",\r\n\t\tverifiedText: \"\",\r\n\t\tfollowingCount: 0,\r\n\t\tfansCount: 0,\r\n\t\tcontributeCount: 0,\r\n\t\tavatar: \"\",\r\n\t\tavatarFrame: \"\"\r\n\t};\r\n};\r\n\r\nexport interface Session {\r\n\tuserID: number;\r\n\tsecurityKey: string;\r\n\tserviceToken: string;\r\n\tdeviceID: string;\r\n\tcookies: Array<string>;\r\n}\r\n\r\nexport const session = (): Session => {\r\n\treturn {\r\n\t\tuserID: 0,\r\n\t\tsecurityKey: \"\",\r\n\t\tserviceToken: \"\",\r\n\t\tdeviceID: \"\",\r\n\t\tcookies: []\r\n\t};\r\n};\r\n","<template>\r\n\t<div class=\"iconCounter\">\r\n\t\t<span :class=\"icon\" />{{num}}\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"iconCounter\",\r\n\tprops: {\r\n\t\ticon: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"el-icon-bell\"\r\n\t\t},\r\n\t\tnum: {\r\n\t\t\tdefault: 0\r\n\t\t},\r\n\t\tincreaseAni: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tdecreaseAni: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tnum(n, o) {\r\n\t\t\tthis.ani(n, o);\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tani(n: any, o: any) {\r\n\t\t\tif (typeof n === \"string\" || typeof n !== typeof o) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n<style scoped lang='scss'>\r\n.iconCounter {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: space-between;\r\n\tmargin-right: 8px;\r\n\tuser-select: none;\r\n\twhite-space: nowrap;\r\n\tspan {\r\n\t\tmargin-right: 2px;\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"iconCounter\",\r\n\tprops: {\r\n\t\ticon: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"el-icon-bell\"\r\n\t\t},\r\n\t\tnum: {\r\n\t\t\tdefault: 0\r\n\t\t},\r\n\t\tincreaseAni: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tdecreaseAni: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tnum(n, o) {\r\n\t\t\tthis.ani(n, o);\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tani(n: any, o: any) {\r\n\t\t\tif (typeof n === \"string\" || typeof n !== typeof o) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./iconCounter.vue?vue&type=template&id=048bd500&scoped=true\"\nimport script from \"./iconCounter.vue?vue&type=script&lang=ts\"\nexport * from \"./iconCounter.vue?vue&type=script&lang=ts\"\n\nimport \"./iconCounter.vue?vue&type=style&index=0&id=048bd500&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-048bd500\"\n\nexport default script","<template>\r\n\t<div id=\"sidebar\">\r\n\t\t<div class=\"mainTitle\">{{ common.title+common.subTitle }}</div>\r\n\t\t<div class=\"subTitle\">版本：{{ common.version }}</div>\r\n\t\t<div class=\"sidebarList\">\r\n\t\t\t<div class=\"listBlock\" v-for=\"item in contents\" :key=\"item.meta.label\">\r\n\t\t\t\t<div class=\"blockTitle\">{{ item.meta.label }}</div>\r\n\t\t\t\t<div class=\"blockRow\" v-for=\"row in item.children\" :key=\"row.meta.label\" :class=\"{active:$route.name==row.name,disabled:row.meta.disabled?row.meta.disabled():false}\" @click=\"route(row)\">\r\n\t\t\t\t\t<span class=\"rowIcon\" :class=\"row.meta.icon\" />{{ row.meta.label }}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"footer\">{{ footer.wrap }}</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport { footer, common } from \"@front/texts\";\r\nimport { event } from \"@front/util_function/eventBus\";\r\nimport content from \"@front/router/clientRouter\";\r\nexport default defineComponent({\r\n\tname: \"sidebarBase\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tevent\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tfooter,\r\n\t\tcommon,\r\n\t\tcontents() {\r\n\t\t\treturn content.slice(1).filter(i => !i.hidden);\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\troute(row: any) {\r\n\t\t\tif (row.meta.disabled && row.meta.disabled()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tevent.emit(\"routeChange\", { name: row.name });\r\n\t\t\tif (row.meta.action === \"router\") {\r\n\t\t\t\tthis.$router.push({ name: row.name });\r\n\t\t\t}\r\n\t\t\tif (typeof row.meta.action === \"function\") {\r\n\t\t\t\trow.meta.action();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"@front/styles/variables.scss\";\r\n\r\n@import \"@front/styles/scrollbar.scss\";\r\n@font-face {\r\n\tfont-family: \"包图小白体\";\r\n\tsrc: url(\"/fonts/包图小白体.ttf\") format(\"truetype\");\r\n}\r\n\r\n#sidebar {\r\n\t// position: absolute;\r\n\tbox-sizing: border-box;\r\n\tflex-shrink: 0;\r\n\tflex-grow: 0;\r\n\theight: 100%;\r\n\twidth: 210px;\r\n\tpadding: 30px 0px 8px 20px;\r\n\tbackground-color: $--color-primary;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tcolor: white;\r\n\tuser-select: none;\r\n\t.mainTitle {\r\n\t\tpadding-left: 65px;\r\n\t\tpadding-right: 15px;\r\n\t\tfont-size: 22px;\r\n\t\tline-height: 25px;\r\n\t\tflex-shrink: 0;\r\n\t\tfont-family: 包图小白体;\r\n\t\tfont-weight: 700px;\r\n\t\tbackground-image: url(\"/imgs/common/logo.gif\");\r\n\t\tbackground-size: auto 110%;\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tbackground-position-x: 0px;\r\n\t}\r\n\t.subTitle {\r\n\t\tpadding: 8px 25px 8px 15px;\r\n\t\tfont-size: 20px;\r\n\t\tflex-shrink: 0;\r\n\t\tfont-family: 包图小白体;\r\n\t}\r\n\t.footer {\r\n\t\tfont-size: $--font-size-extra-small;\r\n\t\twhite-space: pre-line;\r\n\t\tcolor: rgba($color: white, $alpha: 0.7);\r\n\t\tflex-shrink: 0;\r\n\t\tpadding: 8px 25px 0px 15px;\r\n\t}\r\n\t.sidebarList {\r\n\t\tflex-grow: 1;\r\n\t\tflex-shrink: 1;\r\n\t\tpadding: 20px 0px 15px 0px;\r\n\t\tmargin-right: 2px;\r\n\t\toverflow-y: auto;\r\n\t\t@include scrollbarBase();\r\n\t\t.listBlock {\r\n\t\t\tmargin-bottom: 16px;\r\n\t\t\toverflow: hidden;\r\n\t\t\t.blockTitle {\r\n\t\t\t\tfont-size: $--font-size-extra-small;\r\n\t\t\t\tpadding: 0px 16px 4px 16px;\r\n\t\t\t\tcolor: rgba($color: white, $alpha: 0.7);\r\n\t\t\t}\r\n\t\t\t.blockRow {\r\n\t\t\t\tfont-size: $--font-size-base;\r\n\t\t\t\tpadding: 6px 12px;\r\n\t\t\t\tmargin: 6px 4px;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tletter-spacing: 1px;\r\n\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t&:hover,\r\n\t\t\t\t&.active {\r\n\t\t\t\t\tbackground-color: rgba(255, 255, 255, 0.2);\r\n\t\t\t\t}\r\n\t\t\t\t&.disabled {\r\n\t\t\t\t\topacity: 0.5;\r\n\t\t\t\t\tcursor: not-allowed;\r\n\t\t\t\t\t&:hover {\r\n\t\t\t\t\t\tbackground-color: transparent;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.rowIcon {\r\n\t\t\t\t\tpadding-right: 8px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport { footer, common } from \"@front/texts\";\r\nimport { event } from \"@front/util_function/eventBus\";\r\nimport content from \"@front/router/clientRouter\";\r\nexport default defineComponent({\r\n\tname: \"sidebarBase\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tevent\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tfooter,\r\n\t\tcommon,\r\n\t\tcontents() {\r\n\t\t\treturn content.slice(1).filter(i => !i.hidden);\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\troute(row: any) {\r\n\t\t\tif (row.meta.disabled && row.meta.disabled()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tevent.emit(\"routeChange\", { name: row.name });\r\n\t\t\tif (row.meta.action === \"router\") {\r\n\t\t\t\tthis.$router.push({ name: row.name });\r\n\t\t\t}\r\n\t\t\tif (typeof row.meta.action === \"function\") {\r\n\t\t\t\trow.meta.action();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./sidebarBase.vue?vue&type=template&id=34f695a2&scoped=true\"\nimport script from \"./sidebarBase.vue?vue&type=script&lang=ts\"\nexport * from \"./sidebarBase.vue?vue&type=script&lang=ts\"\n\nimport \"./sidebarBase.vue?vue&type=style&index=0&id=34f695a2&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-34f695a2\"\n\nexport default script","export interface TempInfo {\r\n\temojiTester: string;\r\n\temojiMatcher: any;\r\n\tsuperChatArray: Array<any>;\r\n\tsuperChatID: any;\r\n\tsuperChatBlock: any;\r\n\tlikeList: any;\r\n}\r\n\r\nexport const tempInfo = () => {\r\n\treturn {\r\n\t\temojiTester: \"\",\r\n\t\temojiMatcher: {},\r\n\t\tsuperChatArray: [],\r\n\t\tsuperChatID: false,\r\n\t\tsuperChatBlock: null,\r\n\t\tlikeList: {}\r\n\t};\r\n};\r\n\r\nexport interface LikeTemp {\r\n\tenterTime: number;\r\n\tuserID: number;\r\n\tisLive: boolean;\r\n}\r\n\r\nexport const likeTemp = () => {\r\n\treturn {\r\n\t\tenterTime: 0,\r\n\t\tuserID: 0,\r\n\t\tisLive: false\r\n\t};\r\n};\r\n","<template>\r\n\t<div class=\"img-input-text\" :style=\"{'--fit':fit}\">\r\n\t\t<span class=\"hint\" style=\"margin-right:8px\">{{modelValue?getBaseName(modelValue):\"未选择图片\"}}</span>\r\n\t\t<el-button @click=\"getFile\" size=\"mini\" type=\"primary\">选择图片</el-button>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport { load } from \"@front/util_function/file\";\r\nimport { uploadImage, path } from \"@front/util_function/system\";\r\nexport default defineComponent({\r\n\tname: \"imgInputText\",\r\n\tprops: {\r\n\t\tmodelValue: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"\"\r\n\t\t},\r\n\t\tfit: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"cover\"\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgetBaseName(url: string) {\r\n\t\t\treturn path.basename(url);\r\n\t\t},\r\n\t\tasync getFile() {\r\n\t\t\tconst file: any = await load(\".jpg,.png,.gif\");\r\n\t\t\tif (file) {\r\n\t\t\t\tconst url = await uploadImage(file.path);\r\n\t\t\t\tthis.$emit(\r\n\t\t\t\t\t\"update:modelValue\",\r\n\t\t\t\t\t`/configFiles/images/${path.basename(url)}`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style lang='scss'>\r\n.img-input-text {\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\talign-content: center;\r\n\tvertical-align: middle;\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport { load } from \"@front/util_function/file\";\r\nimport { uploadImage, path } from \"@front/util_function/system\";\r\nexport default defineComponent({\r\n\tname: \"imgInputText\",\r\n\tprops: {\r\n\t\tmodelValue: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"\"\r\n\t\t},\r\n\t\tfit: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"cover\"\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgetBaseName(url: string) {\r\n\t\t\treturn path.basename(url);\r\n\t\t},\r\n\t\tasync getFile() {\r\n\t\t\tconst file: any = await load(\".jpg,.png,.gif\");\r\n\t\t\tif (file) {\r\n\t\t\t\tconst url = await uploadImage(file.path);\r\n\t\t\t\tthis.$emit(\r\n\t\t\t\t\t\"update:modelValue\",\r\n\t\t\t\t\t`/configFiles/images/${path.basename(url)}`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./imgInpuText.vue?vue&type=template&id=345d68b2\"\nimport script from \"./imgInpuText.vue?vue&type=script&lang=ts\"\nexport * from \"./imgInpuText.vue?vue&type=script&lang=ts\"\n\nimport \"./imgInpuText.vue?vue&type=style&index=0&id=345d68b2&lang=scss\"\nscript.render = render\n\nexport default script","import {\r\n\tgetTime,\r\n\tgetMedal,\r\n\tgetAvatar,\r\n\tgetNickName,\r\n\tgetContent,\r\n\tgetUserInfo,\r\n\tgetGift\r\n} from \"./getter\";\r\nimport { RootState } from \"@front/store/state\";\r\nimport { danmaku } from \"@/electron_browser/datas\";\r\nexport const hasTime = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\tif (!danmaku) danmaku = this;\r\n\treturn Boolean(getTime(danmaku));\r\n};\r\n\r\nexport const hasMedal = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\tif (!danmaku) danmaku = this;\r\n\treturn Boolean(getMedal(danmaku).clubName);\r\n};\r\n\r\nexport const hasAvatar = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\tif (!danmaku) danmaku = this;\r\n\treturn Boolean(getAvatar(danmaku));\r\n};\r\n\r\nexport const hasNickName = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\tif (!danmaku) danmaku = this;\r\n\treturn Boolean(getNickName(danmaku));\r\n};\r\n\r\nexport const hasContent = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\tif (!danmaku) danmaku = this;\r\n\treturn Boolean(getContent(danmaku));\r\n};\r\n\r\nexport const hasGift = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\tif (!danmaku) danmaku = this;\r\n\treturn danmaku.type === 1005;\r\n};\r\n\r\nexport const isManager = function(danmaku: any, state: RootState) {\r\n\t//@ts-ignore\r\n\tif (!danmaku) danmaku = this;\r\n\t//@ts-ignore\r\n\tif (!state) state = this.$store.state;\r\n\treturn Boolean(\r\n\t\tstate.managerList.find(\r\n\t\t\ti => i.userInfo.userID === getUserInfo(danmaku).userID\r\n\t\t)\r\n\t);\r\n};\r\n\r\nexport const isOwner = function(danmaku: any, state: RootState) {\r\n\t//@ts-ignore\r\n\tif (!danmaku) danmaku = this;\r\n\t//@ts-ignore\r\n\tif (!state) state = this.$store.state;\r\n\treturn Boolean(state.userSession.userID === getUserInfo(danmaku).userID);\r\n};\r\n\r\nexport const isNormalDanmaku = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\tif (!danmaku) danmaku = this;\r\n\treturn [1000, 1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008].includes(\r\n\t\tdanmaku.type\r\n\t);\r\n};\r\n\r\nexport const sameGift = function(danmakuA: any, danmakuB: any) {\r\n\treturn (\r\n\t\tgetGift(danmakuA).giftDetail.giftID ===\r\n\t\tgetGift(danmakuB).giftDetail.giftID\r\n\t);\r\n};\r\n\r\nexport const samePerson = function(danmakuA: any, danmakuB: any) {\r\n\treturn getUserInfo(danmakuA).userID === getUserInfo(danmakuB).userID;\r\n};\r\n\r\nexport const basicComponentTester = {\r\n\t1000: [hasNickName, hasAvatar, hasMedal, hasContent, hasTime],\r\n\t1001: [hasNickName, hasAvatar, hasMedal, hasTime],\r\n\t1002: [hasNickName, hasAvatar, hasMedal, hasTime],\r\n\t1003: [hasNickName, hasAvatar, hasMedal, hasTime],\r\n\t1004: [hasNickName, hasTime],\r\n\t1005: [hasNickName, hasAvatar, hasMedal, hasTime],\r\n\t1006: [],\r\n\t1007: [hasNickName, hasTime]\r\n};\r\n","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=4442f2b5&scoped=true&lang=scss\"","import { randomId } from \"@front/util_function/base\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nexport const isOnline = (): Promise<boolean> => {\r\n\treturn new Promise(resolve => {\r\n\t\tconst timer = setTimeout(() => {\r\n\t\t\tresolve(false);\r\n\t\t}, 3000);\r\n\t\tgetWs().onopen = () => {\r\n\t\t\tclearTimeout(timer);\r\n\t\t\tresolve(true);\r\n\t\t};\r\n\t});\r\n};\r\n\r\n/**\r\n * @name ws链接\r\n * @returns String\r\n */\r\nexport const getUrl = (): string => {\r\n\treturn process.env.NODE_ENV === \"production\"\r\n\t\t? window.location.hostname\r\n\t\t: \"localhost\";\r\n};\r\n\r\nexport const setHeartBeat = (ws: WebSocket | null) => {\r\n\tif (!ws) return;\r\n\tconst timer = setInterval(() => {\r\n\t\tif (ws.readyState === 1) {\r\n\t\t\tws.send(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\trole: \"工具箱\",\r\n\t\t\t\t\ttype: 1\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tclearInterval(timer);\r\n\t\t}\r\n\t}, 5000);\r\n\tws.addEventListener(\"close\", () => {\r\n\t\tclearInterval(timer);\r\n\t});\r\n};\r\n\r\nexport const getWs = (): WebSocket => {\r\n\treturn new WebSocket(`ws://${getUrl()}:15368`);\r\n};\r\n\r\nexport const getOpenedWs = (): Promise<WebSocket> => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst ws = getWs();\r\n\t\tws.onopen = () => {\r\n\t\t\tresolve(ws);\r\n\t\t};\r\n\t\tws.onerror = () => {\r\n\t\t\treject(ws);\r\n\t\t};\r\n\t});\r\n};\r\n\r\n// 发送打印黑名单，1：心跳\r\nconst ignoreSendList = [1, 6];\r\n// 接受打印黑名单,2:登陆\r\nconst ignoreReceiveList = [2, 6];\r\n// 错误日志名单 10：请求的json解析错误 11：请求type无效 12：请求data无效 13：处理请求时出现错误 14：需要登陆\r\nconst errorList = [10, 11, 12, 13, 14];\r\n\r\nconst ignoreInProduction = [3, 4, 5, 109, 102];\r\nif (process.env.NODE_ENV === \"production\") {\r\n\tignoreSendList.push(...ignoreInProduction);\r\n\tignoreReceiveList.push(...ignoreReceiveList);\r\n}\r\n/**\r\n * @name 发送ws请求 参考 https://github.com/ACFUN-FOSS/acfunlive-backend/blob/main/doc/%E5%90%8E%E7%AB%AFWebSocket%E6%8E%A5%E5%8F%A3.md\r\n * @param method 请求名称，只用于做标识 实际请求放在data.type里\r\n * @param data\r\n * @param timeout 超时时间\r\n * @param once 请求完后是否关闭ws\r\n * @param ws 是否复用ws\r\n * @returns Promise<Object>\r\n */\r\nexport const request = ({\r\n\tmethod,\r\n\tdata,\r\n\ttimeout,\r\n\tonce,\r\n\thideMsg,\r\n\tprint,\r\n\tws\r\n}: any): Promise<any> => {\r\n\ttimeout = timeout || 12000;\r\n\tif (once === undefined) {\r\n\t\tonce = true;\r\n\t}\r\n\tif (print === undefined) {\r\n\t\tprint = true;\r\n\t}\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tif (!ws) {\r\n\t\t\tws = getWs();\r\n\t\t}\r\n\t\tconst requestID = String(randomId(10));\r\n\t\tconst timer = setTimeout(() => {\r\n\t\t\tws.removeEventListener(\"message\", judge);\r\n\t\t\tws.close();\r\n\t\t\tif (!ignoreReceiveList.includes(data.type) && !hideMsg) {\r\n\t\t\t\tElMessage.error(`${method} 请求超时`);\r\n\t\t\t\treject(\r\n\t\t\t\t\tnew Error(`${method} timeout!,data:${JSON.stringify(data)}`)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}, timeout);\r\n\t\tconst judge = (e: any) => {\r\n\t\t\tclearTimeout(timer);\r\n\t\t\tconst data = JSON.parse(e.data);\r\n\t\t\tif (data.requestID === requestID) {\r\n\t\t\t\tif (errorList.includes(data.result) && !hideMsg) {\r\n\t\t\t\t\tElMessage.error(`${method} 请求失败： ${data.error}`);\r\n\t\t\t\t\treject(new Error(JSON.stringify(data)));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!ignoreSendList.includes(data.type) && print && !hideMsg) {\r\n\t\t\t\t\tconsole.log(`======res===${method}=====`);\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t}\r\n\t\t\t\tconst result = data.data || {};\r\n\t\t\t\tif (once) {\r\n\t\t\t\t\tws.close();\r\n\t\t\t\t\tresolve(result);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\t...result,\r\n\t\t\t\t\t\tws\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tws.addEventListener(\"message\", judge);\r\n\t\tconst open = () => {\r\n\t\t\tconst role = (window as any).role || \"无\";\r\n\t\t\tif (!ignoreReceiveList.includes(data.type) && print && !hideMsg) {\r\n\t\t\t\tconsole.log(`======send===${method}=====`);\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t}\r\n\t\t\tws.send(JSON.stringify({ role, ...data, requestID }));\r\n\t\t};\r\n\t\tif (ws.readyState !== 1) {\r\n\t\t\tws.onopen = open;\r\n\t\t} else {\r\n\t\t\topen();\r\n\t\t}\r\n\t});\r\n};\r\n","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./base.vue?vue&type=style&index=0&id=40465ea6&scoped=true&lang=scss\"","import merge from \"lodash/merge\";\r\nexport const randomId = (length = 6) => {\r\n\tlet Num = \"\";\r\n\tfor (let i = 0; i < length; i++) {\r\n\t\tNum += Math.floor(Math.random() * 10);\r\n\t}\r\n\treturn Num;\r\n};\r\n\r\nexport const removePunctuation = (str: string) => {\r\n\treturn str.replaceAll(/[!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~]/g, \"\");\r\n};\r\n\r\nexport const removePunctuationSpace = (str: string) => {\r\n\treturn str.replaceAll(/[!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~]/g, \" \");\r\n};\r\n\r\nexport const escapeRegExp = (string: string) => {\r\n\treturn string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\r\n};\r\n\r\nexport const basename = (path: string) => {\r\n\treturn path.split(\"/\").reverse()[0];\r\n};\r\n\r\nexport const sleep = (time: any) => {\r\n\treturn new Promise(resolve => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tresolve(1);\r\n\t\t}, time);\r\n\t});\r\n};\r\n\r\nexport const assign = (dist: any, src: any) => {\r\n\treturn merge(dist, src);\r\n};\r\n\r\nexport const isUrl = (str: string) => {\r\n\tif (!str) {\r\n\t\treturn false;\r\n\t}\r\n\treturn /(https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})/gi.test(\r\n\t\tstr\r\n\t);\r\n};\r\n\r\nexport const registerRole = (name: string) => {\r\n\tconst win: any = window;\r\n\twin.role = name;\r\n};\r\n","import { randomId } from \"./base\";\r\nexport const load = (filetype = \"*\") => {\r\n\treturn new Promise(resolve => {\r\n\t\tconst id = `file-${randomId()}`;\r\n\t\tconst fileEle = document.createElement(\"input\");\r\n\t\tfileEle.type = \"file\";\r\n\t\tfileEle.accept = filetype;\r\n\t\tfileEle.click();\r\n\t\tdocument.body.onfocus = () => {\r\n\t\t\tdocument.body.onfocus = null;\r\n\r\n\t\t\tfileEle.onchange = () => {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tconst file = fileEle.files[0];\r\n\t\t\t\tfileEle.remove();\r\n\t\t\t\tif (file) {\r\n\t\t\t\t\tresolve(file);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresolve(false);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tfileEle.remove();\r\n\t\t\t\tresolve(false);\r\n\t\t\t}, 5000);\r\n\t\t};\r\n\t});\r\n};\r\n\r\nexport const loadAsText = (fileType = \"*\") => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tload(fileType)\r\n\t\t\t.then((file: any) => {\r\n\t\t\t\tconst reader = new FileReader();\r\n\t\t\t\treader.onload = (e: any) => {\r\n\t\t\t\t\tresolve(reader.result);\r\n\t\t\t\t};\r\n\t\t\t\treader.readAsText(file);\r\n\t\t\t})\r\n\t\t\t.catch(reject);\r\n\t});\r\n};\r\n","import { isElectron } from \"@front/util_function/electron\";\r\nimport { randomId, removePunctuationSpace } from \"@front/util_function/base\";\r\nexport const path = isElectron() ? window.require(\"path\") : {};\r\nconst { remote, ipcRenderer }: any = isElectron()\r\n\t? window.require(\"electron\")\r\n\t: {};\r\nexport { ipcRenderer };\r\nexport const win = remote?.getCurrentWindow();\r\nexport const minimize = () => {\r\n\tif (isElectron()) {\r\n\t\twin?.minimize();\r\n\t}\r\n};\r\n\r\nexport const startApplet = (appletConfig: any) => {\r\n\tconst { name, cname, configurations } = appletConfig;\r\n\tif (isElectron()) {\r\n\t\tipcRenderer?.send(\r\n\t\t\t\"startApplet\",\r\n\t\t\tJSON.stringify({ name, cname, configurations })\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport const close = () => {\r\n\tif (isElectron()) {\r\n\t\twin?.close();\r\n\t}\r\n};\r\nexport const log = (msg: any) => {\r\n\tif (isElectron()) {\r\n\t\tipcRenderer?.send(\"log\", String(msg));\r\n\t}\r\n};\r\n\r\nexport const setTop = (isTop: boolean) => {\r\n\tif (isElectron()) {\r\n\t\tipcRenderer?.send(\r\n\t\t\t\"mainwin_setTop\",\r\n\t\t\tJSON.stringify({\r\n\t\t\t\tisTop\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport const setIgnoreMouseEvent = (ignore: boolean) => {\r\n\tif (isElectron()) {\r\n\t\tipcRenderer?.send(\r\n\t\t\t\"mainwin_setIgnoreMouseEvent\",\r\n\t\t\tJSON.stringify({\r\n\t\t\t\tignore\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport const setResizeable = (isResizeable: boolean) => {\r\n\tif (isElectron()) {\r\n\t\tipcRenderer?.send(\r\n\t\t\t\"mainwin_setResizeable\",\r\n\t\t\tJSON.stringify({\r\n\t\t\t\tisResizeable\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport const restore = () => {\r\n\tif (isElectron()) {\r\n\t\twin?.restore();\r\n\t}\r\n};\r\n\r\nexport const backendKill = () => {\r\n\tif (isElectron()) {\r\n\t\tipcRenderer?.send(\"backend_kill\");\r\n\t}\r\n};\r\n\r\nexport const backendRestart = () => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (!isElectron()) {\r\n\t\t\t\tthrow new Error(\"no electron!\");\r\n\t\t\t}\r\n\t\t\tipcRenderer?.send(\"backend_restart\");\r\n\t\t\tipcRenderer?.once(\"restart_complete\", (e: any, args: any) => {\r\n\t\t\t\tif (args !== \"#error\") {\r\n\t\t\t\t\tresolve(args);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"restart failed!\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\treject(error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const backendInit = () => {\r\n\tif (isElectron()) {\r\n\t\tipcRenderer?.send(\"backend_init\");\r\n\t}\r\n};\r\n\r\nexport const launch = (path: any) => {\r\n\tif (!path) return;\r\n\tif (isElectron()) {\r\n\t\tipcRenderer?.send(\"backend_launch\", path);\r\n\t}\r\n};\r\n\r\nexport const save = (data: any) => {\r\n\tif (isElectron()) {\r\n\t\tipcRenderer?.send(\"backend_save\", JSON.stringify(data));\r\n\t}\r\n};\r\n\r\nexport const reload = () => {\r\n\tif (isElectron()) {\r\n\t\tipcRenderer?.send(\"mainwin_reload\");\r\n\t}\r\n};\r\n\r\nexport const load = (data: any) => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (!isElectron()) {\r\n\t\t\t\tthrow new Error(\"no electron!\");\r\n\t\t\t}\r\n\t\t\tipcRenderer?.send(\"backend_load\", JSON.stringify(data));\r\n\t\t\tipcRenderer?.once(\"load_complete\", (e: any, args: any) => {\r\n\t\t\t\tif (args !== \"#error\") {\r\n\t\t\t\t\tresolve(args);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"load file failed!\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\treject(error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const copy = ({ srcUrl, distUrl }: any) => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (!isElectron()) {\r\n\t\t\t\tthrow new Error(\"no electron!\");\r\n\t\t\t}\r\n\t\t\tipcRenderer?.send(\r\n\t\t\t\t\"backend_copy\",\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tsrcUrl,\r\n\t\t\t\t\tdistUrl\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tipcRenderer?.once(\"copy_file_complete\", (e: any, args: any) => {\r\n\t\t\t\tif (args !== \"#error\") {\r\n\t\t\t\t\tresolve(args);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"copy file failed!\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\treject(error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const uploadImage = (imageUrl: string) => new Promise((resolve, reject) => {\r\n\ttry {\r\n\t\tif (!isElectron()) {\r\n\t\t\tthrow new Error(\"no electron!\");\r\n\t\t}\r\n\t\tipcRenderer?.send(\r\n\t\t\t\"backend_save_with_md5\",\r\n\t\t\tJSON.stringify(({\r\n\t\t\t\tsrcUrl: imageUrl,\r\n\t\t\t\tdistUrl: \"./images\"\r\n\t\t\t}))\r\n\t\t);\r\n\t\tipcRenderer?.once(\"save_with_md5_complete\", (e: any, res: any) => {\r\n\t\t\tif (res !== \"#error\") {\r\n\t\t\t\tresolve(res);\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"save with md5 failed!\");\r\n\t\t\t}\r\n\t\t});\r\n\t} catch (e) {\r\n\t\tconsole.log(e);\r\n\t\treject(e);\r\n\t}\r\n\r\n\t// return copy({\r\n\t// \tsrcUrl: imageUrl,\r\n\t// \tdistUrl: `./images/image${randomId(12)}${path.extname(imageUrl)}`\r\n\t// });\r\n});\r\n\r\nexport const uploadBase64Image = (b64: string) => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (!isElectron()) {\r\n\t\t\t\tthrow new Error(\"no electron!\");\r\n\t\t\t}\r\n\t\t\tipcRenderer?.send(\"backend_save_b64\", b64);\r\n\t\t\tipcRenderer?.once(\"save_b64_complete\", (e: any, args: any) => {\r\n\t\t\t\tif (args !== \"#error\") {\r\n\t\t\t\t\tresolve(args);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"load file failed!\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\treject(error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const saveConfig = (data: any) => {\r\n\tif (!isElectron()) {\r\n\t\tthrow new Error(\"no electron!\");\r\n\t}\r\n\tipcRenderer?.send(\"backend_save_config\", JSON.stringify(data));\r\n};\r\n\r\nexport const loadConfig = () => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (!isElectron()) {\r\n\t\t\t\tthrow new Error(\"no electron!\");\r\n\t\t\t}\r\n\t\t\tipcRenderer?.send(\"backend_load_config\");\r\n\t\t\tipcRenderer?.once(\"load_config_complete\", (e: any, args: any) => {\r\n\t\t\t\tif (args !== \"#error\") {\r\n\t\t\t\t\tresolve(JSON.parse(args));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"load file failed!\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\treject(error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const restoreConfig = (path: string) => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (!isElectron()) {\r\n\t\t\t\tthrow new Error(\"no electron!\");\r\n\t\t\t}\r\n\t\t\tipcRenderer?.send(\"load_backup\", path);\r\n\t\t\tipcRenderer?.once(\"load_backup_complete\", (e: any, args: any) => {\r\n\t\t\t\tif (args !== \"#error\") {\r\n\t\t\t\t\tresolve(JSON.parse(args));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"读取备份文件失败！\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\treject(error);\r\n\t\t}\r\n\t});\r\n};\r\nexport const backupConfig = () => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (!isElectron()) {\r\n\t\t\t\tthrow new Error(\"no electron!\");\r\n\t\t\t}\r\n\t\t\tipcRenderer?.send(\"save_backup\");\r\n\t\t\tipcRenderer?.once(\"save_backup_complete\", (e: any, args: any) => {\r\n\t\t\t\tif (args !== \"#error\") {\r\n\t\t\t\t\tresolve(args);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"备份文件失败！\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\treject(error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const removeCache = (data: any = []) => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (!isElectron()) {\r\n\t\t\t\tthrow new Error(\"no electron!\");\r\n\t\t\t}\r\n\t\t\tipcRenderer?.send(\"remove_cache\", JSON.stringify(data));\r\n\t\t\tipcRenderer?.once(\"remove_cache_complete\", (e: any, args: any) => {\r\n\t\t\t\tif (args !== \"#error\") {\r\n\t\t\t\t\tresolve(args);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"删除缓存失败！\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\treject(error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const getCacheSize = () => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (!isElectron()) {\r\n\t\t\t\tthrow new Error(\"no electron!\");\r\n\t\t\t}\r\n\t\t\tipcRenderer?.send(\"size_cache\");\r\n\t\t\tipcRenderer?.once(\"size_cache_complete\", (e: any, args: any) => {\r\n\t\t\t\tif (args !== \"#error\") {\r\n\t\t\t\t\tresolve(args);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"备份文件失败！\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\treject(error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const openCache = () => {\r\n\tif (!isElectron()) {\r\n\t\tthrow new Error(\"no electron!\");\r\n\t}\r\n\tipcRenderer?.send(\"open_cache\");\r\n};\r\n\r\nexport const saveSuperChat = (data: any) => {\r\n\tif (!isElectron()) {\r\n\t\tthrow new Error(\"no electron!\");\r\n\t}\r\n\tipcRenderer?.send(\"backend_save_superchat\", JSON.stringify(data));\r\n};\r\n\r\nexport const loadSuperChat = () => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (!isElectron()) {\r\n\t\t\t\tthrow new Error(\"no electron!\");\r\n\t\t\t}\r\n\t\t\tipcRenderer?.send(\"backend_load_superchat\");\r\n\t\t\tipcRenderer?.once(\r\n\t\t\t\t\"load_superchat_complete\",\r\n\t\t\t\t(e: any, args: any) => {\r\n\t\t\t\t\tif (args !== \"#error\") {\r\n\t\t\t\t\t\tresolve(JSON.parse(args));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"load file failed!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t} catch (error) {\r\n\t\t\treject(error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const getFontList = () => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (!isElectron()) {\r\n\t\t\t\tthrow new Error(\"no electron!\");\r\n\t\t\t}\r\n\t\t\tipcRenderer?.send(\"backend_font_list\");\r\n\t\t\tipcRenderer?.once(\"font_list_complete\", (e: any, args: any) => {\r\n\t\t\t\tif (args !== \"#error\") {\r\n\t\t\t\t\tresolve(JSON.parse(args));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"load font failed!\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\treject(error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const uploadFont = (fontUrl: string) => {\r\n\treturn copy({\r\n\t\tsrcUrl: fontUrl,\r\n\t\tdistUrl: `./fonts/${path.basename(fontUrl)}`\r\n\t});\r\n};\r\n\r\nexport const sendChat = (data: any) => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (!isElectron()) {\r\n\t\t\t\tthrow new Error(\"no electron!\");\r\n\t\t\t}\r\n\t\t\tipcRenderer?.send(\"send_chat\", JSON.stringify(data));\r\n\t\t\tipcRenderer?.once(\"send_chat_complete\", (e: any, args: any) => {\r\n\t\t\t\tif (args !== \"#error\") {\r\n\t\t\t\t\tresolve(args);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"send chat failed!\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\treject(error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const windowsRead = ({ speed, text, volume }: any) => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (!isElectron()) {\r\n\t\t\t\tthrow new Error(\"no electron!\");\r\n\t\t\t}\r\n\t\t\tipcRenderer?.send(\r\n\t\t\t\t\"send_voice\",\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tvolume,\r\n\t\t\t\t\tspeed,\r\n\t\t\t\t\ttext: removePunctuationSpace(text)\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tipcRenderer?.once(\"voice_complete\", (e: any, args: any) => {\r\n\t\t\t\tif (args !== \"#error\") {\r\n\t\t\t\t\tresolve(args);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"send chat failed!\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\treject(error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const xfRead = ({ api, speed, text, volume }: any) => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tif (!isElectron()) {\r\n\t\t\t\tthrow new Error(\"no electron!\");\r\n\t\t\t}\r\n\t\t\tipcRenderer?.send(\r\n\t\t\t\t\"send_xfvoice\",\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tapi,\r\n\t\t\t\t\tvolume,\r\n\t\t\t\t\tspeed,\r\n\t\t\t\t\ttext: removePunctuationSpace(text)\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tconst timeout = setTimeout(() => {\r\n\t\t\t\treject(new Error(\"send chat failed!\"));\r\n\t\t\t}, 5000);\r\n\t\t\tipcRenderer?.once(\"xfvoice_complete\", (e: any, args: any) => {\r\n\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\tif (args !== \"#error\") {\r\n\t\t\t\t\tconst audio = new Audio();\r\n\t\t\t\t\taudio.onerror = reject;\r\n\t\t\t\t\taudio.onended = resolve;\r\n\t\t\t\t\taudio.src = `${args}?cb=${Date.now()}`;\r\n\t\t\t\t\taudio.play();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treject(new Error(\"send chat failed!\"));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\treject(error);\r\n\t\t}\r\n\t});\r\n};\r\n\r\nexport const robots = {\r\n\tdefault: windowsRead,\r\n\tkdxf: xfRead\r\n};\r\n","<template>\r\n\t<div class=\"imgInput\" @mouseenter.prevent=\"showTips\" @mouseleave.prevent=\"showTips\" @mouseover.prevent=\"showTips\" @drop=\"loadFile\" @dragenter.prevent=\"showTips\" @dragover.prevent=\"showTips\" @click=\"getFile\">\r\n\t\t<div class=\"tips\" v-if=\"tips\">\r\n\t\t\t<div class=\"icon el-icon-picture-outline\" />\r\n\t\t\t<div>{{msg}}</div>\r\n\t\t</div>\r\n\t\t<input ref=\"file\" type=\"file\" v-show=\"false\" accept=\".jpg,.png,.gif\" @change=\"loadFile\" />\r\n\t\t<img class=\"cover\" v-if=\"img\" :src=\"img\" />\r\n\t\t<div class=\"cover image-slot\" v-else />\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"imgInputBase\",\r\n\tprops: {\r\n\t\tsrc: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"\"\r\n\t\t},\r\n\t\teditable: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\tconst blob: any = null;\r\n\t\treturn {\r\n\t\t\ttips: false,\r\n\t\t\tmsg: \"\",\r\n\t\t\tblob\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\timg: {\r\n\t\t\tget(): any {\r\n\t\t\t\treturn this.src;\r\n\t\t\t},\r\n\t\t\tset(e: any): any {\r\n\t\t\t\tthis.$emit(\"update:src\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tshowTips(e: any) {\r\n\t\t\te.preventDefault();\r\n\t\t\t// console.log(e);\r\n\t\t\tif (!this.editable) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (e.type === \"mouseleave\" || e.type === \"dragleave\") {\r\n\t\t\t\tthis.tips = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (e.buttons === 1) {\r\n\t\t\t\tthis.msg = \"将照片拖到此处释放\";\r\n\t\t\t} else {\r\n\t\t\t\tthis.msg = \"点击或将图片拖到此处\";\r\n\t\t\t}\r\n\t\t\tthis.tips = true;\r\n\t\t},\r\n\t\tgetFile() {\r\n\t\t\tthis.$el.querySelector(\"input\").click();\r\n\t\t},\r\n\t\tloadFile(e: any) {\r\n\t\t\tlet files = new File([\"\"], \"\");\r\n\t\t\tif (e.dataTransfer) {\r\n\t\t\t\tfor (let i = 0; i < e.dataTransfer.items.length; i++) {\r\n\t\t\t\t\t// If dropped items aren't files, reject them\r\n\t\t\t\t\tif (e.dataTransfer.items[i].kind === \"file\") {\r\n\t\t\t\t\t\tfiles = e.dataTransfer.items[i].getAsFile();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfiles = e.srcElement.files[0];\r\n\t\t\t}\r\n\t\t\tthis.blob = files;\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.readAsDataURL(files);\r\n\t\t\treader.onloadend = () => {\r\n\t\t\t\tthis.img = reader.result;\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n.imgInput {\r\n\tposition: relative;\r\n\tmin-width: 50px;\r\n\tmin-height: 50px;\r\n}\r\n.cover {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tposition: absolute;\r\n\tleft: 0px;\r\n\ttop: 0px;\r\n\tcursor: pointer;\r\n}\r\n.image-slot {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground-image: url(\"/imgs/common/noCover.jpg\");\r\n\tbackground-repeat: no-repeat;\r\n\tbackground-position: center;\r\n\tbackground-color: white;\r\n}\r\n.tips {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tposition: absolute;\r\n\tpointer-events: none;\r\n\tleft: 0px;\r\n\ttop: 0px;\r\n\tz-index: 10;\r\n\tuser-select: none;\r\n\tbackground-color: rgba(0, 0, 0, 0.8);\r\n\tcolor: $--color-primary;\r\n\tfont-size: $--font-size-medium;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\t.icon {\r\n\t\tfont-size: 48px;\r\n\t\tpadding: 8px;\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"imgInputBase\",\r\n\tprops: {\r\n\t\tsrc: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"\"\r\n\t\t},\r\n\t\teditable: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\tconst blob: any = null;\r\n\t\treturn {\r\n\t\t\ttips: false,\r\n\t\t\tmsg: \"\",\r\n\t\t\tblob\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\timg: {\r\n\t\t\tget(): any {\r\n\t\t\t\treturn this.src;\r\n\t\t\t},\r\n\t\t\tset(e: any): any {\r\n\t\t\t\tthis.$emit(\"update:src\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tshowTips(e: any) {\r\n\t\t\te.preventDefault();\r\n\t\t\t// console.log(e);\r\n\t\t\tif (!this.editable) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (e.type === \"mouseleave\" || e.type === \"dragleave\") {\r\n\t\t\t\tthis.tips = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (e.buttons === 1) {\r\n\t\t\t\tthis.msg = \"将照片拖到此处释放\";\r\n\t\t\t} else {\r\n\t\t\t\tthis.msg = \"点击或将图片拖到此处\";\r\n\t\t\t}\r\n\t\t\tthis.tips = true;\r\n\t\t},\r\n\t\tgetFile() {\r\n\t\t\tthis.$el.querySelector(\"input\").click();\r\n\t\t},\r\n\t\tloadFile(e: any) {\r\n\t\t\tlet files = new File([\"\"], \"\");\r\n\t\t\tif (e.dataTransfer) {\r\n\t\t\t\tfor (let i = 0; i < e.dataTransfer.items.length; i++) {\r\n\t\t\t\t\t// If dropped items aren't files, reject them\r\n\t\t\t\t\tif (e.dataTransfer.items[i].kind === \"file\") {\r\n\t\t\t\t\t\tfiles = e.dataTransfer.items[i].getAsFile();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfiles = e.srcElement.files[0];\r\n\t\t\t}\r\n\t\t\tthis.blob = files;\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.readAsDataURL(files);\r\n\t\t\treader.onloadend = () => {\r\n\t\t\t\tthis.img = reader.result;\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./imgInputBase.vue?vue&type=template&id=035791f1&scoped=true\"\nimport script from \"./imgInputBase.vue?vue&type=script&lang=ts\"\nexport * from \"./imgInputBase.vue?vue&type=script&lang=ts\"\n\nimport \"./imgInputBase.vue?vue&type=style&index=0&id=035791f1&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-035791f1\"\n\nexport default script","export interface Session {\r\n\trawFlow: Array<any>;\r\n\tfilterFlow: Array<any>;\r\n}\r\n\r\nexport const session = (): Session => {\r\n\treturn {\r\n\t\trawFlow: [],\r\n\t\tfilterFlow: []\r\n\t};\r\n};\r\n\r\nexport interface Filter {\r\n\topen: boolean;\r\n\tvisitor: boolean;\r\n\tclubOnly: boolean;\r\n\tblackList: boolean;\r\n\tkeyword: boolean;\r\n\tcombineGift: boolean;\r\n\tcombineLike: boolean;\r\n\tcombineEnter: boolean;\r\n\ttypes: Array<number>;\r\n}\r\n\r\nexport const filter = (): Filter => {\r\n\treturn {\r\n\t\topen: true,\r\n\t\tvisitor: true,\r\n\t\tclubOnly: false,\r\n\t\tblackList: true,\r\n\t\tkeyword: true,\r\n\t\tcombineGift: false, // 礼物合并\r\n\t\tcombineLike: false, // 点赞合并\r\n\t\tcombineEnter: false, // 重复进入直播间合并\r\n\t\ttypes: [1000, 1001, 1002, 1003, 1005, 1007, 1008]\r\n\t};\r\n};\r\n\r\nexport interface Settings {\r\n\tfilter: Filter;\r\n\tmaxNum: number;\r\n\tclubLevel: number;\r\n\tspeed: string;\r\n\thightLight: any;\r\n\tanimation: boolean;\r\n\tsettingOfType: any;\r\n}\r\n\r\nexport const settings = (): Settings => {\r\n\treturn {\r\n\t\tfilter: filter(),\r\n\t\tmaxNum: 75,\r\n\t\tclubLevel: 0,\r\n\t\tspeed: \"slow\", // 尚未实现\r\n\t\thightLight: {\r\n\t\t\tboss: true, // 未完成\r\n\t\t\tmanager: false, // 未完成\r\n\t\t\tconcerned: false // 未完成\r\n\t\t}, // 尚未实现\r\n\t\tanimation: true, // 尚未实现\r\n\t\tsettingOfType: {}\r\n\t};\r\n};\r\n\r\nexport const webSettings = (): Settings => {\r\n\treturn {\r\n\t\t...settings(),\r\n\t\tmaxNum: 25\r\n\t};\r\n};\r\n\r\nexport interface RobotSetting {\r\n\trtype: string;\r\n\tapi: any;\r\n\tenable: Array<any>;\r\n\tspeed: number;\r\n\tvolume: number;\r\n\trules: any;\r\n\tignoreOwner: boolean;\r\n\tcomboReading: boolean;\r\n}\r\n\r\nexport const robotRule = (): any => {\r\n\treturn {\r\n\t\t1000: [],\r\n\t\t1001: [],\r\n\t\t1002: [],\r\n\t\t1003: [],\r\n\t\t1004: [],\r\n\t\t1005: [],\r\n\t\t1006: [],\r\n\t\t1007: [],\r\n\t\t1008: []\r\n\t};\r\n};\r\n\r\nexport const robotSetting = (): RobotSetting => {\r\n\treturn {\r\n\t\trtype: \"default\",\r\n\t\tapi: {\r\n\t\t\tapiSecret: \"\",\r\n\t\t\tappID: \"\",\r\n\t\t\tapiKey: \"\",\r\n\t\t\tvoiceName: \"\"\r\n\t\t},\r\n\t\tenable: [],\r\n\t\tspeed: 2,\r\n\t\tvolume: 50,\r\n\t\trules: robotRule(),\r\n\t\tignoreOwner: false,\r\n\t\tcomboReading: false\r\n\t};\r\n};\r\n\r\nexport interface clientSettings extends Settings {\r\n\trobotSetting: RobotSetting;\r\n}\r\n\r\nexport const clientSettings = (): clientSettings => {\r\n\treturn {\r\n\t\t...settings(),\r\n\t\trobotSetting: robotSetting()\r\n\t};\r\n};\r\n\r\nexport interface emoji {\r\n\tpattern: string;\r\n\turl: string;\r\n\tscale: number;\r\n}\r\n\r\nexport interface SuperChat {\r\n\tenable: boolean;\r\n\twebEnable: boolean;\r\n\tshowNextLevel: boolean;\r\n\trules: Array<any>;\r\n\tdisplayType: number;\r\n}\r\n\r\nexport const superChat = () => {\r\n\treturn {\r\n\t\tenable: false,\r\n\t\twebEnable: false,\r\n\t\tshowNextLevel: false,\r\n\t\trules: [],\r\n\t\tdisplayType: 0\r\n\t};\r\n};\r\n\r\nexport interface CommonSettings {\r\n\tlikeList: Array<any>;\r\n\tblackList: Array<any>;\r\n\tkeywords: Array<any>;\r\n\temojis: Array<emoji>;\r\n\temotionMax: number;\r\n\temotion: boolean;\r\n\tsuperChat: SuperChat;\r\n}\r\n\r\nexport const commonSettings = (): CommonSettings => {\r\n\treturn {\r\n\t\tlikeList: [],\r\n\t\tblackList: [],\r\n\t\tkeywords: [],\r\n\t\temotion: true,\r\n\t\temotionMax: 3,\r\n\t\temojis: [],\r\n\t\tsuperChat: superChat()\r\n\t};\r\n};\r\n\r\nexport interface GeneralSettings {\r\n\tstreamToolPath: string;\r\n}\r\n\r\nexport const generalSettings = (): GeneralSettings => {\r\n\treturn {\r\n\t\tstreamToolPath: \"\"\r\n\t};\r\n};\r\n\r\nexport interface Profile {\r\n\tgeneral: GeneralSettings;\r\n\tcommon: CommonSettings;\r\n\ttoolBox: clientSettings;\r\n\tweb: Settings;\r\n}\r\n\r\nexport const profile = (): Profile => {\r\n\treturn {\r\n\t\tgeneral: generalSettings(),\r\n\t\tcommon: commonSettings(),\r\n\t\ttoolBox: clientSettings(),\r\n\t\tweb: webSettings()\r\n\t};\r\n};\r\n","<template>\r\n\t<div class=\"imgInput\" @click=\"getFile\" :style=\"{'--fit':fit}\">\r\n\t\t<div class=\"tips\">\r\n\t\t\t<div class=\"icon el-icon-picture-outline\" />\r\n\t\t\t<div>点击加载图片</div>\r\n\t\t</div>\r\n\t\t<el-image :lazy=\"true\" class=\"cover\" :src=\"src\">\r\n\t\t\t<template #error>\r\n\t\t\t\t<div class=\"cover image-slot\" />\r\n\t\t\t</template>\r\n\t\t</el-image>\r\n\t</div>\r\n\t<el-dialog custom-class=\"dialogBase\" title=\"图片剪裁\" v-model=\"clipDialog\" @close=\"editImg=''\">\r\n\t\t<vue-cropper v-if=\"clipDialog\" style=\"max-height:300px\" ref=\"cropper\" :aspect-ratio=\"16 / 10\" :src=\"editImg\" alt=\"Source Image\" />\r\n\t\t<span class=\"hint\">鼠标滚轮进行缩放</span>\r\n\t\t<template #footer>\r\n\t\t\t<el-button type=\"primary\" size=\"mini\" @click=\"crop\">确定</el-button>\r\n\t\t</template>\r\n\t</el-dialog>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport { load } from \"@front/util_function/file\";\r\nimport { uploadBase64Image, path } from \"@front/util_function/system\";\r\nimport { BlobtoB64 } from \"@front/util_function/imgTool\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport VueCropper from \"vue-cropperjs\";\r\nimport \"cropperjs/dist/cropper.css\";\r\nexport default defineComponent({\r\n\tname: \"imgInputClip\",\r\n\tcomponents: { VueCropper },\r\n\tprops: {\r\n\t\tmodelValue: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"\"\r\n\t\t},\r\n\t\tfit: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"cover\"\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\tconst editImg: any = \"\";\r\n\t\treturn {\r\n\t\t\tclipDialog: false,\r\n\t\t\teditImg\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tsrc(): any {\r\n\t\t\treturn this.modelValue;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tasync getFile() {\r\n\t\t\tconst file: any = await load(\".jpg,.png,.gif\");\r\n\t\t\tif (file) {\r\n\t\t\t\tthis.edit(file);\r\n\t\t\t}\r\n\t\t},\r\n\t\tedit(file: any) {\r\n\t\t\tBlobtoB64(file)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tthis.editImg = res;\r\n\t\t\t\t\tthis.clipDialog = true;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tElMessage({\r\n\t\t\t\t\t\tmessage: \"图片读取错误\",\r\n\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\toffset: 60\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tcrop() {\r\n\t\t\t// @ts-ignore\r\n\t\t\tconst cropImg = this.$refs.cropper.getCroppedCanvas().toDataURL();\r\n\t\t\tuploadBase64Image(cropImg)\r\n\t\t\t\t.then(url => {\r\n\t\t\t\t\tthis.$emit(\r\n\t\t\t\t\t\t\"update:modelValue\",\r\n\t\t\t\t\t\t`/configFiles/images/${path.basename(url)}`\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.editImg = \"\";\r\n\t\t\t\t\tthis.clipDialog = false;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tElMessage({\r\n\t\t\t\t\t\tmessage: \"图片保存失败\",\r\n\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\toffset: 60\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n.imgInput {\r\n\tposition: relative;\r\n\tmin-width: 60px;\r\n\tmin-height: 60px;\r\n\r\n\t.tips {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: absolute;\r\n\t\tpointer-events: none;\r\n\t\tleft: 0px;\r\n\t\ttop: 0px;\r\n\t\tz-index: 10;\r\n\t\tuser-select: none;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.8);\r\n\t\tcolor: $--color-primary;\r\n\t\tfont-size: $--font-size-base;\r\n\t\tdisplay: none;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\t.icon {\r\n\t\t\tfont-size: $--font-size-extra-large;\r\n\t\t\tpadding: 8px;\r\n\t\t}\r\n\t}\r\n\t&:hover {\r\n\t\t.tips {\r\n\t\t\tdisplay: flex;\r\n\t\t}\r\n\t}\r\n\t.cover {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: absolute;\r\n\t\tleft: 0px;\r\n\t\ttop: 0px;\r\n\t\tcursor: pointer;\r\n\t\t.el-image__inner {\r\n\t\t\tobject-fit: var(--fit);\r\n\t\t}\r\n\t}\r\n\r\n\t.image-slot {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-image: url(\"/imgs/common/noCover.jpg\");\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tbackground-position: center;\r\n\t\tbackground-color: white;\r\n\t}\r\n}\r\n</style>\r\n","export const b64toBlob = (dataURI: string) => {\r\n\tconst byteString = atob(dataURI.split(\",\")[1]);\r\n\tconst ab = new ArrayBuffer(byteString.length);\r\n\tconst ia = new Uint8Array(ab);\r\n\r\n\tfor (let i = 0; i < byteString.length; i++) {\r\n\t\tia[i] = byteString.charCodeAt(i);\r\n\t}\r\n\treturn new Blob([ab], { type: \"image/jpeg\" });\r\n};\r\n\r\nexport const BlobtoB64 = (b: Blob) => {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst reader = new FileReader();\r\n\t\treader.readAsDataURL(b);\r\n\t\treader.onloadend = () => {\r\n\t\t\tresolve(reader.result);\r\n\t\t};\r\n\t\treader.onerror = e => {\r\n\t\t\treject(e);\r\n\t\t};\r\n\t});\r\n};\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport { load } from \"@front/util_function/file\";\r\nimport { uploadBase64Image, path } from \"@front/util_function/system\";\r\nimport { BlobtoB64 } from \"@front/util_function/imgTool\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport VueCropper from \"vue-cropperjs\";\r\nimport \"cropperjs/dist/cropper.css\";\r\nexport default defineComponent({\r\n\tname: \"imgInputClip\",\r\n\tcomponents: { VueCropper },\r\n\tprops: {\r\n\t\tmodelValue: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"\"\r\n\t\t},\r\n\t\tfit: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"cover\"\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\tconst editImg: any = \"\";\r\n\t\treturn {\r\n\t\t\tclipDialog: false,\r\n\t\t\teditImg\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tsrc(): any {\r\n\t\t\treturn this.modelValue;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tasync getFile() {\r\n\t\t\tconst file: any = await load(\".jpg,.png,.gif\");\r\n\t\t\tif (file) {\r\n\t\t\t\tthis.edit(file);\r\n\t\t\t}\r\n\t\t},\r\n\t\tedit(file: any) {\r\n\t\t\tBlobtoB64(file)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tthis.editImg = res;\r\n\t\t\t\t\tthis.clipDialog = true;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tElMessage({\r\n\t\t\t\t\t\tmessage: \"图片读取错误\",\r\n\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\toffset: 60\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tcrop() {\r\n\t\t\t// @ts-ignore\r\n\t\t\tconst cropImg = this.$refs.cropper.getCroppedCanvas().toDataURL();\r\n\t\t\tuploadBase64Image(cropImg)\r\n\t\t\t\t.then(url => {\r\n\t\t\t\t\tthis.$emit(\r\n\t\t\t\t\t\t\"update:modelValue\",\r\n\t\t\t\t\t\t`/configFiles/images/${path.basename(url)}`\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.editImg = \"\";\r\n\t\t\t\t\tthis.clipDialog = false;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tElMessage({\r\n\t\t\t\t\t\tmessage: \"图片保存失败\",\r\n\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\toffset: 60\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./imgInpuClip.vue?vue&type=template&id=0005670c\"\nimport script from \"./imgInpuClip.vue?vue&type=script&lang=ts\"\nexport * from \"./imgInpuClip.vue?vue&type=script&lang=ts\"\n\nimport \"./imgInpuClip.vue?vue&type=style&index=0&id=0005670c&lang=scss\"\nscript.render = render\n\nexport default script","<template>\r\n\t<div class=\"foter\">{{ footer.base }}</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport { footer } from \"@front/texts\";\r\nexport default defineComponent({\r\n\tname: \"footerBase\",\r\n\tcomputed: {\r\n\t\tfooter\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.foter {\r\n\twhite-space: pre;\r\n\tuser-select: none;\r\n\tcolor: rgba($color: white, $alpha: 0.7);\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport { footer } from \"@front/texts\";\r\nexport default defineComponent({\r\n\tname: \"footerBase\",\r\n\tcomputed: {\r\n\t\tfooter\r\n\t}\r\n});\r\n","import { render } from \"./footerBase.vue?vue&type=template&id=3863483c&scoped=true\"\nimport script from \"./footerBase.vue?vue&type=script&lang=ts\"\nexport * from \"./footerBase.vue?vue&type=script&lang=ts\"\n\nimport \"./footerBase.vue?vue&type=style&index=0&id=3863483c&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-3863483c\"\n\nexport default script","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./rowFrame.vue?vue&type=style&index=0&id=1cf93e19&scoped=true&lang=scss\"","<template>\r\n\t<div class=\"imgInput\" @click=\"getFile\" :style=\"{'--fit':fit}\">\r\n\t\t<div class=\"tips\">\r\n\t\t\t<div class=\"icon el-icon-picture-outline\" />\r\n\t\t\t<div>点击加载图片</div>\r\n\t\t</div>\r\n\t\t<el-image class=\"cover\" :src=\"modelValue\">\r\n\t\t\t<template #error>\r\n\t\t\t\t<div class=\"cover image-slot\" />\r\n\t\t\t</template>\r\n\t\t</el-image>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport { load } from \"@front/util_function/file\";\r\nimport { uploadImage, path } from \"@front/util_function/system\";\r\nexport default defineComponent({\r\n\tname: \"imgInputStatic\",\r\n\tprops: {\r\n\t\tmodelValue: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"\"\r\n\t\t},\r\n\t\tfit: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"cover\"\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tasync getFile() {\r\n\t\t\tconst file: any = await load(\".jpg,.png,.gif\");\r\n\t\t\tif (file) {\r\n\t\t\t\tconst url = await uploadImage(file.path);\r\n\t\t\t\tthis.$emit(\r\n\t\t\t\t\t\"update:modelValue\",\r\n\t\t\t\t\t`/configFiles/images/${path.basename(url)}`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n.imgInput {\r\n\tposition: relative;\r\n\tmin-width: 60px;\r\n\tmin-height: 60px;\r\n\r\n\t.tips {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: absolute;\r\n\t\tpointer-events: none;\r\n\t\tleft: 0px;\r\n\t\ttop: 0px;\r\n\t\tz-index: 10;\r\n\t\tuser-select: none;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.8);\r\n\t\tcolor: $--color-primary;\r\n\t\tfont-size: $--font-size-base;\r\n\t\tdisplay: none;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\t.icon {\r\n\t\t\tfont-size: $--font-size-extra-large;\r\n\t\t\tpadding: 8px;\r\n\t\t}\r\n\t}\r\n\t&:hover {\r\n\t\t.tips {\r\n\t\t\tdisplay: flex;\r\n\t\t}\r\n\t}\r\n\t.cover {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: absolute;\r\n\t\tleft: 0px;\r\n\t\ttop: 0px;\r\n\t\tcursor: pointer;\r\n\t\t.el-image__inner {\r\n\t\t\tobject-fit: var(--fit);\r\n\t\t}\r\n\t}\r\n\r\n\t.image-slot {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-image: url(\"/imgs/common/noCover.jpg\");\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tbackground-position: center;\r\n\t\tbackground-color: white;\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport { load } from \"@front/util_function/file\";\r\nimport { uploadImage, path } from \"@front/util_function/system\";\r\nexport default defineComponent({\r\n\tname: \"imgInputStatic\",\r\n\tprops: {\r\n\t\tmodelValue: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"\"\r\n\t\t},\r\n\t\tfit: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"cover\"\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tasync getFile() {\r\n\t\t\tconst file: any = await load(\".jpg,.png,.gif\");\r\n\t\t\tif (file) {\r\n\t\t\t\tconst url = await uploadImage(file.path);\r\n\t\t\t\tthis.$emit(\r\n\t\t\t\t\t\"update:modelValue\",\r\n\t\t\t\t\t`/configFiles/images/${path.basename(url)}`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./imgInputStatic.vue?vue&type=template&id=5e5372ee\"\nimport script from \"./imgInputStatic.vue?vue&type=script&lang=ts\"\nexport * from \"./imgInputStatic.vue?vue&type=script&lang=ts\"\n\nimport \"./imgInputStatic.vue?vue&type=style&index=0&id=5e5372ee&lang=scss\"\nscript.render = render\n\nexport default script","import component from \"*.vue\";\r\nimport main from \"@front/layouts/main/index.vue\";\r\nlet output: Array<any> = [];\r\nif (process.env.NODE_ENV !== \"production\") {\r\n\tconst children: Array<any> = [];\r\n\tconst requireComponent = require.context(\"./\", false, /\\w+\\.(vue)$/);\r\n\trequireComponent.keys().forEach(fileName => {\r\n\t\tconst componentConfig = requireComponent(fileName);\r\n\t\tconst name =\r\n\t\t\tcomponentConfig.default.cname || componentConfig.default.name;\r\n\t\tchildren.push({\r\n\t\t\tpath: `/${componentConfig.default.name}`,\r\n\t\t\tname,\r\n\t\t\tcomponent: componentConfig.default,\r\n\t\t\tmeta: {\r\n\t\t\t\tlabel: name,\r\n\t\t\t\taction: \"router\"\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\toutput = [\r\n\t\t{\r\n\t\t\tpath: \"/testEnv\",\r\n\t\t\tname: \"testEnv\",\r\n\t\t\tcomponent: main,\r\n\t\t\tmeta: {\r\n\t\t\t\tlabel: \"测试组件\"\r\n\t\t\t},\r\n\t\t\tchildren\r\n\t\t}\r\n\t];\r\n}\r\n\r\nexport default output;\r\n","import store from \"@front/store\";\r\nimport testRouters from \"@front/test\";\r\nimport { restart } from \"@front/util_function/login\";\r\nconst main = () => import(\"@front/layouts/main/index.vue\");\r\nexport default [\r\n\t{\r\n\t\tpath: \"/login\",\r\n\t\tname: \"Login\",\r\n\t\tcomponent: () => import(\"@front/views/login/index.vue\")\r\n\t},\r\n\t{\r\n\t\tpath: \"/\",\r\n\t\tname: \"home\",\r\n\t\tcomponent: main,\r\n\t\tmeta: {\r\n\t\t\tlabel: \"直播\"\r\n\t\t},\r\n\t\tredirect: \"/dashboard\",\r\n\t\tchildren: [\r\n\t\t\t{\r\n\t\t\t\tpath: \"/dashboard\",\r\n\t\t\t\tname: \"dashboard\",\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\tlabel: \"首页\",\r\n\t\t\t\t\ticon: \"el-icon-monitor\",\r\n\t\t\t\t\taction: \"router\"\r\n\t\t\t\t},\r\n\t\t\t\tcomponent: () => import(\"@front/views/dashboard/index.vue\")\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"/roomMgmt\",\r\n\t\t\t\tname: \"roomMgmt\",\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\tlabel: \"房间管理\",\r\n\t\t\t\t\ticon: \"el-icon-house\",\r\n\t\t\t\t\taction: \"router\",\r\n\t\t\t\t\tdisabled: () => {\r\n\t\t\t\t\t\treturn store.state.streamStatus.step === \"unstreamable\";\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcomponent: () => import(\"@front/views/roomMgmt/index.vue\")\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"/appletsList\",\r\n\t\t\t\tname: \"appletsList\",\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\tlabel: \"小程序\",\r\n\t\t\t\t\ticon: \"el-icon-menu\",\r\n\t\t\t\t\taction: \"router\"\r\n\t\t\t\t},\r\n\t\t\t\tcomponent: () => import(\"@front/views/applets/index.vue\")\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"/restart\",\r\n\t\t\t\tname: \"restart\",\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\tlabel: \"快速重启！\",\r\n\t\t\t\t\ticon: \"el-icon-refresh-right\",\r\n\t\t\t\t\taction: restart\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"/magiScr\",\r\n\t\t\t\tname: \"magiScr\",\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\tlabel: \"魔法画屏\",\r\n\t\t\t\t\ticon: \"el-icon-magic-stick\",\r\n\t\t\t\t\taction: \"router\",\r\n\t\t\t\t\tdisabled: () => {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tredirect: \"/\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\tpath: \"/record\",\r\n\t\tname: \"record\",\r\n\t\tcomponent: main,\r\n\t\tmeta: {\r\n\t\t\tlabel: \"录像\"\r\n\t\t},\r\n\t\tchildren: [\r\n\t\t\t{\r\n\t\t\t\tpath: \"/streamRecord\",\r\n\t\t\t\tname: \"streamRecord\",\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\tlabel: \"直播录制\",\r\n\t\t\t\t\ticon: \"el-icon-video-camera\",\r\n\t\t\t\t\taction: \"router\",\r\n\t\t\t\t\tdisabled: () => {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tredirect: \"/\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\tpath: \"/data\",\r\n\t\tname: \"data\",\r\n\t\tcomponent: main,\r\n\t\tmeta: {\r\n\t\t\tlabel: \"数据\"\r\n\t\t},\r\n\t\tchildren: [\r\n\t\t\t{\r\n\t\t\t\tpath: \"/replay\",\r\n\t\t\t\tname: \"replay\",\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\tlabel: \"完播复盘\",\r\n\t\t\t\t\ticon: \"el-icon-pie-chart\",\r\n\t\t\t\t\taction: \"router\",\r\n\t\t\t\t\tdisabled: () => {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tredirect: \"/\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\tpath: \"/config\",\r\n\t\tname: \"config\",\r\n\t\tcomponent: main,\r\n\t\tmeta: {\r\n\t\t\tlabel: \"设置与选项\"\r\n\t\t},\r\n\t\tchildren: [\r\n\t\t\t{\r\n\t\t\t\tpath: \"/config/general\",\r\n\t\t\t\tname: \"general\",\r\n\t\t\t\tcomponent: () => import(\"@front/views/general/index.vue\"),\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\tlabel: \"通用\",\r\n\t\t\t\t\ticon: \"el-icon-setting\",\r\n\t\t\t\t\taction: \"router\"\r\n\t\t\t\t\t// disabled: () => {\r\n\t\t\t\t\t// \treturn true;\r\n\t\t\t\t\t// }\r\n\t\t\t\t}\r\n\t\t\t\t// redirect: \"/\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"/config/superChat\",\r\n\t\t\t\tname: \"superChat\",\r\n\t\t\t\tcomponent: () => import(\"@front/views/superChat/index.vue\"),\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\tlabel: \"超级聊\",\r\n\t\t\t\t\ticon: \"el-icon-upload2\",\r\n\t\t\t\t\taction: \"router\"\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"/config/emotion\",\r\n\t\t\t\tname: \"emotion\",\r\n\t\t\t\tcomponent: () => import(\"@front/views/emotion/index.vue\"),\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\tlabel: \"表情包\",\r\n\t\t\t\t\ticon: \"el-icon-edit\",\r\n\t\t\t\t\taction: \"router\"\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"/config/roomNameList\",\r\n\t\t\t\tname: \"roomNameList\",\r\n\t\t\t\tcomponent: () => import(\"@front/views/roomNameList/index.vue\"),\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\tlabel: \"小本本\",\r\n\t\t\t\t\ticon: \"el-icon-tickets\",\r\n\t\t\t\t\taction: \"router\",\r\n\t\t\t\t\tdisabled: () => {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"/config/danmakuSetting\",\r\n\t\t\t\tname: \"danmakuSetting\",\r\n\t\t\t\tcomponent: () =>\r\n\t\t\t\t\timport(\"@front/views/danmakuSetting/index.vue\"),\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\tlabel: \"弹幕流\",\r\n\t\t\t\t\ticon: \"el-icon-chat-line-square\",\r\n\t\t\t\t\taction: \"router\",\r\n\t\t\t\t\tdisabled: () => {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"/config/robot\",\r\n\t\t\t\tname: \"robot\",\r\n\t\t\t\tcomponent: () => import(\"@front/views/robot/index.vue\"),\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\tlabel: \"鸡鸡人\",\r\n\t\t\t\t\ticon: \"el-icon-user\",\r\n\t\t\t\t\taction: \"router\",\r\n\t\t\t\t\tdisabled: () => {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t...testRouters\r\n];\r\n","import { user, room, stream, danmaku, temp } from \"@front/datas\";\r\nimport { isElectron } from \"@front/util_function/electron\";\r\nimport { Filter } from \"@front/components/danmakuFlow/utils/common\";\r\nexport interface RootState {\r\n\tserverOnline: boolean; // 后端是否启动\r\n\tuserSession: user.Session; // 用户登陆信息\r\n\tuserProfile: user.Profile; // 用户资料\r\n\tuserData: user.Data; // 用户名密码\r\n\troomProfile: room.ProfileDetail; // 房间信息\r\n\troomStatus: room.Status; // 房间实时状态\r\n\troomCategorys: Array<room.Category>; // 全部房间分类\r\n\tmanagerList: Array<any>; // 房管列表\r\n\trank: room.Rank; // 排行榜信息\r\n\tisLogined: boolean; // 是否登陆\r\n\tisReconnect: boolean;\r\n\tisElectron: boolean; // 是否浏览器环境\r\n\tstreamStatus: stream.Status;\r\n\tstreamEncodec: stream.Encodec; // 转码信息\r\n\tstreamSession: stream.Session; // 推流配置\r\n\tdanmakuSession: danmaku.Session; // 弹幕实时信息\r\n\tdanmakuProfile: danmaku.Profile; // 弹幕设置\r\n\tfilter: Filter; // 过滤器\r\n\tminify: boolean; // 是否迷你化\r\n\ttemp: temp.TempInfo;\r\n\tapplets: Array<any>; // 小程序列表\r\n}\r\n\r\nexport function stateFunc(): RootState {\r\n\treturn {\r\n\t\tserverOnline: false,\r\n\t\tisLogined: false,\r\n\t\tminify: false,\r\n\t\tisReconnect: false,\r\n\t\tisElectron: isElectron(),\r\n\t\tuserSession: user.session(),\r\n\t\tuserProfile: user.profile(),\r\n\t\tuserData: user.data(),\r\n\t\troomProfile: room.profileDetail(),\r\n\t\troomStatus: room.status(),\r\n\t\troomCategorys: [],\r\n\t\tmanagerList: [],\r\n\t\trank: room.rank(),\r\n\t\tstreamStatus: stream.status(),\r\n\t\tstreamEncodec: stream.encodec(),\r\n\t\tstreamSession: stream.session(),\r\n\t\tdanmakuSession: danmaku.session(),\r\n\t\tdanmakuProfile: danmaku.profile(),\r\n\t\tfilter: new Filter(),\r\n\t\ttemp: temp.tempInfo(),\r\n\t\tapplets: []\r\n\t};\r\n}\r\n\r\nexport const state: RootState = stateFunc();\r\n","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./rowSpan.vue?vue&type=style&index=0&id=73e9480d&lang=scss\"","<template>\r\n\t<div ref=\"title\" class=\"title\" :style=\"style\">\r\n\t\t<div>{{label}}</div>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"titleScrolling\",\r\n\tprops: {\r\n\t\tlabel: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"\"\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\tconst observer: any = null;\r\n\t\tconst observerTimer: any = null;\r\n\t\treturn {\r\n\t\t\ttitleMove: 0,\r\n\t\t\tobserver,\r\n\t\t\tobserverTimer,\r\n\t\t\tmounted: false\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tstyle(): any {\r\n\t\t\treturn {\r\n\t\t\t\t\"--titleMove\": `${this.titleMove}px`,\r\n\t\t\t\t\"--titleMoveTime\": `${-this.titleMove / 4}s`\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tlabel: {\r\n\t\t\thandler(n, o) {\r\n\t\t\t\tif (this.mounted && n) {\r\n\t\t\t\t\tthis.addObserver();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\timmediate: true\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.addObserver();\r\n\t},\r\n\tbeforeUnmount() {\r\n\t\tif (this.observer) {\r\n\t\t\tthis.observer.disconnect();\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\taddObserver() {\r\n\t\t\ttry {\r\n\t\t\t\tconst parent: any = this.$el;\r\n\t\t\t\tif (!parent) {\r\n\t\t\t\t\tthrow new Error();\r\n\t\t\t\t}\r\n\t\t\t\tconst child = parent.firstChild;\r\n\t\t\t\tconst getMove = () => {\r\n\t\t\t\t\tconst move = child.offsetWidth - parent.offsetWidth;\r\n\t\t\t\t\tif (move > 0) {\r\n\t\t\t\t\t\tthis.titleMove = -move - 10;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.titleMove = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tif (this.observer) {\r\n\t\t\t\t\tthis.observer.disconnect();\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tthis.observer = new ResizeObserver(getMove);\r\n\r\n\t\t\t\tthis.observer.observe(parent);\r\n\t\t\t\tthis.observer.observe(child);\r\n\t\t\t\tgetMove();\r\n\t\t\t} catch (error) {}\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n.title {\r\n\tposition: relative;\r\n\tfont-size: $--font-size-base;\r\n\tcolor: $--color-text-primary;\r\n\toverflow: hidden;\r\n\t& > div {\r\n\t\tanimation: moveText var(--titleMoveTime) linear 1s infinite alternate;\r\n\t\twidth: fit-content;\r\n\t\t&:hover {\r\n\t\t\tanimation-play-state: paused;\r\n\t\t}\r\n\t}\r\n}\r\n@keyframes moveText {\r\n\t0%,\r\n\t20% {\r\n\t\ttransform: translateX(0%);\r\n\t}\r\n\t80%,\r\n\t100% {\r\n\t\ttransform: translateX(var(--titleMove));\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { defineComponent } from \"vue\";\r\nexport default defineComponent({\r\n\tname: \"titleScrolling\",\r\n\tprops: {\r\n\t\tlabel: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"\"\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\tconst observer: any = null;\r\n\t\tconst observerTimer: any = null;\r\n\t\treturn {\r\n\t\t\ttitleMove: 0,\r\n\t\t\tobserver,\r\n\t\t\tobserverTimer,\r\n\t\t\tmounted: false\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tstyle(): any {\r\n\t\t\treturn {\r\n\t\t\t\t\"--titleMove\": `${this.titleMove}px`,\r\n\t\t\t\t\"--titleMoveTime\": `${-this.titleMove / 4}s`\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tlabel: {\r\n\t\t\thandler(n, o) {\r\n\t\t\t\tif (this.mounted && n) {\r\n\t\t\t\t\tthis.addObserver();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\timmediate: true\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.addObserver();\r\n\t},\r\n\tbeforeUnmount() {\r\n\t\tif (this.observer) {\r\n\t\t\tthis.observer.disconnect();\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\taddObserver() {\r\n\t\t\ttry {\r\n\t\t\t\tconst parent: any = this.$el;\r\n\t\t\t\tif (!parent) {\r\n\t\t\t\t\tthrow new Error();\r\n\t\t\t\t}\r\n\t\t\t\tconst child = parent.firstChild;\r\n\t\t\t\tconst getMove = () => {\r\n\t\t\t\t\tconst move = child.offsetWidth - parent.offsetWidth;\r\n\t\t\t\t\tif (move > 0) {\r\n\t\t\t\t\t\tthis.titleMove = -move - 10;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.titleMove = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tif (this.observer) {\r\n\t\t\t\t\tthis.observer.disconnect();\r\n\t\t\t\t}\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tthis.observer = new ResizeObserver(getMove);\r\n\r\n\t\t\t\tthis.observer.observe(parent);\r\n\t\t\t\tthis.observer.observe(child);\r\n\t\t\t\tgetMove();\r\n\t\t\t} catch (error) {}\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./titleScrolling.vue?vue&type=template&id=a983cbaa&scoped=true\"\nimport script from \"./titleScrolling.vue?vue&type=script&lang=ts\"\nexport * from \"./titleScrolling.vue?vue&type=script&lang=ts\"\n\nimport \"./titleScrolling.vue?vue&type=style&index=0&id=a983cbaa&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-a983cbaa\"\n\nexport default script","export * from \"-!../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=451fcd92&lang=scss\"","import { danmaku } from \"@/electron_browser/datas\";\r\nimport replace from \"lodash/replace\";\r\nimport { isElectron } from \"@front/util_function/electron\";\r\nimport { escapeRegExp } from \"@front/util_function/base\";\r\nimport store from \"@front/store/index\";\r\nexport const getDanmuInfo = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\tconst type = danmaku?.type;\r\n\tswitch (type) {\r\n\t\tcase 1000:\r\n\t\tcase 1008:\r\n\t\t\treturn danmaku.data.danmuInfo;\r\n\t\tcase 1001:\r\n\t\t\treturn danmaku.data;\r\n\t\tcase 1002:\r\n\t\t\treturn danmaku.data;\r\n\t\tcase 1003:\r\n\t\t\treturn danmaku.data;\r\n\t\tcase 1004:\r\n\t\t\treturn danmaku.data;\r\n\t\tcase 1005:\r\n\t\t\treturn danmaku.data.danmuInfo;\r\n\t\tcase 1006:\r\n\t\t\treturn danmaku.data;\r\n\t\tcase 1007:\r\n\t\t\treturn danmaku.data;\r\n\t\tdefault:\r\n\t\t\treturn 0;\r\n\t}\r\n};\r\n\r\nexport const getUserInfo = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\tconst type = danmaku?.type;\r\n\tswitch (type) {\r\n\t\tcase 1007:\r\n\t\t\treturn getDanmuInfo(danmaku).fansInfo;\r\n\t\tcase 1006:\r\n\t\t\treturn {};\r\n\t\tdefault:\r\n\t\t\treturn getDanmuInfo(danmaku).userInfo;\r\n\t}\r\n};\r\n\r\nexport const getTime = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\tconst type = danmaku?.type;\r\n\tswitch (type) {\r\n\t\tcase 1007:\r\n\t\t\tif (!getDanmuInfo(danmaku)?.joinTime) {\r\n\t\t\t\tdanmaku.data.joinTime = Date.now();\r\n\t\t\t}\r\n\t\t\treturn danmaku?.data?.joinTime;\r\n\t\tdefault:\r\n\t\t\treturn getDanmuInfo(danmaku)?.sendTime;\r\n\t}\r\n};\r\n\r\nexport const setTime = (danmaku: any, time: any) => {\r\n\tconst type = danmaku?.type;\r\n\tswitch (type) {\r\n\t\tcase 1007:\r\n\t\t\tdanmaku.data.joinTime = time;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tgetDanmuInfo(danmaku).sendTime = time;\r\n\t}\r\n\treturn danmaku;\r\n};\r\n\r\nexport const getMedal = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\treturn getUserInfo(danmaku).medal;\r\n};\r\n\r\nexport const getMedalLevel = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\treturn getMedal(danmaku).level;\r\n};\r\n\r\nexport const getMedalName = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\treturn getMedal(danmaku).clubName;\r\n};\r\n\r\nexport const getAvatar = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\treturn getUserInfo(danmaku).avatar;\r\n};\r\n\r\nexport const getNickName = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\treturn getUserInfo(danmaku).nickname;\r\n};\r\n\r\nexport const getUID = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\treturn getUserInfo(danmaku).userID;\r\n};\r\n\r\nexport const getContent = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\tif (danmaku.type !== 1000) {\r\n\t\treturn \"\";\r\n\t}\r\n\treturn danmaku.data.content;\r\n};\r\n\r\nexport const getGift = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\tif (danmaku.type !== 1005) {\r\n\t\treturn {\r\n\t\t\tdisplay: false\r\n\t\t};\r\n\t}\r\n\treturn {\r\n\t\tdisplay: true,\r\n\t\t...danmaku.data\r\n\t};\r\n};\r\nexport const getDanmakuType = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\treturn danmaku.type;\r\n};\r\n\r\nexport const getGiftName = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\treturn getGift(danmaku)?.giftDetail.giftName;\r\n};\r\n\r\nexport const getGiftCombo = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\treturn getGift(danmaku)?.combo;\r\n};\r\n\r\nexport const getGiftNumber = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\treturn getGift(danmaku)?.count;\r\n};\r\n\r\nexport const setGiftNumber = (danmaku: any, number: any) => {\r\n\tdanmaku.data.count = number;\r\n};\r\n\r\nexport const getGiftValue = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\tif (getGift(danmaku)?.giftDetail.payWalletType === 1) {\r\n\t\treturn getGift(danmaku)?.value;\r\n\t}\r\n\treturn 0;\r\n};\r\n\r\nexport const getRichText = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\r\n\tif (!danmaku) danmaku = this;\r\n\tconst content: Array<string> = [];\r\n\tdanmaku.data.segments.forEach((i: any) => {\r\n\t\tswitch (i.type) {\r\n\t\t\tcase 1900:\r\n\t\t\t\tcontent.push(i.segment.userInfo.nickname);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tcontent.push(i.segment.text);\r\n\t\t}\r\n\t});\r\n\treturn content.join(\" \");\r\n};\r\n\r\nexport const robotGetters = {\r\n\tgetTime,\r\n\tgetMedalLevel,\r\n\tgetMedalName,\r\n\tgetNickName,\r\n\tgetContent,\r\n\tgetGiftName,\r\n\tgetGiftNumber,\r\n\tgetGiftValue,\r\n\tgetRichText\r\n};\r\n\r\nexport const getterOptions = () => {\r\n\treturn [\r\n\t\t{\r\n\t\t\tlabel: \"时间\",\r\n\t\t\tvalue: \"getTime\",\r\n\t\t\tavaliable: [1000, 1001, 1002, 1003, 1005, 1007]\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"牌子等级\",\r\n\t\t\tvalue: \"getMedalLevel\",\r\n\t\t\tavaliable: [1000, 1001, 1002, 1003, 1005]\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"牌子名\",\r\n\t\t\tvalue: \"getMedalName\",\r\n\t\t\tavaliable: [1000, 1001, 1002, 1003, 1005]\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"用户名\",\r\n\t\t\tvalue: \"getNickName\",\r\n\t\t\tavaliable: [1000, 1001, 1002, 1003, 1005, 1007]\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"评论\",\r\n\t\t\tvalue: \"getContent\",\r\n\t\t\tavaliable: [1000]\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"礼物名字\",\r\n\t\t\tvalue: \"getGiftName\",\r\n\t\t\tavaliable: [1005]\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"礼物数量\",\r\n\t\t\tvalue: \"getGiftNumber\",\r\n\t\t\tavaliable: [1005]\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"礼物价值\",\r\n\t\t\tvalue: \"getGiftValue\",\r\n\t\t\tavaliable: [1005]\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"系统通知\",\r\n\t\t\tvalue: \"getRichText\",\r\n\t\t\tavaliable: [1006]\r\n\t\t}\r\n\t];\r\n};\r\n\r\nexport const getContentWithEmoji = function(danmaku: any) {\r\n\t//@ts-ignore\r\n\tif (!danmaku) danmaku = this;\r\n\r\n\tconst { danmakuProfile, temp }: any = store.state;\r\n\tlet content = getContent(danmaku);\r\n\tif (!danmakuProfile?.common?.emotion) {\r\n\t\treturn content;\r\n\t}\r\n\tlet { emojiTester, emojiMatcher } = temp;\r\n\tif (!emojiTester || !emojiMatcher) {\r\n\t\tconst { matcher, tester } = generateTester();\r\n\t\temojiTester = temp.emojiTester = tester;\r\n\t\temojiMatcher = temp.emojiMatcher = matcher;\r\n\t}\r\n\tif (isElectron()) {\r\n\t\t[...content.matchAll(/(ac|AC|aC|Ac)\\d+/g)].forEach(match => {\r\n\t\t\tcontent = replace(\r\n\t\t\t\tcontent,\r\n\t\t\t\tmatch[0],\r\n\t\t\t\t`<a target=\"_blank\" href=\"https://www.acfun.cn/v/${match[0]}\" style=\"color:rgb(100,238,238)\">${match[0]}(点击查看)</a>`\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\tconst max = danmakuProfile.common.emotionMax || 3;\r\n\t[...content.matchAll(emojiTester)].forEach((match, index) => {\r\n\t\tif (!emojiMatcher[match[0]]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet replacement = \"\";\r\n\t\tif (index < max) {\r\n\t\t\treplacement = `<img style=\"max-width:${\r\n\t\t\t\temojiMatcher[match[0]].scale\r\n\t\t\t}px;margin-left:8px;margin-top:8px;vertical-align:bottom\" src=\"${\r\n\t\t\t\temojiMatcher[match[0]].url\r\n\t\t\t}\" />`;\r\n\t\t}\r\n\t\tcontent = content.replace(match[0], replacement);\r\n\t});\r\n\treturn content;\r\n};\r\nexport const generateTester = function() {\r\n\tconst matcher = {};\r\n\tconst testerArr: any = [];\r\n\r\n\tconst { danmakuProfile, temp }: any = store.state;\r\n\tdanmakuProfile.common.emojis.forEach((emoji: any) => {\r\n\t\tconst regex = escapeRegExp(emoji.pattern);\r\n\t\ttesterArr.push(regex);\r\n\t\t// @ts-ignore\r\n\t\tmatcher[emoji.pattern] = {\r\n\t\t\turl: emoji.url,\r\n\t\t\tscale: emoji.scale,\r\n\t\t\tregex: new RegExp(regex, \"g\")\r\n\t\t};\r\n\t});\r\n\tconst tester = (temp.emojiTester = new RegExp(testerArr.join(\"|\"), \"g\"));\r\n\ttemp.emojiMatcher = matcher;\r\n\treturn {\r\n\t\ttester,\r\n\t\tmatcher\r\n\t};\r\n};\r\n","<template>\r\n\t<div id=\"home\">\r\n\t\t<sidebar-base />\r\n\t\t<div class=\"right\">\r\n\t\t\t<topbar-avatar />\r\n\t\t\t<div class=\"content\">\r\n\t\t\t\t<div class=\"view\" v-if=\"!minify\">\r\n\t\t\t\t\t<title-frame :title=\"$route.meta.label\">\r\n\t\t\t\t\t\t<router-view v-slot=\"{ Component }\">\r\n\t\t\t\t\t\t\t<transition name=\"fade\" mode=\"out-in\">\r\n\t\t\t\t\t\t\t\t<component :is=\"Component\" />\r\n\t\t\t\t\t\t\t</transition>\r\n\t\t\t\t\t\t</router-view>\r\n\t\t\t\t\t</title-frame>\r\n\t\t\t\t</div>\r\n\t\t\t\t<status-bar />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from \"vue\";\r\nimport statusBar from \"@front/components/statusBar/index.vue\";\r\nimport topbarAvatar from \"@front/components/system/topbars/withAvatar\";\r\nimport { mapState } from \"vuex\";\r\nexport default defineComponent({\r\n\tname: \"home\",\r\n\tcomponents: {\r\n\t\tstatusBar,\r\n\t\ttopbarAvatar\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$store.state.isLogined = true;\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState([\"minify\"])\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"@front/styles/variables.scss\";\r\n#home {\r\n\tfont-family: Avenir, Helvetica, Arial, sans-serif;\r\n\t-webkit-font-smoothing: antialiased;\r\n\t-moz-osx-font-smoothing: grayscale;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tfont-size: $--font-size-base;\r\n\tbox-shadow: $--box-shadow-dark;\r\n\tposition: absolute;\r\n\tbackground-color: $--background-color-base;\r\n\ttransition: all 0.5s;\r\n\tleft: 0px;\r\n\ttop: 0px;\r\n\tborder-radius: $--border-radius-small;\r\n\tbox-sizing: border-box;\r\n\toverflow: hidden;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\t.right {\r\n\t\t// background-color: $--background-color-base;\r\n\t\twidth: calc(100% - 210px);\r\n\t\tflex-shrink: 0;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\t& > div {\r\n\t\t\tflex-shrink: 0;\r\n\t\t}\r\n\t\t.content {\r\n\t\t\tposition: relative;\r\n\t\t\twidth: 100%;\r\n\t\t\tflex-grow: 1;\r\n\t\t\t.view {\r\n\t\t\t\theight: calc(100% - 70px);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","<template>\r\n\t<div id=\"statusBar\" :class=\"{unfold:isUnfold}\" element-loading-background=\"rgba(0, 0, 0, 0)\">\r\n\t\t<div class=\"switch\" @click=\"unfold\" v-if=\"streamStatus.step=='danmakuing'\"><span\r\n\t\t\t\tclass=\"el-icon-arrow-up\" />{{isUnfold?'折叠':'展开'}}</div>\r\n\t\t<transition name=\"fade\">\r\n\t\t\t<component :is=\"currentComp\" />\r\n\t\t</transition>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineAsyncComponent, defineComponent } from \"vue\";\r\nimport { mapState } from \"vuex\";\r\nimport { event } from \"@front/util_function/eventBus\";\r\nimport { registerRole } from \"@front/util_function/base\";\r\nimport { wsevent, allApi } from \"@front/api\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { chat } from \"@front/api/chat\";\r\nimport {\r\n\tregisterHost,\r\n\tcloseWorker,\r\n\tgetChangedDanmaku\r\n} from \"@front/util_function/storeWorker\";\r\nconst mainPanel = defineAsyncComponent(() =>\r\n\timport(\"@front/views/streamMonitor/index.vue\")\r\n);\r\nconst shrink = defineAsyncComponent(() =>\r\n\timport(\"@front/views/streamMonitor/shrink.vue\")\r\n);\r\nexport default defineComponent({\r\n\tname: \"statusBar\",\r\n\tcomponents: {\r\n\t\tmainPanel,\r\n\t\tshrink\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisUnfold: false,\r\n\t\t\tclients: {}\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.registerEvents();\r\n\t\tthis.unfold({\r\n\t\t\tname: \"statusPanel\"\r\n\t\t});\r\n\t},\r\n\tbeforeUnmount() {\r\n\t\tthis.unregisterEvents();\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState([\r\n\t\t\t\"roomProfile\",\r\n\t\t\t\"streamStatus\",\r\n\t\t\t\"danmakuProfile\",\r\n\t\t\t\"userSession\"\r\n\t\t]),\r\n\t\tcurrentComp(): any {\r\n\t\t\treturn this.isUnfold ? mainPanel : shrink;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tregisterEvents() {\r\n\t\t\tevent.on(\"routeChange\", this.unfold);\r\n\t\t\tevent.on(\"streamStatusChanged\", this.handleStatusChange);\r\n\t\t\twsevent.on(\"send-chat\", this.sendChat);\r\n\t\t\twsevent.on(\"register-client\", this.setWSClient);\r\n\t\t\twsevent.on(\"acfun-api-get\", this.sendApi);\r\n\t\t\tregisterHost(this.$store, this.dispatchWSClient);\r\n\t\t\tregisterRole(\"工具箱\");\r\n\t\t},\r\n\t\tunregisterEvents() {\r\n\t\t\tevent.off(\"routeChange\", this.unfold);\r\n\t\t\tevent.off(\"streamStatusChanged\", this.handleStatusChange);\r\n\t\t\twsevent.off(\"send-chat\", this.sendChat);\r\n\t\t\twsevent.off(\"register-client\", this.setWSClient);\r\n\t\t\twsevent.off(\"acfun-api-get\", this.sendApi);\r\n\t\t\tcloseWorker();\r\n\t\t},\r\n\t\tsetWSClient({ sourceID, states }: any) {\r\n\t\t\tconst { clients }: any = this;\r\n\t\t\tclients[sourceID] = states;\r\n\t\t},\r\n\t\tdispatchWSClient() {\r\n\t\t\tif (!wsevent.registered) {\r\n\t\t\t\tthis.registerWS();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst clients: any = this.clients;\r\n\t\t\tfor (const client in clients) {\r\n\t\t\t\tconsole.log(client);\r\n\t\t\t\tconst output: any = {};\r\n\t\t\t\tconst states = clients[client];\r\n\t\t\t\tstates.forEach((state: any) => {\r\n\t\t\t\t\tif ([\"userData\"].includes(state)) return;\r\n\t\t\t\t\tif (state === \"changedDanmaku\") {\r\n\t\t\t\t\t\toutput[state] = getChangedDanmaku();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\toutput[state] = this.$store.state[state];\r\n\t\t\t\t});\r\n\t\t\t\twsevent.wsEmit(\"server-response\", output, client);\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleStatusChange() {\r\n\t\t\tconst step = this.streamStatus.step;\r\n\t\t\tlet msg = \"\";\r\n\t\t\tswitch (step) {\r\n\t\t\t\tcase \"danmakuing\":\r\n\t\t\t\t\tmsg = \"直播已开启\";\r\n\t\t\t\t\tthis.isUnfold = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"streamEnded\":\r\n\t\t\t\t\tmsg = \"直播已结束\";\r\n\t\t\t\t\tthis.isUnfold = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (msg) {\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: msg,\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\toffset: 60\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tregisterWS() {\r\n\t\t\tif (wsevent.ws) {\r\n\t\t\t\twsevent.ws.onclose = () => {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\twsevent.ws?.close();\r\n\t\t\twsevent.register(\"server\");\r\n\t\t},\r\n\t\tsendApi({ sourceID, method }: any) {\r\n\t\t\tconst apis: any = allApi;\r\n\t\t\tif (!sourceID || !method || !apis[method]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tapis[method]().then((res: any) => {\r\n\t\t\t\twsevent.wsEmit(\"acfun-api-res\", res, sourceID);\r\n\t\t\t});\r\n\t\t},\r\n\t\tsendChat({ message }: any) {\r\n\t\t\tchat({\r\n\t\t\t\tuserID: this.userSession.userID,\r\n\t\t\t\tdeviceID: this.userSession.deviceID,\r\n\t\t\t\tserviceToken: this.userSession.serviceToken,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tvisitorId: this.userSession.userID,\r\n\t\t\t\t\tliveId: this.roomProfile.liveID,\r\n\t\t\t\t\tcontent: message\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tunfold(e: any) {\r\n\t\t\tif (this.streamStatus.step !== \"danmakuing\") {\r\n\t\t\t\tthis.isUnfold = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!e.name) {\r\n\t\t\t\tthis.isUnfold = !this.isUnfold;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.isUnfold = e.name === \"statusPanel\";\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n#statusBar {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tposition: absolute;\r\n\tz-index: 1002;\r\n\tbottom: 0px;\r\n\ttransition: all 0.5s;\r\n\ttransform: translateY(calc(100% - 70px));\r\n\tborder-top: 1px solid $--color-text-placeholder;\r\n\tbackground-color: $--background-color-base;\r\n\t&.unfold {\r\n\t\t// border-color: rgba(0, 0, 0, 0);\r\n\t\ttransform: translateY(0px);\r\n\t\t.switch span {\r\n\t\t\ttransform: rotateZ(180deg);\r\n\t\t}\r\n\t}\r\n\t.switch {\r\n\t\tposition: absolute;\r\n\t\ttop: 8px;\r\n\t\tright: 25px;\r\n\t\tz-index: 10;\r\n\t\tcolor: $--color-text-secondary;\r\n\t\tuser-select: none;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.25s;\r\n\t\t&:hover {\r\n\t\t\tcolor: $--color-text-primary;\r\n\t\t}\r\n\t\tspan {\r\n\t\t\ttransition: all 0.25s;\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","\r\nimport { defineAsyncComponent, defineComponent } from \"vue\";\r\nimport { mapState } from \"vuex\";\r\nimport { event } from \"@front/util_function/eventBus\";\r\nimport { registerRole } from \"@front/util_function/base\";\r\nimport { wsevent, allApi } from \"@front/api\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { chat } from \"@front/api/chat\";\r\nimport {\r\n\tregisterHost,\r\n\tcloseWorker,\r\n\tgetChangedDanmaku\r\n} from \"@front/util_function/storeWorker\";\r\nconst mainPanel = defineAsyncComponent(() =>\r\n\timport(\"@front/views/streamMonitor/index.vue\")\r\n);\r\nconst shrink = defineAsyncComponent(() =>\r\n\timport(\"@front/views/streamMonitor/shrink.vue\")\r\n);\r\nexport default defineComponent({\r\n\tname: \"statusBar\",\r\n\tcomponents: {\r\n\t\tmainPanel,\r\n\t\tshrink\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisUnfold: false,\r\n\t\t\tclients: {}\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.registerEvents();\r\n\t\tthis.unfold({\r\n\t\t\tname: \"statusPanel\"\r\n\t\t});\r\n\t},\r\n\tbeforeUnmount() {\r\n\t\tthis.unregisterEvents();\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState([\r\n\t\t\t\"roomProfile\",\r\n\t\t\t\"streamStatus\",\r\n\t\t\t\"danmakuProfile\",\r\n\t\t\t\"userSession\"\r\n\t\t]),\r\n\t\tcurrentComp(): any {\r\n\t\t\treturn this.isUnfold ? mainPanel : shrink;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tregisterEvents() {\r\n\t\t\tevent.on(\"routeChange\", this.unfold);\r\n\t\t\tevent.on(\"streamStatusChanged\", this.handleStatusChange);\r\n\t\t\twsevent.on(\"send-chat\", this.sendChat);\r\n\t\t\twsevent.on(\"register-client\", this.setWSClient);\r\n\t\t\twsevent.on(\"acfun-api-get\", this.sendApi);\r\n\t\t\tregisterHost(this.$store, this.dispatchWSClient);\r\n\t\t\tregisterRole(\"工具箱\");\r\n\t\t},\r\n\t\tunregisterEvents() {\r\n\t\t\tevent.off(\"routeChange\", this.unfold);\r\n\t\t\tevent.off(\"streamStatusChanged\", this.handleStatusChange);\r\n\t\t\twsevent.off(\"send-chat\", this.sendChat);\r\n\t\t\twsevent.off(\"register-client\", this.setWSClient);\r\n\t\t\twsevent.off(\"acfun-api-get\", this.sendApi);\r\n\t\t\tcloseWorker();\r\n\t\t},\r\n\t\tsetWSClient({ sourceID, states }: any) {\r\n\t\t\tconst { clients }: any = this;\r\n\t\t\tclients[sourceID] = states;\r\n\t\t},\r\n\t\tdispatchWSClient() {\r\n\t\t\tif (!wsevent.registered) {\r\n\t\t\t\tthis.registerWS();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst clients: any = this.clients;\r\n\t\t\tfor (const client in clients) {\r\n\t\t\t\tconsole.log(client);\r\n\t\t\t\tconst output: any = {};\r\n\t\t\t\tconst states = clients[client];\r\n\t\t\t\tstates.forEach((state: any) => {\r\n\t\t\t\t\tif ([\"userData\"].includes(state)) return;\r\n\t\t\t\t\tif (state === \"changedDanmaku\") {\r\n\t\t\t\t\t\toutput[state] = getChangedDanmaku();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\toutput[state] = this.$store.state[state];\r\n\t\t\t\t});\r\n\t\t\t\twsevent.wsEmit(\"server-response\", output, client);\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleStatusChange() {\r\n\t\t\tconst step = this.streamStatus.step;\r\n\t\t\tlet msg = \"\";\r\n\t\t\tswitch (step) {\r\n\t\t\t\tcase \"danmakuing\":\r\n\t\t\t\t\tmsg = \"直播已开启\";\r\n\t\t\t\t\tthis.isUnfold = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"streamEnded\":\r\n\t\t\t\t\tmsg = \"直播已结束\";\r\n\t\t\t\t\tthis.isUnfold = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (msg) {\r\n\t\t\t\tElMessage({\r\n\t\t\t\t\tmessage: msg,\r\n\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\ttype: \"success\",\r\n\t\t\t\t\toffset: 60\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tregisterWS() {\r\n\t\t\tif (wsevent.ws) {\r\n\t\t\t\twsevent.ws.onclose = () => {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\twsevent.ws?.close();\r\n\t\t\twsevent.register(\"server\");\r\n\t\t},\r\n\t\tsendApi({ sourceID, method }: any) {\r\n\t\t\tconst apis: any = allApi;\r\n\t\t\tif (!sourceID || !method || !apis[method]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tapis[method]().then((res: any) => {\r\n\t\t\t\twsevent.wsEmit(\"acfun-api-res\", res, sourceID);\r\n\t\t\t});\r\n\t\t},\r\n\t\tsendChat({ message }: any) {\r\n\t\t\tchat({\r\n\t\t\t\tuserID: this.userSession.userID,\r\n\t\t\t\tdeviceID: this.userSession.deviceID,\r\n\t\t\t\tserviceToken: this.userSession.serviceToken,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tvisitorId: this.userSession.userID,\r\n\t\t\t\t\tliveId: this.roomProfile.liveID,\r\n\t\t\t\t\tcontent: message\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tunfold(e: any) {\r\n\t\t\tif (this.streamStatus.step !== \"danmakuing\") {\r\n\t\t\t\tthis.isUnfold = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!e.name) {\r\n\t\t\t\tthis.isUnfold = !this.isUnfold;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.isUnfold = e.name === \"statusPanel\";\r\n\t\t}\r\n\t}\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=4442f2b5&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=4442f2b5&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-4442f2b5\"\n\nexport default script","<template>\r\n\t<div id=\"topbar\">\r\n\t\t<div class=\"handler\">\r\n\t\t\t<handler-moving />\r\n\t\t</div>\r\n\r\n\t\t<div class=\"avatar\">\r\n\t\t\t<el-avatar size=\"small\" :src=\"$store.state.userProfile.avatar\" />\r\n\t\t\t<span class=\"username\">{{$store.state.userProfile.nickname}}</span>\r\n\t\t</div>\r\n\t\t<el-dropdown placement=\"bottom-start\" size=\"mini\">\r\n\t\t\t<div class=\"buttonIcon\"><span class=\"el-icon-menu\" /></div>\r\n\t\t\t<template #dropdown>\r\n\t\t\t\t<el-dropdown-menu class=\"menu\">\r\n\t\t\t\t\t<el-dropdown-item class=\"item\" @click=\"logout()\">\r\n\t\t\t\t\t\t切换账号{{$store.state.streaming?\" （建议先结束直播）\":''}}</el-dropdown-item>\r\n\t\t\t\t</el-dropdown-menu>\r\n\t\t\t</template>\r\n\t\t</el-dropdown>\r\n\r\n\t\t<div class=\"buttonIcon divider\">\r\n\t\t\t<el-divider direction=\"vertical\" />\r\n\t\t</div>\r\n\t\t<handler-window />\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, defineAsyncComponent } from \"vue\";\r\nimport { logout } from \"@front/util_function/login\";\r\nconst HandlerMoving = defineAsyncComponent(() =>\r\n\timport(\"@front/components/system/HandlerMoving.vue\")\r\n);\r\nconst HandlerWindow = defineAsyncComponent(() =>\r\n\timport(\"@front/components/system/HandlerWindow.vue\")\r\n);\r\nexport default defineComponent({\r\n\tname: \"topbarAvatar\",\r\n\tcomponents: {\r\n\t\tHandlerMoving,\r\n\t\tHandlerWindow\r\n\t},\r\n\tmethods: {\r\n\t\tlogout() {\r\n\t\t\tlogout();\r\n\t\t}\r\n\t}\r\n});\r\n</script>\r\n<style scoped lang='scss'>\r\n@import \"@front/styles/variables.scss\";\r\n#topbar {\r\n\twidth: calc(100% - 50px);\r\n\theight: 50px;\r\n\tdisplay: flex;\r\n\tposition: relative;\r\n\tborder-bottom: 1px solid $--color-text-placeholder;\r\n\tmargin: 0px 25px;\r\n\tuser-select: none;\r\n\t.handler {\r\n\t\tposition: relative;\r\n\t\tcolor: white;\r\n\t\tflex-grow: 1;\r\n\t}\r\n\t.avatar {\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tfont-size: $--font-size-small;\r\n\t\tcolor: $--color-text-secondary;\r\n\t\t.username {\r\n\t\t\tpadding: 0px 8px 0px 4px;\r\n\t\t}\r\n\t}\r\n}\r\n.menu {\r\n\tmargin: 0px;\r\n\tborder: none;\r\n\t.item {\r\n\t\twhite-space: nowrap;\r\n\t}\r\n}\r\n</style>\r\n","import { render } from \"./withAvatar.vue?vue&type=template&id=1660186d&scoped=true\"\nimport script from \"./withAvatar.vue?vue&type=script&lang=js\"\nexport * from \"./withAvatar.vue?vue&type=script&lang=js\"\n\nimport \"./withAvatar.vue?vue&type=style&index=0&id=1660186d&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-1660186d\"\n\nexport default script","import { render } from \"./index.vue?vue&type=template&id=9b7f3ad4&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=9b7f3ad4&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-9b7f3ad4\"\n\nexport default script","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scrollbarBase\":\"scrollbarBase\",\"scrollbarDark\":\"scrollbarDark\",\"theme\":\"#66a7da\"};","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./imgInpuText.vue?vue&type=style&index=0&id=345d68b2&lang=scss\"","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./imgInputBase.vue?vue&type=style&index=0&id=035791f1&scoped=true&lang=scss\""],"sourceRoot":""}